commit c25240b020d63e99cf1b60fc72306cc8bc881e6b
Author: Miguel Ruiz <miruiz@vmware.com>
Date:   Tue May 3 20:52:30 2022 +0200

    [bitnami/elasticsearch] Standardization + Elasticsearch 8 + Refactor (#9352)
    
    * [bitnami/elasticsearch] Standardization + Elasticsearch 8 + Refactor
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Update README.md with readme-generator-for-helm
    
    Signed-off-by: Bitnami Containers <containers@bitnami.com>
    
    * Fix issues with common.names.namespace
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Revert chart change
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Fix issue with master hosts
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Update VIB values
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Fix elasticsearch.service.ports.restAPI helper
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * Update README.md with readme-generator-for-helm
    
    Signed-off-by: Bitnami Containers <containers@bitnami.com>
    
    * Update dependencies
    
    Signed-off-by: Miguel Ruiz <miruiz@vmware.com>
    
    * [bitnami/elasticsearch] Update components versions
    
    Signed-off-by: Bitnami Containers <containers@bitnami.com>
    
    Co-authored-by: Bitnami Containers <containers@bitnami.com>

diff --git a/.vib/elasticsearch/vib-verify.json b/.vib/elasticsearch/vib-verify.json
index 900ca26514..59183b970d 100644
--- a/.vib/elasticsearch/vib-verify.json
+++ b/.vib/elasticsearch/vib-verify.json
@@ -22,7 +22,7 @@
           "url": "{SHA_ARCHIVE}",
           "path": "/bitnami/elasticsearch"
         },
-        "runtime_parameters": "ImNvb3JkaW5hdGluZyI6CiAgInJlcGxpY2FzIjogIjEiCiJkYXRhIjoKICAicmVwbGljYXMiOiAiMSIKImdsb2JhbCI6CiAgImtpYmFuYUVuYWJsZWQiOiB0cnVlCiJraWJhbmEiOgogICJzZXJ2aWNlIjoKICAgICJwb3J0IjogODAKICAgICJ0eXBlIjogIkxvYWRCYWxhbmNlciIKIm1hc3RlciI6CiAgInJlcGxpY2FzIjogIjEiCiJzeXNjdGxJbWFnZSI6CiAgImVuYWJsZWQiOiB0cnVl",
+        "runtime_parameters": "Imdsb2JhbCI6CiAgImtpYmFuYUVuYWJsZWQiOiB0cnVlCiJtYXN0ZXIiOgogICJyZXBsaWNhQ291bnQiOiAiMSIKImNvb3JkaW5hdGluZyI6CiAgInJlcGxpY2FDb3VudCI6ICIxIgoiZGF0YSI6CiAgInJlcGxpY2FDb3VudCI6ICIxIgoiaW5nZXN0IjoKICAicmVwbGljYUNvdW50IjogIjEiCiJraWJhbmEiOgogICJzZXJ2aWNlIjoKICAgICJwb3J0cyI6CiAgICAgICJodHRwIjogODAKICAgICJ0eXBlIjogIkxvYWRCYWxhbmNlciIKInN5c2N0bEltYWdlIjoKICAiZW5hYmxlZCI6IHRydWUK",
         "target_platform": {
           "target_platform_id": "{VIB_ENV_ALTERNATIVE_TARGET_PLATFORM}",
           "size": {
diff --git a/bitnami/elasticsearch/Chart.lock b/bitnami/elasticsearch/Chart.lock
index 41faa29524..ebc9de313c 100644
--- a/bitnami/elasticsearch/Chart.lock
+++ b/bitnami/elasticsearch/Chart.lock
@@ -1,9 +1,9 @@
 dependencies:
 - name: kibana
   repository: https://charts.bitnami.com/bitnami
-  version: 9.3.17
+  version: 10.0.5
 - name: common
   repository: https://charts.bitnami.com/bitnami
-  version: 1.13.0
-digest: sha256:b71f25d7512519a6d5f555824387c2a83ab3d97d9fbd4545cea278006971db92
-generated: "2022-04-18T13:08:51.404548553Z"
+  version: 1.13.1
+digest: sha256:f0646cfd294f2031d4c8c4742c4be4a69f187b44908faeb314eea671c0f7e33b
+generated: "2022-04-28T16:58:26.150096+02:00"
diff --git a/bitnami/elasticsearch/Chart.yaml b/bitnami/elasticsearch/Chart.yaml
index 278a8527d9..d06754cdc1 100644
--- a/bitnami/elasticsearch/Chart.yaml
+++ b/bitnami/elasticsearch/Chart.yaml
@@ -1,12 +1,12 @@
 annotations:
   category: Analytics
 apiVersion: v2
-appVersion: 7.17.3
+appVersion: 8.2.0
 dependencies:
   - condition: global.kibanaEnabled
     name: kibana
     repository: https://charts.bitnami.com/bitnami
-    version: 9.x.x
+    version: 10.x.x
   - name: common
     repository: https://charts.bitnami.com/bitnami
     tags:
@@ -25,4 +25,4 @@ name: elasticsearch
 sources:
   - https://github.com/bitnami/bitnami-docker-elasticsearch
   - https://www.elastic.co/products/elasticsearch
-version: 17.9.29
+version: 18.0.0
diff --git a/bitnami/elasticsearch/README.md b/bitnami/elasticsearch/README.md
index e87245c96c..1e70429ded 100644
--- a/bitnami/elasticsearch/README.md
+++ b/bitnami/elasticsearch/README.md
@@ -58,41 +58,63 @@ $ helm delete --purge my-release
 
 ### Global parameters
 
-| Name                       | Description                                                        | Value               |
-| -------------------------- | ------------------------------------------------------------------ | ------------------- |
-| `global.imageRegistry`     | Global Docker image registry                                       | `""`                |
-| `global.imagePullSecrets`  | Global Docker registry secret names as an array                    | `[]`                |
-| `global.storageClass`      | Global StorageClass for Persistent Volume(s)                       | `""`                |
-| `global.coordinating.name` | Coordinating name to be used in the Kibana subchart (service name) | `coordinating-only` |
-| `global.kibanaEnabled`     | Whether or not to enable Kibana                                    | `false`             |
+| Name                                         | Description                                                                                           | Value           |
+| -------------------------------------------- | ----------------------------------------------------------------------------------------------------- | --------------- |
+| `global.imageRegistry`                       | Global Docker image registry                                                                          | `""`            |
+| `global.imagePullSecrets`                    | Global Docker registry secret names as an array                                                       | `[]`            |
+| `global.storageClass`                        | Global StorageClass for Persistent Volume(s)                                                          | `""`            |
+| `global.elasticsearch.service.name`          | Elasticsearch service name to be used in the Kibana subchart (ignored if kibanaEnabled=false)         | `elasticsearch` |
+| `global.elasticsearch.service.ports.restAPI` | Elasticsearch service restAPI port to be used in the Kibana subchart (ignored if kibanaEnabled=false) | `9200`          |
+| `global.kibanaEnabled`                       | Whether or not to enable Kibana                                                                       | `false`         |
 
 
 ### Common parameters
 
-| Name                     | Description                                                                                  | Value           |
-| ------------------------ | -------------------------------------------------------------------------------------------- | --------------- |
-| `nameOverride`           | String to partially override common.names.fullname template (will maintain the release name) | `""`            |
-| `fullnameOverride`       | String to fully override common.names.fullname template                                      | `""`            |
-| `clusterDomain`          | Kubernetes cluster domain                                                                    | `cluster.local` |
-| `extraDeploy`            | Array of extra objects to deploy with the release                                            | `[]`            |
-| `diagnosticMode.enabled` | Enable diagnostic mode (all probes will be disabled and the command will be overridden)      | `false`         |
-| `diagnosticMode.command` | Command to override all containers in the deployment                                         | `["sleep"]`     |
-| `diagnosticMode.args`    | Args to override all containers in the deployment                                            | `["infinity"]`  |
+| Name                     | Description                                                                             | Value           |
+| ------------------------ | --------------------------------------------------------------------------------------- | --------------- |
+| `kubeVersion`            | Override Kubernetes version                                                             | `""`            |
+| `nameOverride`           | String to partially override common.names.fullname                                      | `""`            |
+| `fullnameOverride`       | String to fully override common.names.fullname                                          | `""`            |
+| `commonLabels`           | Labels to add to all deployed objects                                                   | `{}`            |
+| `commonAnnotations`      | Annotations to add to all deployed objects                                              | `{}`            |
+| `clusterDomain`          | Kubernetes cluster domain name                                                          | `cluster.local` |
+| `extraDeploy`            | Array of extra objects to deploy with the release                                       | `[]`            |
+| `namespaceOverride`      | String to fully override common.names.namespace                                         | `""`            |
+| `diagnosticMode.enabled` | Enable diagnostic mode (all probes will be disabled and the command will be overridden) | `false`         |
+| `diagnosticMode.command` | Command to override all containers in the deployment                                    | `["sleep"]`     |
+| `diagnosticMode.args`    | Args to override all containers in the deployment                                       | `["infinity"]`  |
 
 
-### Elasticsearch parameters
+### Elasticsearch cluster Parameters
 
 | Name                                       | Description                                                                                                                                         | Value                          |
 | ------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
+| `clusterName`                              | Elasticsearch cluster name                                                                                                                          | `elastic`                      |
+| `containerPorts.restAPI`                   | Elasticsearch REST API port                                                                                                                         | `9200`                         |
+| `containerPorts.transport`                 | Elasticsearch Transport port                                                                                                                        | `9300`                         |
+| `plugins`                                  | Comma, semi-colon or space separated list of plugins to install at initialization                                                                   | `""`                           |
+| `snapshotRepoPath`                         | File System snapshot repository path                                                                                                                | `""`                           |
+| `config`                                   | Override elasticsearch configuration                                                                                                                | `{}`                           |
+| `extraConfig`                              | Append extra configuration to the elasticsearch node configuration                                                                                  | `{}`                           |
+| `extraVolumes`                             | A list of volumes to be added to the pod                                                                                                            | `[]`                           |
+| `extraVolumeMounts`                        | A list of volume mounts to be added to the pod                                                                                                      | `[]`                           |
+| `initScripts`                              | Dictionary of init scripts. Evaluated as a template.                                                                                                | `{}`                           |
+| `initScriptsCM`                            | ConfigMap with the init scripts. Evaluated as a template.                                                                                           | `""`                           |
+| `initScriptsSecret`                        | Secret containing `/docker-entrypoint-initdb.d` scripts to be executed at initialization time that contain sensitive data. Evaluated as a template. | `""`                           |
+| `extraEnvVars`                             | Array containing extra env vars to be added to all pods (evaluated as a template)                                                                   | `[]`                           |
+| `extraEnvVarsCM`                           | ConfigMap containing extra env vars to be added to all pods (evaluated as a template)                                                               | `""`                           |
+| `extraEnvVarsSecret`                       | Secret containing extra env vars to be added to all pods (evaluated as a template)                                                                  | `""`                           |
+| `sidecars`                                 | Add additional sidecar containers to the all elasticsearch node pod(s)                                                                              | `[]`                           |
+| `initContainers`                           | Add additional init containers to the all elasticsearch node pod(s)                                                                                 | `[]`                           |
 | `image.registry`                           | Elasticsearch image registry                                                                                                                        | `docker.io`                    |
 | `image.repository`                         | Elasticsearch image repository                                                                                                                      | `bitnami/elasticsearch`        |
-| `image.tag`                                | Elasticsearch image tag (immutable tags are recommended)                                                                                            | `7.16.3-debian-10-r0`          |
+| `image.tag`                                | Elasticsearch image tag (immutable tags are recommended)                                                                                            | `8.1.3-debian-10-r0`           |
 | `image.pullPolicy`                         | Elasticsearch image pull policy                                                                                                                     | `IfNotPresent`                 |
 | `image.pullSecrets`                        | Elasticsearch image pull secrets                                                                                                                    | `[]`                           |
-| `image.debug`                              | Enable image debug mode                                                                                                                             | `false`                        |
+| `image.debug`                              | Enable Elasticsearch image debug mode                                                                                                               | `false`                        |
 | `security.enabled`                         | Enable X-Pack Security settings                                                                                                                     | `false`                        |
 | `security.elasticPassword`                 | Password for 'elastic' user                                                                                                                         | `""`                           |
-| `security.existingSecret`                  | Name of the existing secret containing the Elasticsearch password                                                                                   | `""`                           |
+| `security.existingSecret`                  | Name of the existing secret containing the Elasticsearch password and                                                                               | `""`                           |
 | `security.fipsMode`                        | Configure elasticsearch with FIPS 140 compliant mode                                                                                                | `false`                        |
 | `security.tls.restEncryption`              | Enable SSL/TLS encryption for Elasticsearch REST API.                                                                                               | `true`                         |
 | `security.tls.autoGenerated`               | Create self-signed TLS certificates.                                                                                                                | `false`                        |
@@ -101,455 +123,568 @@ $ helm delete --purge my-release
 | `security.tls.data.existingSecret`         | Existing secret containing the certificates for the data nodes                                                                                      | `""`                           |
 | `security.tls.ingest.existingSecret`       | Existing secret containing the certificates for the ingest nodes                                                                                    | `""`                           |
 | `security.tls.coordinating.existingSecret` | Existing secret containing the certificates for the coordinating nodes                                                                              | `""`                           |
-| `security.tls.keystorePassword`            | Password to access the JKS/PKCS12 keystore or PEM key when they are password-protected.                                                             | `""`                           |
-| `security.tls.truststorePassword`          | Password to access the JKS/PKCS12 truststore when they are password-protected.                                                                      | `""`                           |
 | `security.tls.keystoreFilename`            | Name of the keystore file                                                                                                                           | `elasticsearch.keystore.jks`   |
 | `security.tls.truststoreFilename`          | Name of the truststore                                                                                                                              | `elasticsearch.truststore.jks` |
 | `security.tls.usePemCerts`                 | Use this variable if your secrets contain PEM certificates instead of JKS/PKCS12                                                                    | `false`                        |
+| `security.tls.passwordsSecret`             | Existing secret containing the Keystore and Truststore passwords, or key password if PEM certs are used                                             | `""`                           |
+| `security.tls.keystorePassword`            | Password to access the JKS/PKCS12 keystore or PEM key when they are password-protected.                                                             | `""`                           |
+| `security.tls.truststorePassword`          | Password to access the JKS/PKCS12 truststore when they are password-protected.                                                                      | `""`                           |
 | `security.tls.keyPassword`                 | Password to access the PEM key when they are password-protected.                                                                                    | `""`                           |
-| `name`                                     | Elasticsearch cluster name                                                                                                                          | `elastic`                      |
-| `plugins`                                  | Comma, semi-colon or space separated list of plugins to install at initialization                                                                   | `""`                           |
-| `snapshotRepoPath`                         | File System snapshot repository path                                                                                                                | `""`                           |
-| `config`                                   | Override elasticsearch configuration                                                                                                                | `{}`                           |
-| `extraConfig`                              | Append extra configuration to the elasticsearch node configuration                                                                                  | `{}`                           |
-| `extraVolumes`                             | A list of volumes to be added to the pod                                                                                                            | `[]`                           |
-| `extraVolumeMounts`                        | A list of volume mounts to be added to the pod                                                                                                      | `[]`                           |
-| `initScripts`                              | Dictionary of init scripts. Evaluated as a template.                                                                                                | `{}`                           |
-| `initScriptsCM`                            | ConfigMap with the init scripts. Evaluated as a template.                                                                                           | `""`                           |
-| `initScriptsSecret`                        | Secret containing `/docker-entrypoint-initdb.d` scripts to be executed at initialization time that contain sensitive data. Evaluated as a template. | `""`                           |
-| `extraEnvVars`                             | Array containing extra env vars to be added to all pods (evaluated as a template)                                                                   | `[]`                           |
-| `extraEnvVarsConfigMap`                    | ConfigMap containing extra env vars to be added to all pods (evaluated as a template)                                                               | `""`                           |
-| `extraEnvVarsSecret`                       | Secret containing extra env vars to be added to all pods (evaluated as a template)                                                                  | `""`                           |
-
-
-### Master parameters
-
-| Name                                        | Description                                                                                                                                                                                                                             | Value                    |
-| ------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
-| `master.name`                               | Master-eligible node pod name                                                                                                                                                                                                           | `master`                 |
-| `master.fullnameOverride`                   | String to fully override elasticsearch.master.fullname template with a string                                                                                                                                                           | `""`                     |
-| `master.replicas`                           | Desired number of Elasticsearch master-eligible nodes. Consider using an odd number of master nodes to prevent "split brain" situation.  See: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/modules-discovery-voting.html | `3`                      |
-| `master.updateStrategy.type`                | Update strategy for Master statefulset                                                                                                                                                                                                  | `RollingUpdate`          |
-| `master.hostAliases`                        | Add deployment host aliases                                                                                                                                                                                                             | `[]`                     |
-| `master.schedulerName`                      | Name of the k8s scheduler (other than default)                                                                                                                                                                                          | `""`                     |
-| `master.heapSize`                           | Master-eligible node heap size                                                                                                                                                                                                          | `128m`                   |
-| `master.podAnnotations`                     | Annotations for master-eligible pods.                                                                                                                                                                                                   | `{}`                     |
-| `master.podLabels`                          | Extra labels to add to Pod                                                                                                                                                                                                              | `{}`                     |
-| `master.securityContext.enabled`            | Enable security context for master-eligible pods                                                                                                                                                                                        | `true`                   |
-| `master.securityContext.fsGroup`            | Group ID for the container for master-eligible pods                                                                                                                                                                                     | `1001`                   |
-| `master.securityContext.runAsUser`          | User ID for the container for master-eligible pods                                                                                                                                                                                      | `1001`                   |
-| `master.podSecurityContext.enabled`         | Enable security context for master-eligible pods                                                                                                                                                                                        | `false`                  |
-| `master.podSecurityContext.fsGroup`         | Group ID for the container for master-eligible pods                                                                                                                                                                                     | `1001`                   |
-| `master.containerSecurityContext.enabled`   | Enable security context for master-eligible pods                                                                                                                                                                                        | `false`                  |
-| `master.containerSecurityContext.runAsUser` | User ID for the container for master-eligible pods                                                                                                                                                                                      | `1001`                   |
-| `master.podAffinityPreset`                  | Master-eligible Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                     | `""`                     |
-| `master.podAntiAffinityPreset`              | Master-eligible Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                | `""`                     |
-| `master.nodeAffinityPreset.type`            | Master-eligible Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                               | `""`                     |
-| `master.nodeAffinityPreset.key`             | Master-eligible Node label key to match Ignored if `affinity` is set.                                                                                                                                                                   | `""`                     |
-| `master.nodeAffinityPreset.values`          | Master-eligible Node label values to match. Ignored if `affinity` is set.                                                                                                                                                               | `[]`                     |
-| `master.affinity`                           | Master-eligible Affinity for pod assignment                                                                                                                                                                                             | `{}`                     |
-| `master.priorityClassName`                  | Master pods Priority Class Name                                                                                                                                                                                                         | `""`                     |
-| `master.nodeSelector`                       | Master-eligible Node labels for pod assignment                                                                                                                                                                                          | `{}`                     |
-| `master.tolerations`                        | Master-eligible Tolerations for pod assignment                                                                                                                                                                                          | `[]`                     |
-| `master.topologySpreadConstraints`          | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                                                                                                                | `[]`                     |
-| `master.resources.limits`                   | The resources limits for the container                                                                                                                                                                                                  | `{}`                     |
-| `master.resources.requests`                 | The requested resources for the container                                                                                                                                                                                               | `{}`                     |
-| `master.startupProbe.enabled`               | Enable/disable the startup probe (master nodes pod)                                                                                                                                                                                     | `false`                  |
-| `master.startupProbe.initialDelaySeconds`   | Delay before startup probe is initiated (master nodes pod)                                                                                                                                                                              | `90`                     |
-| `master.startupProbe.periodSeconds`         | How often to perform the probe (master nodes pod)                                                                                                                                                                                       | `10`                     |
-| `master.startupProbe.timeoutSeconds`        | When the probe times out (master nodes pod)                                                                                                                                                                                             | `5`                      |
-| `master.startupProbe.successThreshold`      | Minimum consecutive successes for the probe to be considered successful after having failed (master nodes pod)                                                                                                                          | `1`                      |
-| `master.startupProbe.failureThreshold`      | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                                                                                                               | `5`                      |
-| `master.livenessProbe.enabled`              | Enable/disable the liveness probe (master-eligible nodes pod)                                                                                                                                                                           | `true`                   |
-| `master.livenessProbe.initialDelaySeconds`  | Delay before liveness probe is initiated (master-eligible nodes pod)                                                                                                                                                                    | `90`                     |
-| `master.livenessProbe.periodSeconds`        | How often to perform the probe (master-eligible nodes pod)                                                                                                                                                                              | `10`                     |
-| `master.livenessProbe.timeoutSeconds`       | When the probe times out (master-eligible nodes pod)                                                                                                                                                                                    | `5`                      |
-| `master.livenessProbe.successThreshold`     | Minimum consecutive successes for the probe to be considered successful after having failed (master-eligible nodes pod)                                                                                                                 | `1`                      |
-| `master.livenessProbe.failureThreshold`     | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                                                                                                               | `5`                      |
-| `master.readinessProbe.enabled`             | Enable/disable the readiness probe (master-eligible nodes pod)                                                                                                                                                                          | `true`                   |
-| `master.readinessProbe.initialDelaySeconds` | Delay before readiness probe is initiated (master-eligible nodes pod)                                                                                                                                                                   | `90`                     |
-| `master.readinessProbe.periodSeconds`       | How often to perform the probe (master-eligible nodes pod)                                                                                                                                                                              | `10`                     |
-| `master.readinessProbe.timeoutSeconds`      | When the probe times out (master-eligible nodes pod)                                                                                                                                                                                    | `5`                      |
-| `master.readinessProbe.successThreshold`    | Minimum consecutive successes for the probe to be considered successful after having failed (master-eligible nodes pod)                                                                                                                 | `1`                      |
-| `master.readinessProbe.failureThreshold`    | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                                                                                                               | `5`                      |
-| `master.customStartupProbe`                 | Override default startup probe                                                                                                                                                                                                          | `{}`                     |
-| `master.customLivenessProbe`                | Override default liveness probe                                                                                                                                                                                                         | `{}`                     |
-| `master.customReadinessProbe`               | Override default readiness probe                                                                                                                                                                                                        | `{}`                     |
-| `master.initContainers`                     | Extra init containers to add to the Elasticsearch master-eligible pod(s)                                                                                                                                                                | `[]`                     |
-| `master.sidecars`                           | Extra sidecar containers to add to the Elasticsearch master-eligible pod(s)                                                                                                                                                             | `[]`                     |
-| `master.persistence.enabled`                | Enable persistence using a `PersistentVolumeClaim`                                                                                                                                                                                      | `true`                   |
-| `master.persistence.storageClass`           | Persistent Volume Storage Class                                                                                                                                                                                                         | `""`                     |
-| `master.persistence.existingClaim`          | Existing Persistent Volume Claim                                                                                                                                                                                                        | `""`                     |
-| `master.persistence.existingVolume`         | Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `master.persistence.selector` is set.                                                                                      | `""`                     |
-| `master.persistence.selector`               | Configure custom selector for existing Persistent Volume. Overwrites `master.persistence.existingVolume`                                                                                                                                | `{}`                     |
-| `master.persistence.annotations`            | Persistent Volume Claim annotations                                                                                                                                                                                                     | `{}`                     |
-| `master.persistence.accessModes`            | Persistent Volume Access Modes                                                                                                                                                                                                          | `["ReadWriteOnce"]`      |
-| `master.persistence.size`                   | Persistent Volume Size                                                                                                                                                                                                                  | `8Gi`                    |
-| `master.service.type`                       | Kubernetes Service type (master-eligible nodes)                                                                                                                                                                                         | `ClusterIP`              |
-| `master.service.port`                       | Kubernetes Service port for Elasticsearch transport port (master-eligible nodes)                                                                                                                                                        | `9300`                   |
-| `master.service.nodePort`                   | Kubernetes Service nodePort (master-eligible nodes)                                                                                                                                                                                     | `""`                     |
-| `master.service.annotations`                | Annotations for master-eligible nodes service                                                                                                                                                                                           | `{}`                     |
-| `master.service.loadBalancerIP`             | loadBalancerIP if master-eligible nodes service type is `LoadBalancer`                                                                                                                                                                  | `""`                     |
-| `master.ingress.enabled`                    | Enable ingress controller resource                                                                                                                                                                                                      | `false`                  |
-| `master.ingress.pathType`                   | Ingress Path type                                                                                                                                                                                                                       | `ImplementationSpecific` |
-| `master.ingress.apiVersion`                 | Override API Version (automatically detected if not set)                                                                                                                                                                                | `""`                     |
-| `master.ingress.hostname`                   | Default host for the ingress resource. If specified as "*" no host rule is configured                                                                                                                                                   | `master.local`           |
-| `master.ingress.path`                       | The Path to Master. You may need to set this to '/*' in order to use this with ALB ingress controllers.                                                                                                                                 | `/`                      |
-| `master.ingress.annotations`                | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.                                                                                                        | `{}`                     |
-| `master.ingress.tls`                        | Enable TLS configuration for the hostname defined at master.ingress.hostname parameter                                                                                                                                                  | `false`                  |
-| `master.ingress.extraHosts`                 | The list of additional hostnames to be covered with this ingress record.                                                                                                                                                                | `[]`                     |
-| `master.ingress.extraPaths`                 | Additional arbitrary path/backend objects                                                                                                                                                                                               | `[]`                     |
-| `master.ingress.extraTls`                   | The tls configuration for additional hostnames to be covered with this ingress record.                                                                                                                                                  | `[]`                     |
-| `master.ingress.secrets`                    | If you're providing your own certificates, please use this to add the certificates as secrets                                                                                                                                           | `[]`                     |
-| `master.serviceAccount.create`              | Enable creation of ServiceAccount for the master node                                                                                                                                                                                   | `false`                  |
-| `master.serviceAccount.name`                | Name of the created serviceAccount                                                                                                                                                                                                      | `""`                     |
-| `master.autoscaling.enabled`                | Enable autoscaling for master replicas                                                                                                                                                                                                  | `false`                  |
-| `master.autoscaling.minReplicas`            | Minimum number of master replicas                                                                                                                                                                                                       | `2`                      |
-| `master.autoscaling.maxReplicas`            | Maximum number of master replicas                                                                                                                                                                                                       | `11`                     |
-| `master.autoscaling.targetCPU`              | Target CPU utilization percentage for master replica autoscaling                                                                                                                                                                        | `""`                     |
-| `master.autoscaling.targetMemory`           | Target Memory utilization percentage for master replica autoscaling                                                                                                                                                                     | `""`                     |
-
-
-### Coordinating parameters
-
-| Name                                              | Description                                                                                                               | Value           |
-| ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | --------------- |
-| `coordinating.fullnameOverride`                   | String to fully override elasticsearch.coordinating.fullname template with a string                                       | `""`            |
-| `coordinating.replicas`                           | Desired number of Elasticsearch coordinating-only nodes                                                                   | `2`             |
-| `coordinating.hostAliases`                        | Add deployment host aliases                                                                                               | `[]`            |
-| `coordinating.schedulerName`                      | Name of the k8s scheduler (other than default)                                                                            | `""`            |
-| `coordinating.updateStrategy.type`                | Update strategy for Coordinating Statefulset                                                                              | `RollingUpdate` |
-| `coordinating.heapSize`                           | Coordinating-only node heap size                                                                                          | `128m`          |
-| `coordinating.podAnnotations`                     | Annotations for coordinating pods.                                                                                        | `{}`            |
-| `coordinating.podLabels`                          | Extra labels to add to Pod                                                                                                | `{}`            |
-| `coordinating.securityContext.enabled`            | Enable security context for coordinating-only pods                                                                        | `true`          |
-| `coordinating.securityContext.fsGroup`            | Group ID for the container for coordinating-only pods                                                                     | `1001`          |
-| `coordinating.securityContext.runAsUser`          | User ID for the container for coordinating-only pods                                                                      | `1001`          |
-| `coordinating.podSecurityContext.enabled`         | Enable security context for coordinating-only pods                                                                        | `false`         |
-| `coordinating.podSecurityContext.fsGroup`         | Group ID for the container for coordinating-only pods                                                                     | `1001`          |
-| `coordinating.containerSecurityContext.enabled`   | Enable security context for coordinating-only pods                                                                        | `false`         |
-| `coordinating.containerSecurityContext.runAsUser` | User ID for the container for coordinating-only pods                                                                      | `1001`          |
-| `coordinating.podAffinityPreset`                  | Coordinating Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                          | `""`            |
-| `coordinating.podAntiAffinityPreset`              | Coordinating Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                     | `""`            |
-| `coordinating.nodeAffinityPreset.type`            | Coordinating Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                    | `""`            |
-| `coordinating.nodeAffinityPreset.key`             | Coordinating Node label key to match Ignored if `affinity` is set.                                                        | `""`            |
-| `coordinating.nodeAffinityPreset.values`          | Coordinating Node label values to match. Ignored if `affinity` is set.                                                    | `[]`            |
-| `coordinating.affinity`                           | Coordinating Affinity for pod assignment                                                                                  | `{}`            |
-| `coordinating.priorityClassName`                  | Coordinating pods Priority Class Name                                                                                     | `""`            |
-| `coordinating.nodeSelector`                       | Coordinating Node labels for pod assignment                                                                               | `{}`            |
-| `coordinating.tolerations`                        | Coordinating Tolerations for pod assignment                                                                               | `[]`            |
-| `coordinating.topologySpreadConstraints`          | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template  | `[]`            |
-| `coordinating.resources.limits`                   | The resources limits for the container                                                                                    | `{}`            |
-| `coordinating.resources.requests`                 | The requested resources for the container                                                                                 | `{}`            |
-| `coordinating.startupProbe.enabled`               | Enable/disable the startup probe (coordinating nodes pod)                                                                 | `false`         |
-| `coordinating.startupProbe.initialDelaySeconds`   | Delay before startup probe is initiated (coordinating nodes pod)                                                          | `90`            |
-| `coordinating.startupProbe.periodSeconds`         | How often to perform the probe (coordinating nodes pod)                                                                   | `10`            |
-| `coordinating.startupProbe.timeoutSeconds`        | When the probe times out (coordinating nodes pod)                                                                         | `5`             |
-| `coordinating.startupProbe.failureThreshold`      | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
-| `coordinating.startupProbe.successThreshold`      | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating nodes pod)      | `1`             |
-| `coordinating.livenessProbe.enabled`              | Enable/disable the liveness probe (coordinating-only nodes pod)                                                           | `true`          |
-| `coordinating.livenessProbe.initialDelaySeconds`  | Delay before liveness probe is initiated (coordinating-only nodes pod)                                                    | `90`            |
-| `coordinating.livenessProbe.periodSeconds`        | How often to perform the probe (coordinating-only nodes pod)                                                              | `10`            |
-| `coordinating.livenessProbe.timeoutSeconds`       | When the probe times out (coordinating-only nodes pod)                                                                    | `5`             |
-| `coordinating.livenessProbe.failureThreshold`     | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
-| `coordinating.livenessProbe.successThreshold`     | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod) | `1`             |
-| `coordinating.readinessProbe.enabled`             | Enable/disable the readiness probe (coordinating-only nodes pod)                                                          | `true`          |
-| `coordinating.readinessProbe.initialDelaySeconds` | Delay before readiness probe is initiated (coordinating-only nodes pod)                                                   | `90`            |
-| `coordinating.readinessProbe.periodSeconds`       | How often to perform the probe (coordinating-only nodes pod)                                                              | `10`            |
-| `coordinating.readinessProbe.timeoutSeconds`      | When the probe times out (coordinating-only nodes pod)                                                                    | `5`             |
-| `coordinating.readinessProbe.failureThreshold`    | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
-| `coordinating.readinessProbe.successThreshold`    | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod) | `1`             |
-| `coordinating.customStartupProbe`                 | Override default startup probe                                                                                            | `{}`            |
-| `coordinating.customLivenessProbe`                | Override default liveness probe                                                                                           | `{}`            |
-| `coordinating.customReadinessProbe`               | Override default readiness probe                                                                                          | `{}`            |
-| `coordinating.initContainers`                     | Extra init containers to add to the Elasticsearch coordinating-only pod(s)                                                | `[]`            |
-| `coordinating.sidecars`                           | Extra sidecar containers to add to the Elasticsearch coordinating-only pod(s)                                             | `[]`            |
-| `coordinating.service.type`                       | Kubernetes Service type (coordinating-only nodes)                                                                         | `ClusterIP`     |
-| `coordinating.service.port`                       | Kubernetes Service port for REST API (coordinating-only nodes)                                                            | `9200`          |
-| `coordinating.service.nodePort`                   | Kubernetes Service nodePort (coordinating-only nodes)                                                                     | `""`            |
-| `coordinating.service.annotations`                | Annotations for coordinating-only nodes service                                                                           | `{}`            |
-| `coordinating.service.loadBalancerIP`             | loadBalancerIP if coordinating-only nodes service type is `LoadBalancer`                                                  | `""`            |
-| `coordinating.service.externalTrafficPolicy`      | Enable client source IP preservation with externalTrafficPolicy: Local                                                    | `Cluster`       |
-| `coordinating.serviceAccount.create`              | Enable creation of ServiceAccount for the coordinating-only node                                                          | `false`         |
-| `coordinating.serviceAccount.name`                | Name of the created serviceAccount                                                                                        | `""`            |
-| `coordinating.autoscaling.enabled`                | Enable autoscaling for coordinating replicas                                                                              | `false`         |
-| `coordinating.autoscaling.minReplicas`            | Minimum number of coordinating replicas                                                                                   | `2`             |
-| `coordinating.autoscaling.maxReplicas`            | Maximum number of coordinating replicas                                                                                   | `11`            |
-| `coordinating.autoscaling.targetCPU`              | Target CPU utilization percentage for coordinating replica autoscaling                                                    | `""`            |
-| `coordinating.autoscaling.targetMemory`           | Target Memory utilization percentage for coordinating replica autoscaling                                                 | `""`            |
-
-
-### Data parameters
-
-| Name                                         | Description                                                                                                                                       | Value               |
-| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- |
-| `data.name`                                  | Data node pod name                                                                                                                                | `data`              |
-| `data.fullnameOverride`                      | String to fully override elasticsearch.data.fullname template with a string                                                                       | `""`                |
-| `data.replicas`                              | Desired number of Elasticsearch data nodes                                                                                                        | `2`                 |
-| `data.hostAliases`                           | Add deployment host aliases                                                                                                                       | `[]`                |
-| `data.schedulerName`                         | Name of the k8s scheduler (other than default)                                                                                                    | `""`                |
-| `data.updateStrategy.type`                   | Update strategy for Data statefulset                                                                                                              | `RollingUpdate`     |
-| `data.updateStrategy.rollingUpdatePartition` | Partition update strategy for Data statefulset                                                                                                    | `""`                |
-| `data.heapSize`                              | Data node heap size                                                                                                                               | `1024m`             |
-| `data.podAnnotations`                        | Annotations for data pods.                                                                                                                        | `{}`                |
-| `data.podLabels`                             | Extra labels to add to Pod                                                                                                                        | `{}`                |
-| `data.securityContext.enabled`               | Enable security context for data pods                                                                                                             | `true`              |
-| `data.securityContext.fsGroup`               | Group ID for the container for data pods                                                                                                          | `1001`              |
-| `data.securityContext.runAsUser`             | User ID for the container for data pods                                                                                                           | `1001`              |
-| `data.podSecurityContext.enabled`            | Enable security context for data pods                                                                                                             | `true`              |
-| `data.podSecurityContext.fsGroup`            | Group ID for the container for data pods                                                                                                          | `1001`              |
-| `data.containerSecurityContext.enabled`      | Enable security context for data pods                                                                                                             | `true`              |
-| `data.containerSecurityContext.runAsUser`    | User ID for the container for data pods                                                                                                           | `1001`              |
-| `data.podAffinityPreset`                     | Data Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                          | `""`                |
-| `data.podAntiAffinityPreset`                 | Data Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                     | `""`                |
-| `data.nodeAffinityPreset.type`               | Data Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                    | `""`                |
-| `data.nodeAffinityPreset.key`                | Data Node label key to match Ignored if `affinity` is set.                                                                                        | `""`                |
-| `data.nodeAffinityPreset.values`             | Data Node label values to match. Ignored if `affinity` is set.                                                                                    | `[]`                |
-| `data.affinity`                              | Data Affinity for pod assignment                                                                                                                  | `{}`                |
-| `data.priorityClassName`                     | Data pods Priority Class Name                                                                                                                     | `""`                |
-| `data.nodeSelector`                          | Data Node labels for pod assignment                                                                                                               | `{}`                |
-| `data.tolerations`                           | Data Tolerations for pod assignment                                                                                                               | `[]`                |
-| `data.topologySpreadConstraints`             | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                          | `[]`                |
-| `data.resources.limits`                      | The resources limits for the container                                                                                                            | `{}`                |
-| `data.resources.requests`                    | The requested resources for the container                                                                                                         | `{}`                |
-| `data.startupProbe.enabled`                  | Enable/disable the startup probe (data nodes pod)                                                                                                 | `false`             |
-| `data.startupProbe.initialDelaySeconds`      | Delay before startup probe is initiated (data nodes pod)                                                                                          | `90`                |
-| `data.startupProbe.periodSeconds`            | How often to perform the probe (data nodes pod)                                                                                                   | `10`                |
-| `data.startupProbe.timeoutSeconds`           | When the probe times out (data nodes pod)                                                                                                         | `5`                 |
-| `data.startupProbe.failureThreshold`         | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                         | `5`                 |
-| `data.startupProbe.successThreshold`         | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                      | `1`                 |
-| `data.livenessProbe.enabled`                 | Enable/disable the liveness probe (data nodes pod)                                                                                                | `true`              |
-| `data.livenessProbe.initialDelaySeconds`     | Delay before liveness probe is initiated (data nodes pod)                                                                                         | `90`                |
-| `data.livenessProbe.periodSeconds`           | How often to perform the probe (data nodes pod)                                                                                                   | `10`                |
-| `data.livenessProbe.timeoutSeconds`          | When the probe times out (data nodes pod)                                                                                                         | `5`                 |
-| `data.livenessProbe.failureThreshold`        | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                         | `5`                 |
-| `data.livenessProbe.successThreshold`        | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                      | `1`                 |
-| `data.readinessProbe.enabled`                | Enable/disable the readiness probe (data nodes pod)                                                                                               | `true`              |
-| `data.readinessProbe.initialDelaySeconds`    | Delay before readiness probe is initiated (data nodes pod)                                                                                        | `90`                |
-| `data.readinessProbe.periodSeconds`          | How often to perform the probe (data nodes pod)                                                                                                   | `10`                |
-| `data.readinessProbe.timeoutSeconds`         | When the probe times out (data nodes pod)                                                                                                         | `5`                 |
-| `data.readinessProbe.failureThreshold`       | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                         | `5`                 |
-| `data.readinessProbe.successThreshold`       | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                      | `1`                 |
-| `data.customStartupProbe`                    | Override default startup probe                                                                                                                    | `{}`                |
-| `data.customLivenessProbe`                   | Override default liveness probe                                                                                                                   | `{}`                |
-| `data.customReadinessProbe`                  | Override default readiness probe                                                                                                                  | `{}`                |
-| `data.initContainers`                        | Extra init containers to add to the Elasticsearch data pod(s)                                                                                     | `[]`                |
-| `data.sidecars`                              | Extra sidecar containers to add to the Elasticsearch data pod(s)                                                                                  | `[]`                |
-| `data.service.annotations`                   | Annotations for data-eligible nodes service                                                                                                       | `{}`                |
-| `data.persistence.enabled`                   | Enable persistence using a `PersistentVolumeClaim`                                                                                                | `true`              |
-| `data.persistence.storageClass`              | Persistent Volume Storage Class                                                                                                                   | `""`                |
-| `data.persistence.existingClaim`             | Existing Persistent Volume Claim                                                                                                                  | `""`                |
-| `data.persistence.existingVolume`            | Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `data.persistence.selector` ist set. | `""`                |
-| `data.persistence.selector`                  | Configure custom selector for existing Persistent Volume. Overwrites `data.persistence.existingVolume`                                            | `{}`                |
-| `data.persistence.annotations`               | Persistent Volume Claim annotations                                                                                                               | `{}`                |
-| `data.persistence.accessModes`               | Persistent Volume Access Modes                                                                                                                    | `["ReadWriteOnce"]` |
-| `data.persistence.size`                      | Persistent Volume Size                                                                                                                            | `8Gi`               |
-| `data.serviceAccount.create`                 | Enable creation of ServiceAccount for the data node                                                                                               | `false`             |
-| `data.serviceAccount.name`                   | Name of the created serviceAccount                                                                                                                | `""`                |
-| `data.autoscaling.enabled`                   | Enable autoscaling for data replicas                                                                                                              | `false`             |
-| `data.autoscaling.minReplicas`               | Minimum number of data replicas                                                                                                                   | `2`                 |
-| `data.autoscaling.maxReplicas`               | Maximum number of data replicas                                                                                                                   | `11`                |
-| `data.autoscaling.targetCPU`                 | Target CPU utilization percentage for data replica autoscaling                                                                                    | `""`                |
-| `data.autoscaling.targetMemory`              | Target Memory utilization percentage for data replica autoscaling                                                                                 | `""`                |
-
-
-### Ingest parameters
-
-| Name                                        | Description                                                                                                              | Value           |
-| ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | --------------- |
-| `ingest.enabled`                            | Enable ingest nodes                                                                                                      | `false`         |
-| `ingest.name`                               | Ingest node pod name                                                                                                     | `ingest`        |
-| `ingest.fullnameOverride`                   | String to fully override elasticsearch.ingest.fullname template with a string                                            | `""`            |
-| `ingest.replicas`                           | Desired number of Elasticsearch ingest nodes                                                                             | `2`             |
-| `ingest.updateStrategy.type`                | Update strategy for Ingest statefulset                                                                                   | `RollingUpdate` |
-| `ingest.heapSize`                           | Ingest node heap size                                                                                                    | `128m`          |
-| `ingest.podAnnotations`                     | Annotations for ingest pods.                                                                                             | `{}`            |
-| `ingest.hostAliases`                        | Add deployment host aliases                                                                                              | `[]`            |
-| `ingest.schedulerName`                      | Name of the k8s scheduler (other than default)                                                                           | `""`            |
-| `ingest.podLabels`                          | Extra labels to add to Pod                                                                                               | `{}`            |
-| `ingest.securityContext.enabled`            | Enable security context for ingest pods                                                                                  | `true`          |
-| `ingest.securityContext.fsGroup`            | Group ID for the container for ingest pods                                                                               | `1001`          |
-| `ingest.securityContext.runAsUser`          | User ID for the container for ingest pods                                                                                | `1001`          |
-| `ingest.podSecurityContext.enabled`         | Enable security context for ingest pods                                                                                  | `true`          |
-| `ingest.podSecurityContext.fsGroup`         | Group ID for the container for ingest pods                                                                               | `1001`          |
-| `ingest.containerSecurityContext.enabled`   | Enable security context for ingest pods                                                                                  | `true`          |
-| `ingest.containerSecurityContext.runAsUser` | User ID for the container for ingest pods                                                                                | `1001`          |
-| `ingest.podAffinityPreset`                  | Ingest Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                               | `""`            |
-| `ingest.podAntiAffinityPreset`              | Ingest Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                          | `""`            |
-| `ingest.nodeAffinityPreset.type`            | Ingest Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                         | `""`            |
-| `ingest.nodeAffinityPreset.key`             | Ingest Node label key to match Ignored if `affinity` is set.                                                             | `""`            |
-| `ingest.nodeAffinityPreset.values`          | Ingest Node label values to match. Ignored if `affinity` is set.                                                         | `[]`            |
-| `ingest.affinity`                           | Ingest Affinity for pod assignment                                                                                       | `{}`            |
-| `ingest.priorityClassName`                  | Ingest pods Priority Class Name                                                                                          | `""`            |
-| `ingest.nodeSelector`                       | Ingest Node labels for pod assignment                                                                                    | `{}`            |
-| `ingest.tolerations`                        | Ingest Tolerations for pod assignment                                                                                    | `[]`            |
-| `ingest.topologySpreadConstraints`          | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template | `[]`            |
-| `ingest.resources.limits`                   | The resources limits for the container                                                                                   | `{}`            |
-| `ingest.resources.requests`                 | The requested resources for the container                                                                                | `{}`            |
-| `ingest.startupProbe.enabled`               | Enable/disable the startup probe (ingest nodes pod)                                                                      | `false`         |
-| `ingest.startupProbe.initialDelaySeconds`   | Delay before startup probe is initiated (ingest nodes pod)                                                               | `90`            |
-| `ingest.startupProbe.periodSeconds`         | How often to perform the probe (ingest nodes pod)                                                                        | `10`            |
-| `ingest.startupProbe.timeoutSeconds`        | When the probe times out (ingest nodes pod)                                                                              | `5`             |
-| `ingest.startupProbe.failureThreshold`      | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`             |
-| `ingest.startupProbe.successThreshold`      | Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)           | `1`             |
-| `ingest.livenessProbe.enabled`              | Enable/disable the liveness probe (ingest nodes pod)                                                                     | `true`          |
-| `ingest.livenessProbe.initialDelaySeconds`  | Delay before liveness probe is initiated (ingest nodes pod)                                                              | `90`            |
-| `ingest.livenessProbe.periodSeconds`        | How often to perform the probe (ingest nodes pod)                                                                        | `10`            |
-| `ingest.livenessProbe.timeoutSeconds`       | When the probe times out (ingest nodes pod)                                                                              | `5`             |
-| `ingest.livenessProbe.failureThreshold`     | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`             |
-| `ingest.livenessProbe.successThreshold`     | Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)           | `1`             |
-| `ingest.readinessProbe.enabled`             | Enable/disable the readiness probe (ingest nodes pod)                                                                    | `true`          |
-| `ingest.readinessProbe.initialDelaySeconds` | Delay before readiness probe is initiated (ingest nodes pod)                                                             | `90`            |
-| `ingest.readinessProbe.periodSeconds`       | How often to perform the probe (ingest nodes pod)                                                                        | `10`            |
-| `ingest.readinessProbe.timeoutSeconds`      | When the probe times out (ingest nodes pod)                                                                              | `5`             |
-| `ingest.readinessProbe.failureThreshold`    | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`             |
-| `ingest.readinessProbe.successThreshold`    | Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)           | `1`             |
-| `ingest.customStartupProbe`                 | Override default startup probe                                                                                           | `{}`            |
-| `ingest.customLivenessProbe`                | Override default liveness probe                                                                                          | `{}`            |
-| `ingest.customReadinessProbe`               | Override default readiness probe                                                                                         | `{}`            |
-| `ingest.initContainers`                     | Extra init containers to add to the Elasticsearch ingest pod(s)                                                          | `[]`            |
-| `ingest.sidecars`                           | Extra sidecar containers to add to the Elasticsearch ingest pod(s)                                                       | `[]`            |
-| `ingest.service.type`                       | Kubernetes Service type (ingest nodes)                                                                                   | `ClusterIP`     |
-| `ingest.service.port`                       | Kubernetes Service port Elasticsearch transport port (ingest nodes)                                                      | `9300`          |
-| `ingest.service.nodePort`                   | Kubernetes Service nodePort (ingest nodes)                                                                               | `""`            |
-| `ingest.service.annotations`                | Annotations for ingest nodes service                                                                                     | `{}`            |
-| `ingest.service.loadBalancerIP`             | loadBalancerIP if ingest nodes service type is `LoadBalancer`                                                            | `""`            |
-| `ingest.serviceAccount.create`              | Create a default serviceaccount for elasticsearch curator                                                                | `false`         |
-| `ingest.serviceAccount.name`                | Name of the created serviceAccount                                                                                       | `""`            |
-
-
-### Curator parameters
-
-| Name                                         | Description                                                                                                                                 | Value                           |
-| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------- |
-| `curator.enabled`                            | Enable Elasticsearch Curator cron job                                                                                                       | `false`                         |
-| `curator.name`                               | Elasticsearch Curator pod name                                                                                                              | `curator`                       |
-| `curator.image.registry`                     | Elasticsearch Curator image registry                                                                                                        | `docker.io`                     |
-| `curator.image.repository`                   | Elasticsearch Curator image repository                                                                                                      | `bitnami/elasticsearch-curator` |
-| `curator.image.tag`                          | Elasticsearch Curator image tag                                                                                                             | `5.8.4-debian-10-r242`          |
-| `curator.image.pullPolicy`                   | Elasticsearch Curator image pull policy                                                                                                     | `IfNotPresent`                  |
-| `curator.image.pullSecrets`                  | Elasticsearch Curator image pull secrets                                                                                                    | `[]`                            |
-| `curator.cronjob.schedule`                   | Schedule for the CronJob                                                                                                                    | `0 1 * * *`                     |
-| `curator.cronjob.annotations`                | Annotations to add to the cronjob                                                                                                           | `{}`                            |
-| `curator.cronjob.concurrencyPolicy`          | `Allow,Forbid,Replace` concurrent jobs                                                                                                      | `""`                            |
-| `curator.cronjob.failedJobsHistoryLimit`     | Specify the number of failed Jobs to keep                                                                                                   | `""`                            |
-| `curator.cronjob.successfulJobsHistoryLimit` | Specify the number of completed Jobs to keep                                                                                                | `""`                            |
-| `curator.cronjob.jobRestartPolicy`           | Control the Job restartPolicy                                                                                                               | `Never`                         |
-| `curator.schedulerName`                      | Name of the k8s scheduler (other than default)                                                                                              | `""`                            |
-| `curator.podAnnotations`                     | Annotations to add to the pod                                                                                                               | `{}`                            |
-| `curator.podLabels`                          | Extra labels to add to Pod                                                                                                                  | `{}`                            |
-| `curator.podAffinityPreset`                  | Curator Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                 | `""`                            |
-| `curator.podAntiAffinityPreset`              | Curator Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                            | `""`                            |
-| `curator.nodeAffinityPreset.type`            | Curator Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                           | `""`                            |
-| `curator.nodeAffinityPreset.key`             | Curator Node label key to match Ignored if `affinity` is set.                                                                               | `""`                            |
-| `curator.nodeAffinityPreset.values`          | Curator Node label values to match. Ignored if `affinity` is set.                                                                           | `[]`                            |
-| `curator.initContainers`                     | Extra init containers to add to the Elasticsearch coordinating-only pod(s)                                                                  | `[]`                            |
-| `curator.sidecars`                           | Extra sidecar containers to add to the Elasticsearch ingest pod(s)                                                                          | `[]`                            |
-| `curator.affinity`                           | Curator Affinity for pod assignment                                                                                                         | `{}`                            |
-| `curator.nodeSelector`                       | Curator Node labels for pod assignment                                                                                                      | `{}`                            |
-| `curator.tolerations`                        | Curator Tolerations for pod assignment                                                                                                      | `[]`                            |
-| `curator.topologySpreadConstraints`          | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                    | `[]`                            |
-| `curator.rbac.enabled`                       | Enable RBAC resources                                                                                                                       | `false`                         |
-| `curator.serviceAccount.create`              | Create a default serviceaccount for elasticsearch curator                                                                                   | `true`                          |
-| `curator.serviceAccount.name`                | Name for elasticsearch curator serviceaccount                                                                                               | `""`                            |
-| `curator.psp.create`                         | Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later | `false`                         |
-| `curator.hooks`                              | Whether to run job on selected hooks                                                                                                        | `{}`                            |
-| `curator.dryrun`                             | Run Curator in dry-run mode                                                                                                                 | `false`                         |
-| `curator.command`                            | Command to execute                                                                                                                          | `["curator"]`                   |
-| `curator.env`                                | Environment variables to add to the cronjob container                                                                                       | `{}`                            |
-| `curator.configMaps.action_file_yml`         | Contents of the Curator action_file.yml                                                                                                     | `""`                            |
-| `curator.configMaps.config_yml`              | Contents of the Curator config.yml (overrides config)                                                                                       | `""`                            |
-| `curator.resources.limits`                   | The resources limits for the container                                                                                                      | `{}`                            |
-| `curator.resources.requests`                 | The requested resources for the container                                                                                                   | `{}`                            |
-| `curator.priorityClassName`                  | Curator Pods Priority Class Name                                                                                                            | `""`                            |
-| `curator.extraVolumes`                       | Extra volumes                                                                                                                               | `[]`                            |
-| `curator.extraVolumeMounts`                  | Mount extra volume(s)                                                                                                                       | `[]`                            |
-| `curator.extraInitContainers`                | DEPRECATED. Use `curator.initContainers` instead. Init containers to add to the cronjob container                                           | `[]`                            |
+| `security.tls.secretKeystoreKey`           | Name of the secret key containing the Keystore password                                                                                             | `""`                           |
+| `security.tls.secretTruststoreKey`         | Name of the secret key containing the Truststore password                                                                                           | `""`                           |
+| `security.tls.secretKey`                   | Name of the secret key containing the PEM key password                                                                                              | `""`                           |
+
+
+### Traffic Exposure Parameters
+
+| Name                               | Description                                                                                                                      | Value                    |
+| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------ |
+| `service.type`                     | Elasticsearch service type                                                                                                       | `ClusterIP`              |
+| `service.ports.restAPI`            | Elasticsearch service REST API port                                                                                              | `9200`                   |
+| `service.ports.transport`          | Elasticsearch service transport port                                                                                             | `9300`                   |
+| `service.nodePorts.restAPI`        | Node port for REST API                                                                                                           | `""`                     |
+| `service.nodePorts.transport`      | Node port for REST API                                                                                                           | `""`                     |
+| `service.clusterIP`                | Elasticsearch service Cluster IP                                                                                                 | `""`                     |
+| `service.loadBalancerIP`           | Elasticsearch service Load Balancer IP                                                                                           | `""`                     |
+| `service.loadBalancerSourceRanges` | Elasticsearch service Load Balancer sources                                                                                      | `[]`                     |
+| `service.externalTrafficPolicy`    | Elasticsearch service external traffic policy                                                                                    | `Cluster`                |
+| `service.annotations`              | Additional custom annotations for Elasticsearch service                                                                          | `{}`                     |
+| `service.extraPorts`               | Extra ports to expose in Elasticsearch service (normally used with the `sidecars` value)                                         | `[]`                     |
+| `service.sessionAffinity`          | Session Affinity for Kubernetes service, can be "None" or "ClientIP"                                                             | `None`                   |
+| `service.sessionAffinityConfig`    | Additional settings for the sessionAffinity                                                                                      | `{}`                     |
+| `ingress.enabled`                  | Enable ingress record generation for Elasticsearch                                                                               | `false`                  |
+| `ingress.pathType`                 | Ingress path type                                                                                                                | `ImplementationSpecific` |
+| `ingress.apiVersion`               | Force Ingress API version (automatically detected if not set)                                                                    | `""`                     |
+| `ingress.hostname`                 | Default host for the ingress record                                                                                              | `elasticsearch.local`    |
+| `ingress.path`                     | Default path for the ingress record                                                                                              | `/`                      |
+| `ingress.annotations`              | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                     |
+| `ingress.tls`                      | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `false`                  |
+| `ingress.selfSigned`               | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`                  |
+| `ingress.ingressClassName`         | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`                     |
+| `ingress.extraRules`               | An array with additional ingress rules, evaluated as a template.                                                                 | `[]`                     |
+| `ingress.extraHosts`               | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`                     |
+| `ingress.extraPaths`               | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`                     |
+| `ingress.extraTls`                 | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`                     |
+| `ingress.secrets`                  | Custom TLS certificates as secrets                                                                                               | `[]`                     |
+
+
+### Master-elegible nodes parameters
+
+| Name                                                 | Description                                                                                                                                        | Value               |
+| ---------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- |
+| `master.masterOnly`                                  | Deploy the Elasticsearch master-elegible nodes as master-only nodes. Recommended for high-demand deployments.                                      | `true`              |
+| `master.replicaCount`                                | Number of master-elegible replicas to deploy                                                                                                       | `2`                 |
+| `master.nameOverride`                                | String to partially override elasticsearch.master.fullname                                                                                         | `""`                |
+| `master.fullnameOverride`                            | String to fully override elasticsearch.master.fullname                                                                                             | `""`                |
+| `master.updateStrategy.type`                         | Master-elegible nodes statefulset stategy type                                                                                                     | `RollingUpdate`     |
+| `master.resources.limits`                            | The resources limits for the master-elegible containers                                                                                            | `{}`                |
+| `master.resources.requests`                          | The requested resources for the master-elegible containers                                                                                         | `{}`                |
+| `master.heapSize`                                    | Elasticsearch master-eligible node heap size.                                                                                                      | `128m`              |
+| `master.podSecurityContext.enabled`                  | Enabled master-elegible pods' Security Context                                                                                                     | `true`              |
+| `master.podSecurityContext.fsGroup`                  | Set master-elegible pod's Security Context fsGroup                                                                                                 | `1001`              |
+| `master.containerSecurityContext.enabled`            | Enabled master-elegible containers' Security Context                                                                                               | `true`              |
+| `master.containerSecurityContext.runAsUser`          | Set master-elegible containers' Security Context runAsUser                                                                                         | `1001`              |
+| `master.containerSecurityContext.runAsNonRoot`       | Set master-elegible containers' Security Context runAsNonRoot                                                                                      | `true`              |
+| `master.hostAliases`                                 | master-elegible pods host aliases                                                                                                                  | `[]`                |
+| `master.podLabels`                                   | Extra labels for master-elegible pods                                                                                                              | `{}`                |
+| `master.podAnnotations`                              | Annotations for master-elegible pods                                                                                                               | `{}`                |
+| `master.podAffinityPreset`                           | Pod affinity preset. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`                                                         | `""`                |
+| `master.podAntiAffinityPreset`                       | Pod anti-affinity preset. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`                                                    | `""`                |
+| `master.nodeAffinityPreset.type`                     | Node affinity preset type. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`                                                   | `""`                |
+| `master.nodeAffinityPreset.key`                      | Node label key to match. Ignored if `master.affinity` is set                                                                                       | `""`                |
+| `master.nodeAffinityPreset.values`                   | Node label values to match. Ignored if `master.affinity` is set                                                                                    | `[]`                |
+| `master.affinity`                                    | Affinity for master-elegible pods assignment                                                                                                       | `{}`                |
+| `master.nodeSelector`                                | Node labels for master-elegible pods assignment                                                                                                    | `{}`                |
+| `master.tolerations`                                 | Tolerations for master-elegible pods assignment                                                                                                    | `[]`                |
+| `master.priorityClassName`                           | master-elegible pods' priorityClassName                                                                                                            | `""`                |
+| `master.schedulerName`                               | Name of the k8s scheduler (other than default) for master-elegible pods                                                                            | `""`                |
+| `master.terminationGracePeriodSeconds`               | In seconds, time the given to the Elasticsearch Master pod needs to terminate gracefully                                                           | `""`                |
+| `master.topologySpreadConstraints`                   | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                           | `[]`                |
+| `master.podManagementPolicy`                         | podManagementPolicy to manage scaling operation of Elasticsearch master pods                                                                       | `Parallel`          |
+| `master.startupProbe.enabled`                        | Enable/disable the startup probe (master nodes pod)                                                                                                | `false`             |
+| `master.startupProbe.initialDelaySeconds`            | Delay before startup probe is initiated (master nodes pod)                                                                                         | `90`                |
+| `master.startupProbe.periodSeconds`                  | How often to perform the probe (master nodes pod)                                                                                                  | `10`                |
+| `master.startupProbe.timeoutSeconds`                 | When the probe times out (master nodes pod)                                                                                                        | `5`                 |
+| `master.startupProbe.successThreshold`               | Minimum consecutive successes for the probe to be considered successful after having failed (master nodes pod)                                     | `1`                 |
+| `master.startupProbe.failureThreshold`               | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                          | `5`                 |
+| `master.livenessProbe.enabled`                       | Enable/disable the liveness probe (master-eligible nodes pod)                                                                                      | `true`              |
+| `master.livenessProbe.initialDelaySeconds`           | Delay before liveness probe is initiated (master-eligible nodes pod)                                                                               | `90`                |
+| `master.livenessProbe.periodSeconds`                 | How often to perform the probe (master-eligible nodes pod)                                                                                         | `10`                |
+| `master.livenessProbe.timeoutSeconds`                | When the probe times out (master-eligible nodes pod)                                                                                               | `5`                 |
+| `master.livenessProbe.successThreshold`              | Minimum consecutive successes for the probe to be considered successful after having failed (master-eligible nodes pod)                            | `1`                 |
+| `master.livenessProbe.failureThreshold`              | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                          | `5`                 |
+| `master.readinessProbe.enabled`                      | Enable/disable the readiness probe (master-eligible nodes pod)                                                                                     | `true`              |
+| `master.readinessProbe.initialDelaySeconds`          | Delay before readiness probe is initiated (master-eligible nodes pod)                                                                              | `90`                |
+| `master.readinessProbe.periodSeconds`                | How often to perform the probe (master-eligible nodes pod)                                                                                         | `10`                |
+| `master.readinessProbe.timeoutSeconds`               | When the probe times out (master-eligible nodes pod)                                                                                               | `5`                 |
+| `master.readinessProbe.successThreshold`             | Minimum consecutive successes for the probe to be considered successful after having failed (master-eligible nodes pod)                            | `1`                 |
+| `master.readinessProbe.failureThreshold`             | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                          | `5`                 |
+| `master.customStartupProbe`                          | Override default startup probe                                                                                                                     | `{}`                |
+| `master.customLivenessProbe`                         | Override default liveness probe                                                                                                                    | `{}`                |
+| `master.customReadinessProbe`                        | Override default readiness probe                                                                                                                   | `{}`                |
+| `master.command`                                     | Override default container command (useful when using custom images)                                                                               | `[]`                |
+| `master.args`                                        | Override default container args (useful when using custom images)                                                                                  | `[]`                |
+| `master.lifecycleHooks`                              | for the master-elegible container(s) to automate configuration before or after startup                                                             | `{}`                |
+| `master.extraEnvVars`                                | Array with extra environment variables to add to master-elegible nodes                                                                             | `[]`                |
+| `master.extraEnvVarsCM`                              | Name of existing ConfigMap containing extra env vars for master-elegible nodes                                                                     | `""`                |
+| `master.extraEnvVarsSecret`                          | Name of existing Secret containing extra env vars for master-elegible nodes                                                                        | `""`                |
+| `master.extraVolumes`                                | Optionally specify extra list of additional volumes for the master-elegible pod(s)                                                                 | `[]`                |
+| `master.extraVolumeMounts`                           | Optionally specify extra list of additional volumeMounts for the master-elegible container(s)                                                      | `[]`                |
+| `master.sidecars`                                    | Add additional sidecar containers to the master-elegible pod(s)                                                                                    | `[]`                |
+| `master.initContainers`                              | Add additional init containers to the master-elegible pod(s)                                                                                       | `[]`                |
+| `master.persistence.enabled`                         | Enable persistence using a `PersistentVolumeClaim`                                                                                                 | `true`              |
+| `master.persistence.storageClass`                    | Persistent Volume Storage Class                                                                                                                    | `""`                |
+| `master.persistence.existingClaim`                   | Existing Persistent Volume Claim                                                                                                                   | `""`                |
+| `master.persistence.existingVolume`                  | Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `master.persistence.selector` is set. | `""`                |
+| `master.persistence.selector`                        | Configure custom selector for existing Persistent Volume. Overwrites `master.persistence.existingVolume`                                           | `{}`                |
+| `master.persistence.annotations`                     | Persistent Volume Claim annotations                                                                                                                | `{}`                |
+| `master.persistence.accessModes`                     | Persistent Volume Access Modes                                                                                                                     | `["ReadWriteOnce"]` |
+| `master.persistence.size`                            | Persistent Volume Size                                                                                                                             | `8Gi`               |
+| `master.serviceAccount.create`                       | Specifies whether a ServiceAccount should be created                                                                                               | `false`             |
+| `master.serviceAccount.name`                         | Name of the service account to use. If not set and create is true, a name is generated using the fullname template.                                | `""`                |
+| `master.serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account                                                                                     | `true`              |
+| `master.serviceAccount.annotations`                  | Annotations for service account. Evaluated as a template. Only used if `create` is `true`.                                                         | `{}`                |
+| `master.autoscaling.enabled`                         | Whether enable horizontal pod autoscale                                                                                                            | `false`             |
+| `master.autoscaling.minReplicas`                     | Configure a minimum amount of pods                                                                                                                 | `3`                 |
+| `master.autoscaling.maxReplicas`                     | Configure a maximum amount of pods                                                                                                                 | `11`                |
+| `master.autoscaling.targetCPU`                       | Define the CPU target to trigger the scaling actions (utilization percentage)                                                                      | `""`                |
+| `master.autoscaling.targetMemory`                    | Define the memory target to trigger the scaling actions (utilization percentage)                                                                   | `""`                |
+
+
+### Data-only nodes parameters
+
+| Name                                               | Description                                                                                                                                      | Value               |
+| -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------- |
+| `data.replicaCount`                                | Number of data-only replicas to deploy                                                                                                           | `2`                 |
+| `data.nameOverride`                                | String to partially override elasticsearch.data.fullname                                                                                         | `""`                |
+| `data.fullnameOverride`                            | String to fully override elasticsearch.data.fullname                                                                                             | `""`                |
+| `data.updateStrategy.type`                         | Data-only nodes statefulset stategy type                                                                                                         | `RollingUpdate`     |
+| `data.resources.limits`                            | The resources limits for the data containers                                                                                                     | `{}`                |
+| `data.resources.requests`                          | The requested resources for the data containers                                                                                                  | `{}`                |
+| `data.heapSize`                                    | Elasticsearch data node heap size.                                                                                                               | `1024m`             |
+| `data.podSecurityContext.enabled`                  | Enabled data pods' Security Context                                                                                                              | `true`              |
+| `data.podSecurityContext.fsGroup`                  | Set data pod's Security Context fsGroup                                                                                                          | `1001`              |
+| `data.containerSecurityContext.enabled`            | Enabled data containers' Security Context                                                                                                        | `true`              |
+| `data.containerSecurityContext.runAsUser`          | Set data containers' Security Context runAsUser                                                                                                  | `1001`              |
+| `data.containerSecurityContext.runAsNonRoot`       | Set data containers' Security Context runAsNonRoot                                                                                               | `true`              |
+| `data.hostAliases`                                 | data pods host aliases                                                                                                                           | `[]`                |
+| `data.podLabels`                                   | Extra labels for data pods                                                                                                                       | `{}`                |
+| `data.podAnnotations`                              | Annotations for data pods                                                                                                                        | `{}`                |
+| `data.podAffinityPreset`                           | Pod affinity preset. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`                                                         | `""`                |
+| `data.podAntiAffinityPreset`                       | Pod anti-affinity preset. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`                                                    | `""`                |
+| `data.nodeAffinityPreset.type`                     | Node affinity preset type. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`                                                   | `""`                |
+| `data.nodeAffinityPreset.key`                      | Node label key to match. Ignored if `data.affinity` is set                                                                                       | `""`                |
+| `data.nodeAffinityPreset.values`                   | Node label values to match. Ignored if `data.affinity` is set                                                                                    | `[]`                |
+| `data.affinity`                                    | Affinity for data pods assignment                                                                                                                | `{}`                |
+| `data.nodeSelector`                                | Node labels for data pods assignment                                                                                                             | `{}`                |
+| `data.tolerations`                                 | Tolerations for data pods assignment                                                                                                             | `[]`                |
+| `data.priorityClassName`                           | data pods' priorityClassName                                                                                                                     | `""`                |
+| `data.schedulerName`                               | Name of the k8s scheduler (other than default) for data pods                                                                                     | `""`                |
+| `data.terminationGracePeriodSeconds`               | In seconds, time the given to the Elasticsearch data pod needs to terminate gracefully                                                           | `""`                |
+| `data.topologySpreadConstraints`                   | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                         | `[]`                |
+| `data.podManagementPolicy`                         | podManagementPolicy to manage scaling operation of Elasticsearch data pods                                                                       | `Parallel`          |
+| `data.startupProbe.enabled`                        | Enable/disable the startup probe (data nodes pod)                                                                                                | `false`             |
+| `data.startupProbe.initialDelaySeconds`            | Delay before startup probe is initiated (data nodes pod)                                                                                         | `90`                |
+| `data.startupProbe.periodSeconds`                  | How often to perform the probe (data nodes pod)                                                                                                  | `10`                |
+| `data.startupProbe.timeoutSeconds`                 | When the probe times out (data nodes pod)                                                                                                        | `5`                 |
+| `data.startupProbe.successThreshold`               | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                     | `1`                 |
+| `data.startupProbe.failureThreshold`               | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                        | `5`                 |
+| `data.livenessProbe.enabled`                       | Enable/disable the liveness probe (data nodes pod)                                                                                               | `true`              |
+| `data.livenessProbe.initialDelaySeconds`           | Delay before liveness probe is initiated (data nodes pod)                                                                                        | `90`                |
+| `data.livenessProbe.periodSeconds`                 | How often to perform the probe (data nodes pod)                                                                                                  | `10`                |
+| `data.livenessProbe.timeoutSeconds`                | When the probe times out (data nodes pod)                                                                                                        | `5`                 |
+| `data.livenessProbe.successThreshold`              | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                     | `1`                 |
+| `data.livenessProbe.failureThreshold`              | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                        | `5`                 |
+| `data.readinessProbe.enabled`                      | Enable/disable the readiness probe (data nodes pod)                                                                                              | `true`              |
+| `data.readinessProbe.initialDelaySeconds`          | Delay before readiness probe is initiated (data nodes pod)                                                                                       | `90`                |
+| `data.readinessProbe.periodSeconds`                | How often to perform the probe (data nodes pod)                                                                                                  | `10`                |
+| `data.readinessProbe.timeoutSeconds`               | When the probe times out (data nodes pod)                                                                                                        | `5`                 |
+| `data.readinessProbe.successThreshold`             | Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)                                     | `1`                 |
+| `data.readinessProbe.failureThreshold`             | Minimum consecutive failures for the probe to be considered failed after having succeeded                                                        | `5`                 |
+| `data.customStartupProbe`                          | Override default startup probe                                                                                                                   | `{}`                |
+| `data.customLivenessProbe`                         | Override default liveness probe                                                                                                                  | `{}`                |
+| `data.customReadinessProbe`                        | Override default readiness probe                                                                                                                 | `{}`                |
+| `data.command`                                     | Override default container command (useful when using custom images)                                                                             | `[]`                |
+| `data.args`                                        | Override default container args (useful when using custom images)                                                                                | `[]`                |
+| `data.lifecycleHooks`                              | for the data container(s) to automate configuration before or after startup                                                                      | `{}`                |
+| `data.extraEnvVars`                                | Array with extra environment variables to add to data nodes                                                                                      | `[]`                |
+| `data.extraEnvVarsCM`                              | Name of existing ConfigMap containing extra env vars for data nodes                                                                              | `""`                |
+| `data.extraEnvVarsSecret`                          | Name of existing Secret containing extra env vars for data nodes                                                                                 | `""`                |
+| `data.extraVolumes`                                | Optionally specify extra list of additional volumes for the data pod(s)                                                                          | `[]`                |
+| `data.extraVolumeMounts`                           | Optionally specify extra list of additional volumeMounts for the data container(s)                                                               | `[]`                |
+| `data.sidecars`                                    | Add additional sidecar containers to the data pod(s)                                                                                             | `[]`                |
+| `data.initContainers`                              | Add additional init containers to the data pod(s)                                                                                                | `[]`                |
+| `data.persistence.enabled`                         | Enable persistence using a `PersistentVolumeClaim`                                                                                               | `true`              |
+| `data.persistence.storageClass`                    | Persistent Volume Storage Class                                                                                                                  | `""`                |
+| `data.persistence.existingClaim`                   | Existing Persistent Volume Claim                                                                                                                 | `""`                |
+| `data.persistence.existingVolume`                  | Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `data.persistence.selector` is set. | `""`                |
+| `data.persistence.selector`                        | Configure custom selector for existing Persistent Volume. Overwrites `data.persistence.existingVolume`                                           | `{}`                |
+| `data.persistence.annotations`                     | Persistent Volume Claim annotations                                                                                                              | `{}`                |
+| `data.persistence.accessModes`                     | Persistent Volume Access Modes                                                                                                                   | `["ReadWriteOnce"]` |
+| `data.persistence.size`                            | Persistent Volume Size                                                                                                                           | `8Gi`               |
+| `data.serviceAccount.create`                       | Specifies whether a ServiceAccount should be created                                                                                             | `false`             |
+| `data.serviceAccount.name`                         | Name of the service account to use. If not set and create is true, a name is generated using the fullname template.                              | `""`                |
+| `data.serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account                                                                                   | `true`              |
+| `data.serviceAccount.annotations`                  | Annotations for service account. Evaluated as a template. Only used if `create` is `true`.                                                       | `{}`                |
+| `data.autoscaling.enabled`                         | Whether enable horizontal pod autoscale                                                                                                          | `false`             |
+| `data.autoscaling.minReplicas`                     | Configure a minimum amount of pods                                                                                                               | `3`                 |
+| `data.autoscaling.maxReplicas`                     | Configure a maximum amount of pods                                                                                                               | `11`                |
+| `data.autoscaling.targetCPU`                       | Define the CPU target to trigger the scaling actions (utilization percentage)                                                                    | `""`                |
+| `data.autoscaling.targetMemory`                    | Define the memory target to trigger the scaling actions (utilization percentage)                                                                 | `""`                |
+
+
+### Coordinating-only nodes parameters
+
+| Name                                                       | Description                                                                                                               | Value           |
+| ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | --------------- |
+| `coordinating.replicaCount`                                | Number of coordinating-only replicas to deploy                                                                            | `2`             |
+| `coordinating.nameOverride`                                | String to partially override elasticsearch.coordinating.fullname                                                          | `""`            |
+| `coordinating.fullnameOverride`                            | String to fully override elasticsearch.coordinating.fullname                                                              | `""`            |
+| `coordinating.updateStrategy.type`                         | Coordinating-only nodes statefulset stategy type                                                                          | `RollingUpdate` |
+| `coordinating.resources.limits`                            | The resources limits for the coordinating-only containers                                                                 | `{}`            |
+| `coordinating.resources.requests`                          | The requested resources for the coordinating-only containers                                                              | `{}`            |
+| `coordinating.heapSize`                                    | Elasticsearch coordinating node heap size.                                                                                | `128m`          |
+| `coordinating.podSecurityContext.enabled`                  | Enabled coordinating-only pods' Security Context                                                                          | `true`          |
+| `coordinating.podSecurityContext.fsGroup`                  | Set coordinating-only pod's Security Context fsGroup                                                                      | `1001`          |
+| `coordinating.containerSecurityContext.enabled`            | Enabled coordinating-only containers' Security Context                                                                    | `true`          |
+| `coordinating.containerSecurityContext.runAsUser`          | Set coordinating-only containers' Security Context runAsUser                                                              | `1001`          |
+| `coordinating.containerSecurityContext.runAsNonRoot`       | Set coordinating-only containers' Security Context runAsNonRoot                                                           | `true`          |
+| `coordinating.hostAliases`                                 | coordinating-only pods host aliases                                                                                       | `[]`            |
+| `coordinating.podLabels`                                   | Extra labels for coordinating-only pods                                                                                   | `{}`            |
+| `coordinating.podAnnotations`                              | Annotations for coordinating-only pods                                                                                    | `{}`            |
+| `coordinating.podAffinityPreset`                           | Pod affinity preset. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`                          | `""`            |
+| `coordinating.podAntiAffinityPreset`                       | Pod anti-affinity preset. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`                     | `""`            |
+| `coordinating.nodeAffinityPreset.type`                     | Node affinity preset type. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`                    | `""`            |
+| `coordinating.nodeAffinityPreset.key`                      | Node label key to match. Ignored if `coordinating.affinity` is set                                                        | `""`            |
+| `coordinating.nodeAffinityPreset.values`                   | Node label values to match. Ignored if `coordinating.affinity` is set                                                     | `[]`            |
+| `coordinating.affinity`                                    | Affinity for coordinating-only pods assignment                                                                            | `{}`            |
+| `coordinating.nodeSelector`                                | Node labels for coordinating-only pods assignment                                                                         | `{}`            |
+| `coordinating.tolerations`                                 | Tolerations for coordinating-only pods assignment                                                                         | `[]`            |
+| `coordinating.priorityClassName`                           | coordinating-only pods' priorityClassName                                                                                 | `""`            |
+| `coordinating.schedulerName`                               | Name of the k8s scheduler (other than default) for coordinating-only pods                                                 | `""`            |
+| `coordinating.terminationGracePeriodSeconds`               | In seconds, time the given to the Elasticsearch coordinating pod needs to terminate gracefully                            | `""`            |
+| `coordinating.topologySpreadConstraints`                   | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template  | `[]`            |
+| `coordinating.podManagementPolicy`                         | podManagementPolicy to manage scaling operation of Elasticsearch coordinating pods                                        | `Parallel`      |
+| `coordinating.startupProbe.enabled`                        | Enable/disable the startup probe (coordinating-only nodes pod)                                                            | `false`         |
+| `coordinating.startupProbe.initialDelaySeconds`            | Delay before startup probe is initiated (coordinating-only nodes pod)                                                     | `90`            |
+| `coordinating.startupProbe.periodSeconds`                  | How often to perform the probe (coordinating-only nodes pod)                                                              | `10`            |
+| `coordinating.startupProbe.timeoutSeconds`                 | When the probe times out (coordinating-only nodes pod)                                                                    | `5`             |
+| `coordinating.startupProbe.successThreshold`               | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod) | `1`             |
+| `coordinating.startupProbe.failureThreshold`               | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
+| `coordinating.livenessProbe.enabled`                       | Enable/disable the liveness probe (coordinating-only nodes pod)                                                           | `true`          |
+| `coordinating.livenessProbe.initialDelaySeconds`           | Delay before liveness probe is initiated (coordinating-only nodes pod)                                                    | `90`            |
+| `coordinating.livenessProbe.periodSeconds`                 | How often to perform the probe (coordinating-only nodes pod)                                                              | `10`            |
+| `coordinating.livenessProbe.timeoutSeconds`                | When the probe times out (coordinating-only nodes pod)                                                                    | `5`             |
+| `coordinating.livenessProbe.successThreshold`              | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod) | `1`             |
+| `coordinating.livenessProbe.failureThreshold`              | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
+| `coordinating.readinessProbe.enabled`                      | Enable/disable the readiness probe (coordinating-only nodes pod)                                                          | `true`          |
+| `coordinating.readinessProbe.initialDelaySeconds`          | Delay before readiness probe is initiated (coordinating-only nodes pod)                                                   | `90`            |
+| `coordinating.readinessProbe.periodSeconds`                | How often to perform the probe (coordinating-only nodes pod)                                                              | `10`            |
+| `coordinating.readinessProbe.timeoutSeconds`               | When the probe times out (coordinating-only nodes pod)                                                                    | `5`             |
+| `coordinating.readinessProbe.successThreshold`             | Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod) | `1`             |
+| `coordinating.readinessProbe.failureThreshold`             | Minimum consecutive failures for the probe to be considered failed after having succeeded                                 | `5`             |
+| `coordinating.customStartupProbe`                          | Override default startup probe                                                                                            | `{}`            |
+| `coordinating.customLivenessProbe`                         | Override default liveness probe                                                                                           | `{}`            |
+| `coordinating.customReadinessProbe`                        | Override default readiness probe                                                                                          | `{}`            |
+| `coordinating.command`                                     | Override default container command (useful when using custom images)                                                      | `[]`            |
+| `coordinating.args`                                        | Override default container args (useful when using custom images)                                                         | `[]`            |
+| `coordinating.lifecycleHooks`                              | for the coordinating-only container(s) to automate configuration before or after startup                                  | `{}`            |
+| `coordinating.extraEnvVars`                                | Array with extra environment variables to add to coordinating-only nodes                                                  | `[]`            |
+| `coordinating.extraEnvVarsCM`                              | Name of existing ConfigMap containing extra env vars for coordinating-only nodes                                          | `""`            |
+| `coordinating.extraEnvVarsSecret`                          | Name of existing Secret containing extra env vars for coordinating-only nodes                                             | `""`            |
+| `coordinating.extraVolumes`                                | Optionally specify extra list of additional volumes for the coordinating-only pod(s)                                      | `[]`            |
+| `coordinating.extraVolumeMounts`                           | Optionally specify extra list of additional volumeMounts for the coordinating-only container(s)                           | `[]`            |
+| `coordinating.sidecars`                                    | Add additional sidecar containers to the coordinating-only pod(s)                                                         | `[]`            |
+| `coordinating.initContainers`                              | Add additional init containers to the coordinating-only pod(s)                                                            | `[]`            |
+| `coordinating.serviceAccount.create`                       | Specifies whether a ServiceAccount should be created                                                                      | `false`         |
+| `coordinating.serviceAccount.name`                         | Name of the service account to use. If not set and create is true, a name is generated using the fullname template.       | `""`            |
+| `coordinating.serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account                                                            | `true`          |
+| `coordinating.serviceAccount.annotations`                  | Annotations for service account. Evaluated as a template. Only used if `create` is `true`.                                | `{}`            |
+| `coordinating.autoscaling.enabled`                         | Whether enable horizontal pod autoscale                                                                                   | `false`         |
+| `coordinating.autoscaling.minReplicas`                     | Configure a minimum amount of pods                                                                                        | `3`             |
+| `coordinating.autoscaling.maxReplicas`                     | Configure a maximum amount of pods                                                                                        | `11`            |
+| `coordinating.autoscaling.targetCPU`                       | Define the CPU target to trigger the scaling actions (utilization percentage)                                             | `""`            |
+| `coordinating.autoscaling.targetMemory`                    | Define the memory target to trigger the scaling actions (utilization percentage)                                          | `""`            |
+
+
+### Ingest-only nodes parameters
+
+| Name                                                 | Description                                                                                                                      | Value                        |
+| ---------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------- |
+| `ingest.replicaCount`                                | Number of ingest-only replicas to deploy                                                                                         | `2`                          |
+| `ingest.nameOverride`                                | String to partially override elasticsearch.ingest.fullname                                                                       | `""`                         |
+| `ingest.fullnameOverride`                            | String to fully override elasticsearch.ingest.fullname                                                                           | `""`                         |
+| `ingest.containerPorts.restAPI`                      | Elasticsearch REST API port                                                                                                      | `9200`                       |
+| `ingest.containerPorts.transport`                    | Elasticsearch Transport port                                                                                                     | `9300`                       |
+| `ingest.updateStrategy.type`                         | Ingest-only nodes statefulset stategy type                                                                                       | `RollingUpdate`              |
+| `ingest.resources.limits`                            | The resources limits for the ingest-only containers                                                                              | `{}`                         |
+| `ingest.resources.requests`                          | The requested resources for the ingest-only containers                                                                           | `{}`                         |
+| `ingest.heapSize`                                    | Elasticsearch ingest-only node heap size.                                                                                        | `128m`                       |
+| `ingest.podSecurityContext.enabled`                  | Enabled ingest-only pods' Security Context                                                                                       | `true`                       |
+| `ingest.podSecurityContext.fsGroup`                  | Set ingest-only pod's Security Context fsGroup                                                                                   | `1001`                       |
+| `ingest.containerSecurityContext.enabled`            | Enabled ingest-only containers' Security Context                                                                                 | `true`                       |
+| `ingest.containerSecurityContext.runAsUser`          | Set ingest-only containers' Security Context runAsUser                                                                           | `1001`                       |
+| `ingest.containerSecurityContext.runAsNonRoot`       | Set ingest-only containers' Security Context runAsNonRoot                                                                        | `true`                       |
+| `ingest.hostAliases`                                 | ingest-only pods host aliases                                                                                                    | `[]`                         |
+| `ingest.podLabels`                                   | Extra labels for ingest-only pods                                                                                                | `{}`                         |
+| `ingest.podAnnotations`                              | Annotations for ingest-only pods                                                                                                 | `{}`                         |
+| `ingest.podAffinityPreset`                           | Pod affinity preset. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`                                       | `""`                         |
+| `ingest.podAntiAffinityPreset`                       | Pod anti-affinity preset. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`                                  | `""`                         |
+| `ingest.nodeAffinityPreset.type`                     | Node affinity preset type. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`                                 | `""`                         |
+| `ingest.nodeAffinityPreset.key`                      | Node label key to match. Ignored if `ingest.affinity` is set                                                                     | `""`                         |
+| `ingest.nodeAffinityPreset.values`                   | Node label values to match. Ignored if `ingest.affinity` is set                                                                  | `[]`                         |
+| `ingest.affinity`                                    | Affinity for ingest-only pods assignment                                                                                         | `{}`                         |
+| `ingest.nodeSelector`                                | Node labels for ingest-only pods assignment                                                                                      | `{}`                         |
+| `ingest.tolerations`                                 | Tolerations for ingest-only pods assignment                                                                                      | `[]`                         |
+| `ingest.priorityClassName`                           | ingest-only pods' priorityClassName                                                                                              | `""`                         |
+| `ingest.schedulerName`                               | Name of the k8s scheduler (other than default) for ingest-only pods                                                              | `""`                         |
+| `ingest.terminationGracePeriodSeconds`               | In seconds, time the given to the Elasticsearch ingest pod needs to terminate gracefully                                         | `""`                         |
+| `ingest.topologySpreadConstraints`                   | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template         | `[]`                         |
+| `ingest.podManagementPolicy`                         | podManagementPolicy to manage scaling operation of Elasticsearch ingest pods                                                     | `Parallel`                   |
+| `ingest.startupProbe.enabled`                        | Enable/disable the startup probe (ingest-only nodes pod)                                                                         | `false`                      |
+| `ingest.startupProbe.initialDelaySeconds`            | Delay before startup probe is initiated (ingest-only nodes pod)                                                                  | `90`                         |
+| `ingest.startupProbe.periodSeconds`                  | How often to perform the probe (ingest-only nodes pod)                                                                           | `10`                         |
+| `ingest.startupProbe.timeoutSeconds`                 | When the probe times out (ingest-only nodes pod)                                                                                 | `5`                          |
+| `ingest.startupProbe.successThreshold`               | Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)              | `1`                          |
+| `ingest.startupProbe.failureThreshold`               | Minimum consecutive failures for the probe to be considered failed after having succeeded                                        | `5`                          |
+| `ingest.livenessProbe.enabled`                       | Enable/disable the liveness probe (ingest-only nodes pod)                                                                        | `true`                       |
+| `ingest.livenessProbe.initialDelaySeconds`           | Delay before liveness probe is initiated (ingest-only nodes pod)                                                                 | `90`                         |
+| `ingest.livenessProbe.periodSeconds`                 | How often to perform the probe (ingest-only nodes pod)                                                                           | `10`                         |
+| `ingest.livenessProbe.timeoutSeconds`                | When the probe times out (ingest-only nodes pod)                                                                                 | `5`                          |
+| `ingest.livenessProbe.successThreshold`              | Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)              | `1`                          |
+| `ingest.livenessProbe.failureThreshold`              | Minimum consecutive failures for the probe to be considered failed after having succeeded                                        | `5`                          |
+| `ingest.readinessProbe.enabled`                      | Enable/disable the readiness probe (ingest-only nodes pod)                                                                       | `true`                       |
+| `ingest.readinessProbe.initialDelaySeconds`          | Delay before readiness probe is initiated (ingest-only nodes pod)                                                                | `90`                         |
+| `ingest.readinessProbe.periodSeconds`                | How often to perform the probe (ingest-only nodes pod)                                                                           | `10`                         |
+| `ingest.readinessProbe.timeoutSeconds`               | When the probe times out (ingest-only nodes pod)                                                                                 | `5`                          |
+| `ingest.readinessProbe.successThreshold`             | Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)              | `1`                          |
+| `ingest.readinessProbe.failureThreshold`             | Minimum consecutive failures for the probe to be considered failed after having succeeded                                        | `5`                          |
+| `ingest.customStartupProbe`                          | Override default startup probe                                                                                                   | `{}`                         |
+| `ingest.customLivenessProbe`                         | Override default liveness probe                                                                                                  | `{}`                         |
+| `ingest.customReadinessProbe`                        | Override default readiness probe                                                                                                 | `{}`                         |
+| `ingest.command`                                     | Override default container command (useful when using custom images)                                                             | `[]`                         |
+| `ingest.args`                                        | Override default container args (useful when using custom images)                                                                | `[]`                         |
+| `ingest.lifecycleHooks`                              | for the ingest-only container(s) to automate configuration before or after startup                                               | `{}`                         |
+| `ingest.extraEnvVars`                                | Array with extra environment variables to add to ingest-only nodes                                                               | `[]`                         |
+| `ingest.extraEnvVarsCM`                              | Name of existing ConfigMap containing extra env vars for ingest-only nodes                                                       | `""`                         |
+| `ingest.extraEnvVarsSecret`                          | Name of existing Secret containing extra env vars for ingest-only nodes                                                          | `""`                         |
+| `ingest.extraVolumes`                                | Optionally specify extra list of additional volumes for the ingest-only pod(s)                                                   | `[]`                         |
+| `ingest.extraVolumeMounts`                           | Optionally specify extra list of additional volumeMounts for the ingest-only container(s)                                        | `[]`                         |
+| `ingest.sidecars`                                    | Add additional sidecar containers to the ingest-only pod(s)                                                                      | `[]`                         |
+| `ingest.initContainers`                              | Add additional init containers to the ingest-only pod(s)                                                                         | `[]`                         |
+| `ingest.serviceAccount.create`                       | Specifies whether a ServiceAccount should be created                                                                             | `false`                      |
+| `ingest.serviceAccount.name`                         | Name of the service account to use. If not set and create is true, a name is generated using the fullname template.              | `""`                         |
+| `ingest.serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account                                                                   | `true`                       |
+| `ingest.serviceAccount.annotations`                  | Annotations for service account. Evaluated as a template. Only used if `create` is `true`.                                       | `{}`                         |
+| `ingest.autoscaling.enabled`                         | Whether enable horizontal pod autoscale                                                                                          | `false`                      |
+| `ingest.autoscaling.minReplicas`                     | Configure a minimum amount of pods                                                                                               | `3`                          |
+| `ingest.autoscaling.maxReplicas`                     | Configure a maximum amount of pods                                                                                               | `11`                         |
+| `ingest.autoscaling.targetCPU`                       | Define the CPU target to trigger the scaling actions (utilization percentage)                                                    | `""`                         |
+| `ingest.autoscaling.targetMemory`                    | Define the memory target to trigger the scaling actions (utilization percentage)                                                 | `""`                         |
+| `ingest.service.enabled`                             | Enable Ingest-only service                                                                                                       | `false`                      |
+| `ingest.service.type`                                | Elasticsearch ingest-only service type                                                                                           | `ClusterIP`                  |
+| `ingest.service.ports.restAPI`                       | Elasticsearch service REST API port                                                                                              | `9200`                       |
+| `ingest.service.ports.transport`                     | Elasticsearch service transport port                                                                                             | `9300`                       |
+| `ingest.service.nodePorts.restAPI`                   | Node port for REST API                                                                                                           | `""`                         |
+| `ingest.service.nodePorts.transport`                 | Node port for REST API                                                                                                           | `""`                         |
+| `ingest.service.clusterIP`                           | Elasticsearch ingest-only service Cluster IP                                                                                     | `""`                         |
+| `ingest.service.loadBalancerIP`                      | Elasticsearch ingest-only service Load Balancer IP                                                                               | `""`                         |
+| `ingest.service.loadBalancerSourceRanges`            | Elasticsearch ingest-only service Load Balancer sources                                                                          | `[]`                         |
+| `ingest.service.externalTrafficPolicy`               | Elasticsearch ingest-only service external traffic policy                                                                        | `Cluster`                    |
+| `ingest.service.extraPorts`                          | Extra ports to expose (normally used with the `sidecar` value)                                                                   | `[]`                         |
+| `ingest.service.annotations`                         | Additional custom annotations for Elasticsearch ingest-only service                                                              | `{}`                         |
+| `ingest.service.sessionAffinity`                     | Session Affinity for Kubernetes service, can be "None" or "ClientIP"                                                             | `None`                       |
+| `ingest.service.sessionAffinityConfig`               | Additional settings for the sessionAffinity                                                                                      | `{}`                         |
+| `ingest.ingress.enabled`                             | Enable ingress record generation for Elasticsearch                                                                               | `false`                      |
+| `ingest.ingress.pathType`                            | Ingress path type                                                                                                                | `ImplementationSpecific`     |
+| `ingest.ingress.apiVersion`                          | Force Ingress API version (automatically detected if not set)                                                                    | `""`                         |
+| `ingest.ingress.hostname`                            | Default host for the ingress record                                                                                              | `elasticsearch-ingest.local` |
+| `ingest.ingress.path`                                | Default path for the ingress record                                                                                              | `/`                          |
+| `ingest.ingress.annotations`                         | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                         |
+| `ingest.ingress.tls`                                 | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `false`                      |
+| `ingest.ingress.selfSigned`                          | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`                      |
+| `ingest.ingress.ingressClassName`                    | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`                         |
+| `ingest.ingress.extraRules`                          | An array with additional ingress rules, evaluated as a template.                                                                 | `[]`                         |
+| `ingest.ingress.extraHosts`                          | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`                         |
+| `ingest.ingress.extraPaths`                          | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`                         |
+| `ingest.ingress.extraTls`                            | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`                         |
+| `ingest.ingress.secrets`                             | Custom TLS certificates as secrets                                                                                               | `[]`                         |
+
+
+### Elasticsearch curator parameters
+
+| Name                                                  | Description                                                                                                                                 | Value                           |
+| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------- |
+| `curator.enabled`                                     | Enable Elasticsearch Curator cron job                                                                                                       | `false`                         |
+| `curator.nameOverride`                                | String to partially override elasticsearch.curator.fullname                                                                                 | `""`                            |
+| `curator.fullnameOverride`                            | String to fully override elasticsearch.curator.fullname                                                                                     | `""`                            |
+| `curator.hooks`                                       | Whether to run job on selected hooks                                                                                                        | `{}`                            |
+| `curator.dryRun`                                      | Run Curator in dry-run mode                                                                                                                 | `false`                         |
+| `curator.jobAnnotations`                              | Annotations to add to the job                                                                                                               | `{}`                            |
+| `curator.jobLabels`                                   | Annotations to add to the job                                                                                                               | `{}`                            |
+| `curator.image.registry`                              | Elasticsearch Curator image registry                                                                                                        | `docker.io`                     |
+| `curator.image.repository`                            | Elasticsearch Curator image repository                                                                                                      | `bitnami/elasticsearch-curator` |
+| `curator.image.tag`                                   | Elasticsearch Curator image tag                                                                                                             | `5.8.4-debian-10-r321`          |
+| `curator.image.pullPolicy`                            | Elasticsearch Curator image pull policy                                                                                                     | `IfNotPresent`                  |
+| `curator.image.pullSecrets`                           | Elasticsearch Curator image pull secrets                                                                                                    | `[]`                            |
+| `curator.cronjob.schedule`                            | Schedule for the CronJob                                                                                                                    | `0 1 * * *`                     |
+| `curator.cronjob.concurrencyPolicy`                   | `Allow,Forbid,Replace` concurrent jobs                                                                                                      | `""`                            |
+| `curator.cronjob.failedJobsHistoryLimit`              | Specify the number of failed Jobs to keep                                                                                                   | `""`                            |
+| `curator.cronjob.successfulJobsHistoryLimit`          | Specify the number of completed Jobs to keep                                                                                                | `""`                            |
+| `curator.cronjob.jobRestartPolicy`                    | Control the Job restartPolicy                                                                                                               | `Never`                         |
+| `curator.cronjob.cronjobAnnotations`                  | Annotations to add to the cronjob                                                                                                           | `{}`                            |
+| `curator.cronjob.cronjobLabels`                       | Annotations to add to the cronjob                                                                                                           | `{}`                            |
+| `curator.cronjob.jobAnnotations`                      | Annotations to add to the job template                                                                                                      | `{}`                            |
+| `curator.cronjob.jobLabels`                           | Annotations to add to the job template                                                                                                      | `{}`                            |
+| `curator.podSecurityContext.enabled`                  | Enabled Curator jobs' Security Context                                                                                                      | `true`                          |
+| `curator.podSecurityContext.fsGroup`                  | Set Curator pod's Security Context fsGroup                                                                                                  | `1001`                          |
+| `curator.containerSecurityContext.enabled`            | Enabled Curator containers' Security Context                                                                                                | `true`                          |
+| `curator.containerSecurityContext.runAsUser`          | Set Curator containers' Security Context runAsUser                                                                                          | `1001`                          |
+| `curator.containerSecurityContext.runAsNonRoot`       | Set Curator containers' Security Context runAsNonRoot                                                                                       | `true`                          |
+| `curator.hostAliases`                                 | Curator pods host aliases                                                                                                                   | `[]`                            |
+| `curator.podAnnotations`                              | Annotations to add to the pod                                                                                                               | `{}`                            |
+| `curator.podLabels`                                   | Extra labels to add to Pod                                                                                                                  | `{}`                            |
+| `curator.podAffinityPreset`                           | Curator Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                 | `""`                            |
+| `curator.podAntiAffinityPreset`                       | Curator Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                            | `""`                            |
+| `curator.nodeAffinityPreset.type`                     | Curator Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                           | `""`                            |
+| `curator.nodeAffinityPreset.key`                      | Curator Node label key to match Ignored if `affinity` is set.                                                                               | `""`                            |
+| `curator.nodeAffinityPreset.values`                   | Curator Node label values to match. Ignored if `affinity` is set.                                                                           | `[]`                            |
+| `curator.affinity`                                    | Curator Affinity for pod assignment                                                                                                         | `{}`                            |
+| `curator.nodeSelector`                                | Curator Node labels for pod assignment                                                                                                      | `{}`                            |
+| `curator.tolerations`                                 | Curator Tolerations for pod assignment                                                                                                      | `[]`                            |
+| `curator.topologySpreadConstraints`                   | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                    | `[]`                            |
+| `curator.priorityClassName`                           | Curator Pods Priority Class Name                                                                                                            | `""`                            |
+| `curator.schedulerName`                               | Name of the k8s scheduler (other than default)                                                                                              | `""`                            |
+| `curator.resources.limits`                            | The resources limits for the container                                                                                                      | `{}`                            |
+| `curator.resources.requests`                          | The requested resources for the container                                                                                                   | `{}`                            |
+| `curator.configMaps.action_file_yml`                  | Contents of the Curator action_file.yml. Required if curator job is enabled.                                                                | `""`                            |
+| `curator.configMaps.config_yml`                       | Contents of the Curator config.yml (overrides config)                                                                                       | `""`                            |
+| `curator.command`                                     | Override default container command (useful when using custom images)                                                                        | `[]`                            |
+| `curator.args`                                        | Override default container args (useful when using custom images)                                                                           | `[]`                            |
+| `curator.lifecycleHooks`                              | for the Curator container(s) to automate configuration before or after startup                                                              | `{}`                            |
+| `curator.extraEnvVars`                                | Array with extra environment variables to add to Curator nodes                                                                              | `[]`                            |
+| `curator.extraEnvVarsCM`                              | Name of existing ConfigMap containing extra env vars for Curator nodes                                                                      | `""`                            |
+| `curator.extraEnvVarsSecret`                          | Name of existing Secret containing extra env vars for Curator nodes                                                                         | `""`                            |
+| `curator.extraVolumes`                                | Extra volumes                                                                                                                               | `[]`                            |
+| `curator.extraVolumeMounts`                           | Mount extra volume(s)                                                                                                                       | `[]`                            |
+| `curator.initContainers`                              | Extra init containers to add to the Elasticsearch coordinating-only pod(s)                                                                  | `[]`                            |
+| `curator.sidecars`                                    | Extra sidecar containers to add to the Elasticsearch ingest pod(s)                                                                          | `[]`                            |
+| `curator.rbac.enabled`                                | Enable RBAC resources                                                                                                                       | `false`                         |
+| `curator.rbac.rules`                                  | Custom RBAC rules to set                                                                                                                    | `[]`                            |
+| `curator.serviceAccount.create`                       | Create a default serviceaccount for elasticsearch curator                                                                                   | `true`                          |
+| `curator.serviceAccount.name`                         | Name for elasticsearch curator serviceaccount                                                                                               | `""`                            |
+| `curator.serviceAccount.automountServiceAccountToken` | Allows auto mount of ServiceAccountToken on the serviceAccount created                                                                      | `true`                          |
+| `curator.serviceAccount.annotations`                  | Additional custom annotations for the ServiceAccount                                                                                        | `{}`                            |
+| `curator.psp.create`                                  | Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later | `false`                         |
 
 
 ### Metrics parameters
 
-| Name                                         | Description                                                                                                              | Value                            |
-| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | -------------------------------- |
-| `metrics.enabled`                            | Enable prometheus exporter                                                                                               | `false`                          |
-| `metrics.name`                               | Metrics pod name                                                                                                         | `metrics`                        |
-| `metrics.image.registry`                     | Metrics exporter image registry                                                                                          | `docker.io`                      |
-| `metrics.image.repository`                   | Metrics exporter image repository                                                                                        | `bitnami/elasticsearch-exporter` |
-| `metrics.image.tag`                          | Metrics exporter image tag                                                                                               | `1.3.0-debian-10-r83`            |
-| `metrics.image.pullPolicy`                   | Metrics exporter image pull policy                                                                                       | `IfNotPresent`                   |
-| `metrics.image.pullSecrets`                  | Metrics exporter image pull secrets                                                                                      | `[]`                             |
-| `metrics.extraArgs`                          | Extra arguments to add to the default exporter command                                                                   | `[]`                             |
-| `metrics.hostAliases`                        | Add deployment host aliases                                                                                              | `[]`                             |
-| `metrics.schedulerName`                      | Name of the k8s scheduler (other than default)                                                                           | `""`                             |
-| `metrics.service.type`                       | Metrics exporter endpoint service type                                                                                   | `ClusterIP`                      |
-| `metrics.service.annotations`                | Provide any additional annotations which may be required.                                                                | `{}`                             |
-| `metrics.podAffinityPreset`                  | Metrics Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                              | `""`                             |
-| `metrics.podAntiAffinityPreset`              | Metrics Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                         | `""`                             |
-| `metrics.nodeAffinityPreset.type`            | Metrics Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                        | `""`                             |
-| `metrics.nodeAffinityPreset.key`             | Metrics Node label key to match Ignored if `affinity` is set.                                                            | `""`                             |
-| `metrics.nodeAffinityPreset.values`          | Metrics Node label values to match. Ignored if `affinity` is set.                                                        | `[]`                             |
-| `metrics.affinity`                           | Metrics Affinity for pod assignment                                                                                      | `{}`                             |
-| `metrics.nodeSelector`                       | Metrics Node labels for pod assignment                                                                                   | `{}`                             |
-| `metrics.tolerations`                        | Metrics Tolerations for pod assignment                                                                                   | `[]`                             |
-| `metrics.topologySpreadConstraints`          | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template | `[]`                             |
-| `metrics.resources.limits`                   | The resources limits for the container                                                                                   | `{}`                             |
-| `metrics.resources.requests`                 | The requested resources for the container                                                                                | `{}`                             |
-| `metrics.livenessProbe.enabled`              | Enable/disable the liveness probe (metrics pod)                                                                          | `true`                           |
-| `metrics.livenessProbe.initialDelaySeconds`  | Delay before liveness probe is initiated (metrics pod)                                                                   | `60`                             |
-| `metrics.livenessProbe.periodSeconds`        | How often to perform the probe (metrics pod)                                                                             | `10`                             |
-| `metrics.livenessProbe.timeoutSeconds`       | When the probe times out (metrics pod)                                                                                   | `5`                              |
-| `metrics.livenessProbe.failureThreshold`     | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`                              |
-| `metrics.livenessProbe.successThreshold`     | Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)                | `1`                              |
-| `metrics.readinessProbe.enabled`             | Enable/disable the readiness probe (metrics pod)                                                                         | `true`                           |
-| `metrics.readinessProbe.initialDelaySeconds` | Delay before readiness probe is initiated (metrics pod)                                                                  | `5`                              |
-| `metrics.readinessProbe.periodSeconds`       | How often to perform the probe (metrics pod)                                                                             | `10`                             |
-| `metrics.readinessProbe.timeoutSeconds`      | When the probe times out (metrics pod)                                                                                   | `1`                              |
-| `metrics.readinessProbe.failureThreshold`    | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`                              |
-| `metrics.readinessProbe.successThreshold`    | Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)                | `1`                              |
-| `metrics.podAnnotations`                     | Metrics exporter pod Annotation and Labels                                                                               | `{}`                             |
-| `metrics.podLabels`                          | Extra labels to add to Pod                                                                                               | `{}`                             |
-| `metrics.serviceMonitor.enabled`             | if `true`, creates a Prometheus Operator ServiceMonitor (also requires `metrics.enabled` to be `true`)                   | `false`                          |
-| `metrics.serviceMonitor.namespace`           | Namespace in which Prometheus is running                                                                                 | `""`                             |
-| `metrics.serviceMonitor.labels`              | Extra labels for the ServiceMonitor                                                                                      | `{}`                             |
-| `metrics.serviceMonitor.interval`            | Interval at which metrics should be scraped.                                                                             | `""`                             |
-| `metrics.serviceMonitor.scrapeTimeout`       | Timeout after which the scrape is ended                                                                                  | `""`                             |
-| `metrics.serviceMonitor.selector`            | Prometheus instance selector labels                                                                                      | `{}`                             |
-
-
-### Sysctl Image parameters
-
-| Name                             | Description                                 | Value                   |
-| -------------------------------- | ------------------------------------------- | ----------------------- |
-| `sysctlImage.enabled`            | Enable kernel settings modifier image       | `true`                  |
-| `sysctlImage.registry`           | Kernel settings modifier image registry     | `docker.io`             |
-| `sysctlImage.repository`         | Kernel settings modifier image repository   | `bitnami/bitnami-shell` |
-| `sysctlImage.tag`                | Kernel settings modifier image tag          | `10-debian-10-r312`     |
-| `sysctlImage.pullPolicy`         | Kernel settings modifier image pull policy  | `IfNotPresent`          |
-| `sysctlImage.pullSecrets`        | Kernel settings modifier image pull secrets | `[]`                    |
-| `sysctlImage.resources.limits`   | The resources limits for the container      | `{}`                    |
-| `sysctlImage.resources.requests` | The requested resources for the container   | `{}`                    |
-
-
-### VolumePermissions parameters
+| Name                                            | Description                                                                                                              | Value                            |
+| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | -------------------------------- |
+| `metrics.enabled`                               | Enable prometheus exporter                                                                                               | `false`                          |
+| `metrics.nameOverride`                          | Metrics pod name                                                                                                         | `""`                             |
+| `metrics.fullnameOverride`                      | String to fully override common.names.fullname                                                                           | `""`                             |
+| `metrics.image.registry`                        | Metrics exporter image registry                                                                                          | `docker.io`                      |
+| `metrics.image.repository`                      | Metrics exporter image repository                                                                                        | `bitnami/elasticsearch-exporter` |
+| `metrics.image.tag`                             | Metrics exporter image tag                                                                                               | `1.3.0-debian-10-r176`           |
+| `metrics.image.pullPolicy`                      | Metrics exporter image pull policy                                                                                       | `IfNotPresent`                   |
+| `metrics.image.pullSecrets`                     | Metrics exporter image pull secrets                                                                                      | `[]`                             |
+| `metrics.extraArgs`                             | Extra arguments to add to the default exporter command                                                                   | `[]`                             |
+| `metrics.hostAliases`                           | Add deployment host aliases                                                                                              | `[]`                             |
+| `metrics.schedulerName`                         | Name of the k8s scheduler (other than default)                                                                           | `""`                             |
+| `metrics.priorityClassName`                     | Elasticsearch metrics exporter pods' priorityClassName                                                                   | `""`                             |
+| `metrics.service.type`                          | Metrics exporter endpoint service type                                                                                   | `ClusterIP`                      |
+| `metrics.service.port`                          | Metrics exporter endpoint service port                                                                                   | `9114`                           |
+| `metrics.service.annotations`                   | Provide any additional annotations which may be required.                                                                | `{}`                             |
+| `metrics.podAffinityPreset`                     | Metrics Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                              | `""`                             |
+| `metrics.podAntiAffinityPreset`                 | Metrics Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                         | `""`                             |
+| `metrics.nodeAffinityPreset.type`               | Metrics Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                        | `""`                             |
+| `metrics.nodeAffinityPreset.key`                | Metrics Node label key to match Ignored if `affinity` is set.                                                            | `""`                             |
+| `metrics.nodeAffinityPreset.values`             | Metrics Node label values to match. Ignored if `affinity` is set.                                                        | `[]`                             |
+| `metrics.affinity`                              | Metrics Affinity for pod assignment                                                                                      | `{}`                             |
+| `metrics.nodeSelector`                          | Metrics Node labels for pod assignment                                                                                   | `{}`                             |
+| `metrics.tolerations`                           | Metrics Tolerations for pod assignment                                                                                   | `[]`                             |
+| `metrics.topologySpreadConstraints`             | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template | `[]`                             |
+| `metrics.resources.limits`                      | The resources limits for the container                                                                                   | `{}`                             |
+| `metrics.resources.requests`                    | The requested resources for the container                                                                                | `{}`                             |
+| `metrics.livenessProbe.enabled`                 | Enable/disable the liveness probe (metrics pod)                                                                          | `true`                           |
+| `metrics.livenessProbe.initialDelaySeconds`     | Delay before liveness probe is initiated (metrics pod)                                                                   | `60`                             |
+| `metrics.livenessProbe.periodSeconds`           | How often to perform the probe (metrics pod)                                                                             | `10`                             |
+| `metrics.livenessProbe.timeoutSeconds`          | When the probe times out (metrics pod)                                                                                   | `5`                              |
+| `metrics.livenessProbe.failureThreshold`        | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`                              |
+| `metrics.livenessProbe.successThreshold`        | Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)                | `1`                              |
+| `metrics.readinessProbe.enabled`                | Enable/disable the readiness probe (metrics pod)                                                                         | `true`                           |
+| `metrics.readinessProbe.initialDelaySeconds`    | Delay before readiness probe is initiated (metrics pod)                                                                  | `5`                              |
+| `metrics.readinessProbe.periodSeconds`          | How often to perform the probe (metrics pod)                                                                             | `10`                             |
+| `metrics.readinessProbe.timeoutSeconds`         | When the probe times out (metrics pod)                                                                                   | `1`                              |
+| `metrics.readinessProbe.failureThreshold`       | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`                              |
+| `metrics.readinessProbe.successThreshold`       | Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)                | `1`                              |
+| `metrics.startupProbe.enabled`                  | Enable/disable the startup probe (metrics pod)                                                                           | `false`                          |
+| `metrics.startupProbe.initialDelaySeconds`      | Delay before startup probe is initiated (metrics pod)                                                                    | `5`                              |
+| `metrics.startupProbe.periodSeconds`            | How often to perform the probe (metrics pod)                                                                             | `10`                             |
+| `metrics.startupProbe.timeoutSeconds`           | When the probe times out (metrics pod)                                                                                   | `1`                              |
+| `metrics.startupProbe.failureThreshold`         | Minimum consecutive failures for the probe to be considered failed after having succeeded                                | `5`                              |
+| `metrics.startupProbe.successThreshold`         | Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)                | `1`                              |
+| `metrics.customStartupProbe`                    | Custom liveness probe for the Web component                                                                              | `{}`                             |
+| `metrics.customLivenessProbe`                   | Custom liveness probe for the Web component                                                                              | `{}`                             |
+| `metrics.customReadinessProbe`                  | Custom readiness probe for the Web component                                                                             | `{}`                             |
+| `metrics.podAnnotations`                        | Metrics exporter pod Annotation and Labels                                                                               | `{}`                             |
+| `metrics.podLabels`                             | Extra labels to add to Pod                                                                                               | `{}`                             |
+| `metrics.podSecurityContext.enabled`            | Enabled Elasticsearch metrics exporter pods' Security Context                                                            | `true`                           |
+| `metrics.podSecurityContext.fsGroup`            | Set Elasticsearch metrics exporter pod's Security Context fsGroup                                                        | `1001`                           |
+| `metrics.containerSecurityContext.enabled`      | Enabled Elasticsearch metrics exporter containers' Security Context                                                      | `true`                           |
+| `metrics.containerSecurityContext.runAsUser`    | Set Elasticsearch metrics exporter containers' Security Context runAsUser                                                | `1001`                           |
+| `metrics.containerSecurityContext.runAsNonRoot` | Set Elasticsearch metrics exporter container's Security Context runAsNonRoot                                             | `true`                           |
+| `metrics.command`                               | Override default container command (useful when using custom images)                                                     | `[]`                             |
+| `metrics.args`                                  | Override default container args (useful when using custom images)                                                        | `[]`                             |
+| `metrics.extraEnvVars`                          | Array with extra environment variables to add to Elasticsearch metrics exporter nodes                                    | `[]`                             |
+| `metrics.extraEnvVarsCM`                        | Name of existing ConfigMap containing extra env vars for Elasticsearch metrics exporter nodes                            | `""`                             |
+| `metrics.extraEnvVarsSecret`                    | Name of existing Secret containing extra env vars for Elasticsearch metrics exporter nodes                               | `""`                             |
+| `metrics.extraVolumes`                          | Optionally specify extra list of additional volumes for the Elasticsearch metrics exporter pod(s)                        | `[]`                             |
+| `metrics.extraVolumeMounts`                     | Optionally specify extra list of additional volumeMounts for the Elasticsearch metrics exporter container(s)             | `[]`                             |
+| `metrics.sidecars`                              | Add additional sidecar containers to the Elasticsearch metrics exporter pod(s)                                           | `[]`                             |
+| `metrics.initContainers`                        | Add additional init containers to the Elasticsearch metrics exporter pod(s)                                              | `[]`                             |
+| `metrics.serviceMonitor.enabled`                | Create ServiceMonitor Resource for scraping metrics using PrometheusOperator                                             | `false`                          |
+| `metrics.serviceMonitor.namespace`              | Namespace which Prometheus is running in                                                                                 | `""`                             |
+| `metrics.serviceMonitor.jobLabel`               | The name of the label on the target service to use as the job name in prometheus.                                        | `""`                             |
+| `metrics.serviceMonitor.interval`               | Interval at which metrics should be scraped                                                                              | `""`                             |
+| `metrics.serviceMonitor.scrapeTimeout`          | Timeout after which the scrape is ended                                                                                  | `""`                             |
+| `metrics.serviceMonitor.relabelings`            | RelabelConfigs to apply to samples before scraping                                                                       | `[]`                             |
+| `metrics.serviceMonitor.metricRelabelings`      | MetricRelabelConfigs to apply to samples before ingestion                                                                | `[]`                             |
+| `metrics.serviceMonitor.selector`               | ServiceMonitor selector labels                                                                                           | `{}`                             |
+| `metrics.serviceMonitor.labels`                 | Extra labels for the ServiceMonitor                                                                                      | `{}`                             |
+| `metrics.serviceMonitor.honorLabels`            | honorLabels chooses the metric's labels on collisions with target labels                                                 | `false`                          |
+
+
+### Init Container Parameters
 
 | Name                                   | Description                                                                                                                                               | Value                   |
 | -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
 | `volumePermissions.enabled`            | Enable init container that changes volume permissions in the data directory (for cases where the default k8s `runAsUser` and `fsUser` values do not work) | `false`                 |
 | `volumePermissions.image.registry`     | Init container volume-permissions image registry                                                                                                          | `docker.io`             |
 | `volumePermissions.image.repository`   | Init container volume-permissions image name                                                                                                              | `bitnami/bitnami-shell` |
-| `volumePermissions.image.tag`          | Init container volume-permissions image tag                                                                                                               | `10-debian-10-r312`     |
+| `volumePermissions.image.tag`          | Init container volume-permissions image tag                                                                                                               | `10-debian-10-r360`     |
 | `volumePermissions.image.pullPolicy`   | Init container volume-permissions image pull policy                                                                                                       | `IfNotPresent`          |
 | `volumePermissions.image.pullSecrets`  | Init container volume-permissions image pull secrets                                                                                                      | `[]`                    |
 | `volumePermissions.resources.limits`   | The resources limits for the container                                                                                                                    | `{}`                    |
 | `volumePermissions.resources.requests` | The requested resources for the container                                                                                                                 | `{}`                    |
+| `sysctlImage.enabled`                  | Enable kernel settings modifier image                                                                                                                     | `true`                  |
+| `sysctlImage.registry`                 | Kernel settings modifier image registry                                                                                                                   | `docker.io`             |
+| `sysctlImage.repository`               | Kernel settings modifier image repository                                                                                                                 | `bitnami/bitnami-shell` |
+| `sysctlImage.tag`                      | Kernel settings modifier image tag                                                                                                                        | `10-debian-10-r403`     |
+| `sysctlImage.pullPolicy`               | Kernel settings modifier image pull policy                                                                                                                | `IfNotPresent`          |
+| `sysctlImage.pullSecrets`              | Kernel settings modifier image pull secrets                                                                                                               | `[]`                    |
+| `sysctlImage.resources.limits`         | The resources limits for the container                                                                                                                    | `{}`                    |
+| `sysctlImage.resources.requests`       | The requested resources for the container                                                                                                                 | `{}`                    |
 
 
 ### Kibana Parameters
 
-| Name                         | Description                                                               | Value  |
-| ---------------------------- | ------------------------------------------------------------------------- | ------ |
-| `kibana.elasticsearch.hosts` | Array containing hostnames for the ES instances. Used to generate the URL | `[]`   |
-| `kibana.elasticsearch.port`  | Port to connect Kibana and ES instance. Used to generate the URL          | `9200` |
+| Name                         | Description                                                               | Value                                                   |
+| ---------------------------- | ------------------------------------------------------------------------- | ------------------------------------------------------- |
+| `kibana.elasticsearch.hosts` | Array containing hostnames for the ES instances. Used to generate the URL | `[]`                                                    |
+| `kibana.elasticsearch.port`  | Port to connect Kibana and ES instance. Used to generate the URL          | `{{ include "elasticsearch.service.ports.restAPI" . }}` |
 
 
 Specify each parameter using the `--set key=value[,key=value]` argument to `helm install`. For example,
@@ -654,7 +789,7 @@ extraEnvVars:
     value: 7.0
 ```
 
-Alternatively, you can use a ConfigMap or a Secret with the environment variables. To do so, use the `extraEnvVarsConfigMap` or the `extraEnvVarsSecret` values.
+Alternatively, you can use a ConfigMap or a Secret with the environment variables. To do so, use the `extraEnvVarsCM` or the `extraEnvVarsSecret` values.
 
 ### Using custom init scripts
 
@@ -736,6 +871,41 @@ Find more information about how to deal with common errors related to Bitnami's
 
 ## Upgrading
 
+### To 18.0.0
+
+This major release refactors the bitnami/elasticsearch chart, adding some organization and functional changes.
+
+- Each role has now the same structure: its Statefulset, a headless service (for FQDN, it gives each node an individual Advertised name, required for TLS verification), its own ServiceAccount (BWC), and HorizontalPodAutoscaling.
+- Previously, the chart would alternate between a Coordinating service and an All-nodes service for traffic exposure. This logic has been replaced with a single Traffic exposure service, that will have coordinating-only nodes as backend pods, or master pods if no coordinating nodes are enabled.
+- Master-eligible nodes can now be deployed as multi-role nodes using the setting masterOnly. This allows the creation of different topologies, smaller clusters with HA (3 multi-role master-eligible nodes), and single-node deployments.
+- Renamed several values to be in line with the rest of the catalog.
+
+This major release also upgrades Elasticsearch to its version 8.x.x and the updates Kibana subchart.
+- Upgrade to Elasticsearch 8
+- Upgrade Kibana subchart.
+
+
+In addition, several modifications have been performed adding missing features and renaming values, in order to get aligned with the rest of the assets in the Bitnami charts repository.
+
+The following values have been modified:
+
+- `coordinating.service.*` have been renamed as `service.*`. This service will be backed by coordinating nodes if enabled, or master nodes if not.
+- `master.service.*` has been removed.
+- `data.service.*` has been removed.
+- `master.ingress.*` has been renamed as `ingress.*`. This ingress will be backed by the coordinating/master service previously mentioned.
+- In addition, an Ingest-only service and ingress have been added, for use cases where separated ingrestion and search channels are needed.
+- `global.coordinating.name` have been renamed as `global.elasticsaerch.service.name`.
+- `name` has been renamed as `clusterName`.
+- `extraEnvVarsConfigMap` has been renamed as `extraEnvVarsCM`.
+- `{master/data/ingest/coordinating/curator/metrics}.name` has been renamed as `{master/data/ingest/coordinating/curator}.nameOverride`.
+- `{master/data/ingest/coordinating}.replicas` has been renamed as `{master/data/ingest/coordinating}.replicaCount`.
+- `{master/data/ingest/coordinating}.securityContext` has been separated in two different values: `podSecurityContext` and `containerSecurityContext`.
+- `{master/data/ingest/coordinating}.updateStrategy` is now interpreted as an object. `rollingUpdatePartition` has been removed and has to be configured inside the updateStrategy object when needed.
+- `curator.env` renames as `curator.extraEnvVars`.
+- `curator.configMaps.action_file_yml` is now empty by default. Helm will fail to install if not provided. We considered that setting a 'Delete indices older than 90 days' as a default action was not a good practice and could lead to accidents.
+- `curator.dryrun` was renamed as `curator.dryRun`.
+- Default values for `kibana.elasticsearch.hosts` and `kibana.elasticsearch.port` have been modified to use the new helpers.
+
 ### To 17.0.0
 
 This version bumps in a major the version of the Kibana Helm Chart bundled as dependecy, [here](https://github.com/bitnami/charts/tree/master/bitnami/kibana#to-900) you can see the changes implemented in this Kibana major version.
@@ -854,4 +1024,4 @@ Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
-limitations under the License.
+limitations under the License.
\ No newline at end of file
diff --git a/bitnami/elasticsearch/ci/ct-dedicated-values.yaml b/bitnami/elasticsearch/ci/ct-dedicated-values.yaml
new file mode 100644
index 0000000000..0e19fb4482
--- /dev/null
+++ b/bitnami/elasticsearch/ci/ct-dedicated-values.yaml
@@ -0,0 +1,8 @@
+master:
+  replicaCount: 1
+data:
+  replicaCount: 1
+coordinating:
+  replicaCount: 1
+ingest:
+  replicaCount: 1
diff --git a/bitnami/elasticsearch/ci/ct-values.yaml b/bitnami/elasticsearch/ci/ct-values.yaml
index bb6c5dde36..646c2b1dba 100644
--- a/bitnami/elasticsearch/ci/ct-values.yaml
+++ b/bitnami/elasticsearch/ci/ct-values.yaml
@@ -1,6 +1,9 @@
 master:
-  replicas: 1
+  replicaCount: 3
+  masterOnly: false
 data:
-  replicas: 1
+  replicaCount: 0
 coordinating:
-  replicas: 1
+  replicaCount: 0
+ingest:
+  replicaCount: 0
diff --git a/bitnami/elasticsearch/templates/NOTES.txt b/bitnami/elasticsearch/templates/NOTES.txt
index a43fd39417..4b97e8a760 100644
--- a/bitnami/elasticsearch/templates/NOTES.txt
+++ b/bitnami/elasticsearch/templates/NOTES.txt
@@ -2,12 +2,12 @@ CHART NAME: {{ .Chart.Name }}
 CHART VERSION: {{ .Chart.Version }}
 APP VERSION: {{ .Chart.AppVersion }}
 
-{{- if contains .Values.coordinating.service.type "LoadBalancer" }}
+{{- if contains .Values.service.type "LoadBalancer" }}
 
 -------------------------------------------------------------------------------
  WARNING
 
-    By specifying "coordinating.service.type=LoadBalancer" you have most likely
+    By specifying "service.type=LoadBalancer" you have most likely
     exposed the Elasticsearch service externally.
 
     Please note that Elasticsearch does not implement a authentication
@@ -27,7 +27,7 @@ APP VERSION: {{ .Chart.AppVersion }}
     To check whether the host machine meets the requirements, run the command
     below:
 
-      kubectl logs --namespace {{ .Release.Namespace }} $(kubectl get --namespace {{ .Release.Namespace }} \
+      kubectl logs --namespace {{ include "common.names.namespace" . }} $(kubectl get --namespace {{ include "common.names.namespace" . }} \
         pods -l app={{ template "common.names.name" . }},role=master -o jsonpath='{.items[0].metadata.name}') \
 	elasticsearch
 
@@ -39,7 +39,7 @@ APP VERSION: {{ .Chart.AppVersion }}
     As an alternative, you can specify "sysctlImage.enabled=true" to use a
     privileged initContainer to change those settings in the Kernel:
 
-      helm upgrade --namespace {{ .Release.Namespace }} {{ .Release.Name }} bitnami/elasticsearch --set sysctlImage.enabled=true
+      helm upgrade --namespace {{ include "common.names.namespace" . }} {{ .Release.Name }} bitnami/elasticsearch --set sysctlImage.enabled=true
 
     Note that this requires the ability to run privileged containers, which is likely not
     the case on many secure clusters. To cover this use case, you can also set some parameters
@@ -79,11 +79,11 @@ The chart has been deployed in diagnostic mode. All probes have been disabled an
 
 Get the list of pods by executing:
 
-  kubectl get pods --namespace {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}
+  kubectl get pods --namespace {{ include "common.names.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }}
 
 Access the pod you want to debug by executing
 
-  kubectl exec --namespace {{ .Release.Namespace }} -ti <NAME OF THE POD> -- bash
+  kubectl exec --namespace {{ include "common.names.namespace" . }} -ti <NAME OF THE POD> -- bash
 
 In order to replicate the container startup scripts execute this command:
 
@@ -98,29 +98,29 @@ In order to replicate the container startup scripts execute this command:
   The Jobs will not be removed automagically when deleting this Helm chart.
   To remove these jobs, run the following:
 
-    kubectl --namespace {{ .Release.Namespace }} delete job -l app={{ template "common.names.name" . }},role=curator
+    kubectl --namespace {{ include "common.names.namespace" . }} delete job -l app={{ template "common.names.name" . }},role=curator
 
 {{- end }}
 
-  Elasticsearch can be accessed within the cluster on port {{ .Values.coordinating.service.port }} at {{ template "elasticsearch.coordinating.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}
+  Elasticsearch can be accessed within the cluster on port {{ include "elasticsearch.service.ports.restAPI" . }} at {{ template "elasticsearch.service.name" . }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}
 
   To access from outside the cluster execute the following commands:
 
-{{- if contains "NodePort" .Values.coordinating.service.type }}
+{{- if contains "NodePort" .Values.service.type }}
 
-    export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ template "elasticsearch.coordinating.fullname" . }})
-    export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
+    export NODE_PORT=$(kubectl get --namespace {{ include "common.names.namespace" . }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ template "elasticsearch.service.name" . }})
+    export NODE_IP=$(kubectl get nodes --namespace {{ include "common.names.namespace" . }} -o jsonpath="{.items[0].status.addresses[0].address}")
     curl http://$NODE_IP:$NODE_PORT/
-{{- else if contains "LoadBalancer" .Values.coordinating.service.type }}
+{{- else if contains "LoadBalancer" .Values.service.type }}
 
   NOTE: It may take a few minutes for the LoadBalancer IP to be available.
-        Watch the status with: 'kubectl get svc --namespace {{ .Release.Namespace }} -w {{ template "elasticsearch.coordinating.fullname" . }}'
+        Watch the status with: 'kubectl get svc --namespace {{ include "common.names.namespace" . }} -w {{ template "elasticsearch.service.name" . }}'
 
-    export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ template "elasticsearch.coordinating.fullname" . }} --template "{{ "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}" }}")
-    curl http://$SERVICE_IP:{{ .Values.coordinating.service.port }}/
-{{- else if contains "ClusterIP"  .Values.coordinating.service.type }}
+    export SERVICE_IP=$(kubectl get svc --namespace {{ include "common.names.namespace" . }} {{ template "elasticsearch.service.name" . }} --template "{{ "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}" }}")
+    curl http://$SERVICE_IP:{{ include "elasticsearch.service.ports.restAPI" . }}/
+{{- else if contains "ClusterIP"  .Values.service.type }}
 
-    kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ template "elasticsearch.coordinating.fullname" . }} {{ .Values.coordinating.service.port }}:9200 &
+    kubectl port-forward --namespace {{ include "common.names.namespace" . }} svc/{{ template "elasticsearch.service.name" . }} {{ include "elasticsearch.service.ports.restAPI" . }}:9200 &
     curl http://127.0.0.1:9200/
 {{- end }}
 
diff --git a/bitnami/elasticsearch/templates/_helpers.tpl b/bitnami/elasticsearch/templates/_helpers.tpl
index 31e537d919..84f1c3d64e 100644
--- a/bitnami/elasticsearch/templates/_helpers.tpl
+++ b/bitnami/elasticsearch/templates/_helpers.tpl
@@ -7,16 +7,108 @@ Return the proper ES image name
 {{ include "common.images.image" (dict "imageRoot" .Values.image "global" .Values.global) }}
 {{- end -}}
 
+{{/*
+Return the proper Docker Image Registry Secret Names
+*/}}
+{{- define "elasticsearch.imagePullSecrets" -}}
+{{ include "common.images.pullSecrets" (dict "images" (list .Values.image .Values.metrics.image .Values.curator.image .Values.sysctlImage .Values.volumePermissions.image) "global" .Values.global) }}
+{{- end -}}
+
+{{/*
+Return the proper ES exporter image name
+*/}}
+{{- define "elasticsearch.metrics.image" -}}
+{{ include "common.images.image" (dict "imageRoot" .Values.metrics.image "global" .Values.global) }}
+{{- end -}}
+
+{{/*
+Return the proper ES curator image name
+*/}}
+{{- define "elasticsearch.curator.image" -}}
+{{ include "common.images.image" (dict "imageRoot" .Values.curator.image "global" .Values.global) }}
+{{- end -}}
+
+{{/*
+Return the proper sysctl image name
+*/}}
+{{- define "elasticsearch.sysctl.image" -}}
+{{ include "common.images.image" (dict "imageRoot" .Values.sysctlImage "global" .Values.global) }}
+{{- end -}}
+
+{{/*
+Return the proper image name (for the init container volume-permissions image)
+*/}}
+{{- define "elasticsearch.volumePermissions.image" -}}
+{{ include "common.images.image" (dict "imageRoot" .Values.volumePermissions.image "global" .Values.global) }}
+{{- end -}}
+
+
+{{/*
+Name for the Elasticsearch service
+We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
+Required for the Kibana subchart to find Elasticsearch service.
+*/}}
+{{- define "elasticsearch.service.name" -}}
+{{- if .Values.global.kibanaEnabled -}}
+    {{- $name := .Values.global.elasticsearch.service.name -}}
+    {{- if contains $name .Release.Name -}}
+    {{- .Release.Name | trunc 63 | trimSuffix "-" -}}
+    {{- else -}}
+    {{- printf "%s-%s" .Release.Name $name | trunc 63 | trimSuffix "-" -}}
+    {{- end -}}
+{{- else -}}
+    {{- printf "%s" ( include "common.names.fullname" . )  | trunc 63 | trimSuffix "-" -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Port number for the Elasticsearch service REST API port
+Required for the Kibana subchart to find Elasticsearch service.
+*/}}
+{{- define "elasticsearch.service.ports.restAPI" -}}
+{{- if .Values.global.kibanaEnabled -}}
+{{- printf "%d" (int .Values.global.elasticsearch.service.ports.restAPI) -}}
+{{- else -}}
+{{- printf "%d" (int .Values.service.ports.restAPI) -}}
+{{- end -}}
+{{- end -}}
 
 {{/*
 Create a default fully qualified master name.
 We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
 */}}
 {{- define "elasticsearch.master.fullname" -}}
+{{- $name := default "master" .Values.master.nameOverride -}}
 {{- if .Values.master.fullnameOverride -}}
 {{- .Values.master.fullnameOverride | trunc 63 | trimSuffix "-" -}}
 {{- else -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.master.name | trunc 63 | trimSuffix "-" -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Create a default fully qualified coordinating name.
+We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
+*/}}
+{{- define "elasticsearch.coordinating.fullname" -}}
+{{- $name := default "coordinating" .Values.coordinating.nameOverride -}}
+{{- if .Values.coordinating.fullnameOverride -}}
+{{- .Values.coordinating.fullnameOverride | trunc 63 | trimSuffix "-" -}}
+{{- else -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Create a default fully qualified data name.
+We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
+*/}}
+{{- define "elasticsearch.data.fullname" -}}
+{{- $name := default "data" .Values.data.nameOverride -}}
+{{- if .Values.data.fullnameOverride -}}
+{{- .Values.data.fullnameOverride | trunc 63 | trimSuffix "-" -}}
+{{- else -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
 {{- end -}}
 {{- end -}}
 
@@ -25,28 +117,74 @@ Create a default fully qualified ingest name.
 We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
 */}}
 {{- define "elasticsearch.ingest.fullname" -}}
+{{- $name := default "ingest" .Values.ingest.nameOverride -}}
 {{- if .Values.ingest.fullnameOverride -}}
 {{- .Values.ingest.fullnameOverride | trunc 63 | trimSuffix "-" -}}
 {{- else -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.ingest.name | trunc 63 | trimSuffix "-" -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
 {{- end -}}
 {{- end -}}
 
 {{/*
-Create a default fully qualified coordinating name.
+Create a default fully qualified metrics name.
 We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
 */}}
-{{- define "elasticsearch.coordinating.fullname" -}}
-{{- if .Values.global.kibanaEnabled -}}
-{{- printf "%s-%s" .Release.Name .Values.global.coordinating.name | trunc 63 | trimSuffix "-" -}}
+{{- define "elasticsearch.metrics.fullname" -}}
+{{- $name := default "metrics" .Values.metrics.nameOverride -}}
+{{- if .Values.metrics.fullnameOverride -}}
+{{- .Values.metrics.fullnameOverride | trunc 63 | trimSuffix "-" -}}
 {{- else -}}
-{{- if .Values.coordinating -}}
-{{- if .Values.coordinating.fullnameOverride -}}
-{{- .Values.coordinating.fullnameOverride | trunc 63 | trimSuffix "-" -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Create a default fully qualified app name.
+We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
+If release name contains chart name it will be used as a full name.
+*/}}
+{{- define "elasticsearch.curator.fullname" -}}
+{{- $name := default "curator" .Values.metrics.nameOverride -}}
+{{- if .Values.curator.fullnameOverride -}}
+{{- .Values.curator.fullnameOverride | trunc 63 | trimSuffix "-" -}}
 {{- else -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.global.coordinating.name | trunc 63 | trimSuffix "-" -}}
+{{- printf "%s-%s" (include "common.names.fullname" .) $name | trunc 63 | trimSuffix "-" -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Returns true if at least one master-elegible node replica has been configured.
+*/}}
+{{- define "elasticsearch.master.enabled" -}}
+{{- if or .Values.master.autoscaling.enabled (gt (int .Values.master.replicaCount) 0) -}}
+    {{- true -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Returns true if at least one coordinating-only node replica has been configured.
+*/}}
+{{- define "elasticsearch.coordinating.enabled" -}}
+{{- if or .Values.coordinating.autoscaling.enabled (gt (int .Values.coordinating.replicaCount) 0) -}}
+    {{- true -}}
+{{- end -}}
+{{- end -}}
+
+{{/*
+Returns true if at least one data-only node replica has been configured.
+*/}}
+{{- define "elasticsearch.data.enabled" -}}
+{{- if or .Values.data.autoscaling.enabled (gt (int .Values.data.replicaCount) 0) -}}
+    {{- true -}}
 {{- end -}}
 {{- end -}}
+
+{{/*
+Returns true if at least one ingest-only node replica has been configured.
+*/}}
+{{- define "elasticsearch.ingest.enabled" -}}
+{{- if or .Values.ingest.autoscaling.enabled (gt (int .Values.ingest.replicaCount) 0) -}}
+    {{- true -}}
 {{- end -}}
 {{- end -}}
 
@@ -55,38 +193,25 @@ Return the hostname of every ElasticSearch seed node
 */}}
 {{- define "elasticsearch.hosts" -}}
 {{- $clusterDomain := .Values.clusterDomain }}
-{{- $releaseNamespace := .Release.Namespace }}
-{{- if gt (.Values.master.replicas | int) 0 }}
-{{- $masterFullname := include "elasticsearch.master.fullname" . }}
+{{- $releaseNamespace := include "common.names.namespace" . }}
+{{- if (include "elasticsearch.master.enabled" .) -}}
+{{- $masterFullname := (printf "%s-hl" (include "elasticsearch.master.fullname" .) | trunc 63 | trimSuffix "-") }}
 {{- $masterFullname }}.{{ $releaseNamespace }}.svc.{{ $clusterDomain }},
 {{- end -}}
-{{- if gt (.Values.coordinating.replicas | int) 0 }}
-{{- $coordinatingFullname := include "elasticsearch.coordinating.fullname" . }}
+{{- if (include "elasticsearch.coordinating.enabled" .) -}}
+{{- $coordinatingFullname := (printf "%s-hl" (include "elasticsearch.coordinating.fullname" .) | trunc 63 | trimSuffix "-") }}
 {{- $coordinatingFullname }}.{{ $releaseNamespace }}.svc.{{ $clusterDomain }},
 {{- end -}}
-{{- if gt (.Values.data.replicas | int) 0 }}
-{{- $dataFullname := include "elasticsearch.data.fullname" . }}
+{{- if (include "elasticsearch.data.enabled" .) -}}
+{{- $dataFullname := (printf "%s-hl" (include "elasticsearch.data.fullname" .) | trunc 63 | trimSuffix "-") }}
 {{- $dataFullname }}.{{ $releaseNamespace }}.svc.{{ $clusterDomain }},
 {{- end -}}
-{{- if and (eq .Values.ingest.enabled true) (gt (.Values.ingest.replicas | int) 0) }}
-{{- $ingestFullname := include "elasticsearch.ingest.fullname" . }}
+{{- if (include "elasticsearch.ingest.enabled" .) -}}
+{{- $ingestFullname := (printf "%s-hl" (include "elasticsearch.ingest.fullname" .) | trunc 63 | trimSuffix "-") }}
 {{- $ingestFullname }}.{{ $releaseNamespace }}.svc.{{ $clusterDomain }},
 {{- end -}}
 {{- end -}}
 
-{{/*
-Create a default fully qualified data name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-*/}}
-{{- define "elasticsearch.data.fullname" -}}
-{{- if .Values.data.fullnameOverride -}}
-{{- .Values.data.fullnameOverride | trunc 63 | trimSuffix "-" -}}
-{{- else -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.data.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-{{- end -}}
-
-{{ template "elasticsearch.initScriptsSecret" . }}
 {{/*
 Get the initialization scripts volume name.
 */}}
@@ -94,7 +219,6 @@ Get the initialization scripts volume name.
 {{- printf "%s-init-scripts" (include "common.names.fullname" .) -}}
 {{- end -}}
 
-{{ template "elasticsearch.initScriptsCM" . }}
 {{/*
 Get the initialization scripts ConfigMap name.
 */}}
@@ -102,7 +226,6 @@ Get the initialization scripts ConfigMap name.
 {{- printf "%s" .Values.initScriptsCM -}}
 {{- end -}}
 
-{{ template "elasticsearch.initScriptsSecret" . }}
 {{/*
 Get the initialization scripts Secret name.
 */}}
@@ -154,101 +277,6 @@ Get the initialization scripts Secret name.
 {{- end -}}
 {{- end -}}
 
-{{/*
-Create a default fully qualified metrics name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-*/}}
-{{- define "elasticsearch.metrics.fullname" -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.metrics.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-
-{{/*
-Return the proper ES exporter image name
-*/}}
-{{- define "elasticsearch.metrics.image" -}}
-{{ include "common.images.image" (dict "imageRoot" .Values.metrics.image "global" .Values.global) }}
-{{- end -}}
-
-{{/*
-Return the proper sysctl image name
-*/}}
-{{- define "elasticsearch.sysctl.image" -}}
-{{ include "common.images.image" (dict "imageRoot" .Values.sysctlImage "global" .Values.global) }}
-{{- end -}}
-
-{{/*
-Return the proper Docker Image Registry Secret Names
-*/}}
-{{- define "elasticsearch.imagePullSecrets" -}}
-{{ include "common.images.pullSecrets" (dict "images" (list .Values.image .Values.metrics.image .Values.curator.image .Values.sysctlImage .Values.volumePermissions.image) "global" .Values.global) }}
-{{- end -}}
-
-{{/*
-Return the proper image name (for the init container volume-permissions image)
-*/}}
-{{- define "elasticsearch.volumePermissions.image" -}}
-{{ include "common.images.image" (dict "imageRoot" .Values.volumePermissions.image "global" .Values.global) }}
-{{- end -}}
-
-{{/*
-Return the proper Storage Class
-Usage:
-{{ include "elasticsearch.storageClass" (dict "global" .Values.global "local" .Values.master) }}
-*/}}
-{{- define "elasticsearch.storageClass" -}}
-{{/*
-Helm 2.11 supports the assignment of a value to a variable defined in a different scope,
-but Helm 2.9 and 2.10 does not support it, so we need to implement this if-else logic.
-*/}}
-{{- if .global -}}
-    {{- if .global.storageClass -}}
-        {{- if (eq "-" .global.storageClass) -}}
-            {{- printf "storageClassName: \"\"" -}}
-        {{- else }}
-            {{- printf "storageClassName: %s" .global.storageClass -}}
-        {{- end -}}
-    {{- else -}}
-        {{- if .local.persistence.storageClass -}}
-              {{- if (eq "-" .local.persistence.storageClass) -}}
-                  {{- printf "storageClassName: \"\"" -}}
-              {{- else }}
-                  {{- printf "storageClassName: %s" .local.persistence.storageClass -}}
-              {{- end -}}
-        {{- end -}}
-    {{- end -}}
-{{- else -}}
-    {{- if .local.persistence.storageClass -}}
-        {{- if (eq "-" .local.persistence.storageClass) -}}
-            {{- printf "storageClassName: \"\"" -}}
-        {{- else }}
-            {{- printf "storageClassName: %s" .local.persistence.storageClass -}}
-        {{- end -}}
-    {{- end -}}
-{{- end -}}
-{{- end -}}
-
-{{/*
-Return the appropriate apiVersion for cronjob APIs.
-*/}}
-{{- define "cronjob.apiVersion" -}}
-{{- if semverCompare "< 1.8-0" .Capabilities.KubeVersion.GitVersion -}}
-{{- print "batch/v2alpha1" }}
-{{- else if and (semverCompare ">=1.8-0" .Capabilities.KubeVersion.GitVersion) (semverCompare "< 1.21-0" .Capabilities.KubeVersion.GitVersion) -}}
-{{- print "batch/v1beta1" }}
-{{- else if semverCompare ">=1.21-0" .Capabilities.KubeVersion.GitVersion -}}
-{{- print "batch/v1" }}
-{{- end -}}
-{{- end -}}
-
-{{/*
-Create a default fully qualified app name.
-We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
-If release name contains chart name it will be used as a full name.
-*/}}
-{{- define "elasticsearch.curator.fullname" -}}
-{{- printf "%s-%s" (include "common.names.fullname" .) .Values.curator.name | trunc 63 | trimSuffix "-" -}}
-{{- end -}}
-
 {{/*
 Create the name of the service account to use
 */}}
@@ -260,13 +288,6 @@ Create the name of the service account to use
 {{- end -}}
 {{- end -}}
 
-{{/*
-Return the proper ES curator image name
-*/}}
-{{- define "elasticsearch.curator.image" -}}
-{{ include "common.images.image" (dict "imageRoot" .Values.curator.image "global" .Values.global) }}
-{{- end -}}
-
 {{/*
 Return the elasticsearch TLS credentials secret for master nodes.
 */}}
@@ -337,7 +358,7 @@ Return true if an authentication credentials secret object should be created
 Return the Elasticsearch authentication credentials secret name
 */}}
 {{- define "elasticsearch.secretName" -}}
-{{- coalesce .Values.security.existingSecret (include "common.names.fullname" .) -}}
+{{- default (include "common.names.fullname" .) .Values.security.existingSecret  -}}
 {{- end -}}
 
 {{/*
@@ -353,17 +374,40 @@ Return true if a TLS password secret object should be created
 Return the Elasticsearch TLS password secret name
 */}}
 {{- define "elasticsearch.tlsPasswordsSecret" -}}
-{{- coalesce .Values.security.tls.passwordsSecret (printf "%s-tls-pass" (include "common.names.fullname" .)) -}}
+{{- default (printf "%s-tls-pass" (include "common.names.fullname" .)) .Values.security.tls.passwordsSecret -}}
+{{- end -}}
+
+{{/*
+Returns the name of the secret key containing the Keystore password
+*/}}
+{{- define "elasticsearch.keystorePasswordKey" -}}
+{{- if .Values.security.tls.secretKeystoreKey -}}
+{{- printf "%s" .Values.security.tls.secretKeystoreKey -}}
+{{- else -}}
+{{- print "keystore-password"}}
+{{- end -}}
+{{- end -}}
+
+
+{{/*
+Returns the name of the secret key containing the Truststore password
+*/}}
+{{- define "elasticsearch.truststorePasswordKey" -}}
+{{- if .Values.security.tls.secretTruststoreKey -}}
+{{- printf "%s" .Values.security.tls.secretTruststoreKey -}}
+{{- else -}}
+{{- print "truststore-password"}}
+{{- end -}}
 {{- end -}}
 
 {{/*
-Return the name of the http port. Whether or not security is enabeld: http or https
+Returns the name of the secret key containing the PEM key password
 */}}
-{{- define "elasticsearch.httpPortName" -}}
-{{- if .Values.security.enabled }}
-    {{- "https" -}}
+{{- define "elasticsearch.keyPasswordKey" -}}
+{{- if .Values.security.tls.secretKey -}}
+{{- printf "%s" .Values.security.tls.secretKey -}}
 {{- else -}}
-    {{- "http" -}}
+{{- print "key-password"}}
 {{- end -}}
 {{- end -}}
 
@@ -398,18 +442,21 @@ Add environment variables to configure database values
   valueFrom:
     secretKeyRef:
       name: {{ include "elasticsearch.tlsPasswordsSecret" . }}
-      key: keystore-password
+      key: {{ include "elasticsearch.keystorePasswordKey" . | quote }}
 {{- end }}
 {{- if and (not .Values.security.tls.usePemCerts) (or .Values.security.tls.truststorePassword .Values.security.tls.passwordsSecret) }}
 - name: ELASTICSEARCH_TRUSTSTORE_PASSWORD
   valueFrom:
     secretKeyRef:
       name: {{ include "elasticsearch.tlsPasswordsSecret" . }}
-      key: truststore-password
+      key: {{ include "elasticsearch.truststorePasswordKey" . | quote }}
 {{- end }}
 {{- if and .Values.security.tls.usePemCerts (or .Values.security.tls.keyPassword .Values.security.tls.passwordsSecret) }}
 - name: ELASTICSEARCH_KEY_PASSWORD
-  value: {{ .Values.security.tls.keyPassword | quote }}
+  valueFrom:
+    secretKeyRef:
+      name: {{ include "elasticsearch.tlsPasswordsSecret" . }}
+      key: {{ include "elasticsearch.keyPasswordKey" . | quote }}
 {{- end }}
 {{- end -}}
 
@@ -417,46 +464,49 @@ Add environment variables to configure database values
 Returns true if at least 1 existing secret was provided
 */}}
 {{- define "elasticsearch.security.tlsSecretsProvided" -}}
-{{- $masterSecret :=.Values.security.tls.master.existingSecret -}}
-{{- $dataSecret :=.Values.security.tls.data.existingSecret -}}
-{{- $coordSecret :=.Values.security.tls.coordinating.existingSecret -}}
-{{- $ingestSecret :=.Values.security.tls.ingest.existingSecret -}}
-{{- $ingestEnabled := .Values.ingest.enabled -}}
-{{- if or $masterSecret $dataSecret $coordSecret (and $ingestEnabled $ingestSecret) }}
+{{- $masterSecret := (and (include "elasticsearch.master.enabled" .) .Values.security.tls.master.existingSecret) -}}
+{{- $coordinatingSecret := (and (include "elasticsearch.coordinating.enabled" .) .Values.security.tls.coordinating.existingSecret) -}}
+{{- $dataSecret := (and (include "elasticsearch.data.enabled" .) .Values.security.tls.data.existingSecret) -}}
+{{- $ingestSecret := (and (include "elasticsearch.ingest.enabled" .) .Values.security.tls.ingest.existingSecret) -}}
+{{- if or $masterSecret $coordinatingSecret $dataSecret $ingestSecret }}
     {{- true -}}
 {{- end -}}
 {{- end -}}
 
 {{/* Validate values of Elasticsearch - Existing secret not provided for master nodes */}}
 {{- define "elasticsearch.validateValues.security.missingTlsSecrets.master" -}}
-{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) (not .Values.security.tls.master.existingSecret) -}}
+{{- $masterSecret := (and (include "elasticsearch.master.enabled" .) (not .Values.security.tls.master.existingSecret)) -}}
+{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) $masterSecret -}}
 elasticsearch: security.tls.master.existingSecret
     Missing secret containing the TLS certificates for the Elasticsearch master nodes.
     Provide the certificates using --set .Values.security.tls.master.existingSecret="my-secret".
 {{- end -}}
 {{- end -}}
 
-{{/* Validate values of Elasticsearch - Existing secret not provided for data nodes */}}
-{{- define "elasticsearch.validateValues.security.missingTlsSecrets.data" -}}
-{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) (not .Values.security.tls.data.existingSecret) -}}
-elasticsearch: security.tls.data.existingSecret
-    Missing secret containing the TLS certificates for the Elasticsearch data nodes.
-    Provide the certificates using --set .Values.security.tls.data.existingSecret="my-secret".
-{{- end -}}
-{{- end -}}
-
 {{/* Validate values of Elasticsearch - Existing secret not provided for coordinating-only nodes */}}
 {{- define "elasticsearch.validateValues.security.missingTlsSecrets.coordinating" -}}
-{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) (not .Values.security.tls.coordinating.existingSecret) -}}
+{{- $coordinatingSecret := (and (include "elasticsearch.coordinating.enabled" .) (not .Values.security.tls.coordinating.existingSecret)) -}}
+{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) $coordinatingSecret -}}
 elasticsearch: security.tls.coordinating.existingSecret
     Missing secret containing the TLS certificates for the Elasticsearch coordinating-only nodes.
     Provide the certificates using --set .Values.security.tls.coordinating.existingSecret="my-secret".
 {{- end -}}
 {{- end -}}
 
+{{/* Validate values of Elasticsearch - Existing secret not provided for data nodes */}}
+{{- define "elasticsearch.validateValues.security.missingTlsSecrets.data" -}}
+{{- $dataSecret := (and (include "elasticsearch.data.enabled" .) (not .Values.security.tls.data.existingSecret)) -}}
+{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) $dataSecret -}}
+elasticsearch: security.tls.data.existingSecret
+    Missing secret containing the TLS certificates for the Elasticsearch data nodes.
+    Provide the certificates using --set .Values.security.tls.data.existingSecret="my-secret".
+{{- end -}}
+{{- end -}}
+
 {{/* Validate values of Elasticsearch - Existing secret not provided for ingest nodes */}}
 {{- define "elasticsearch.validateValues.security.missingTlsSecrets.ingest" -}}
-{{- if and .Values.security.enabled .Values.ingest.enabled (include "elasticsearch.security.tlsSecretsProvided" .) (not .Values.security.tls.ingest.existingSecret) -}}
+{{- $ingestSecret := (and (include "elasticsearch.ingest.enabled" .) (not .Values.security.tls.ingest.existingSecret)) -}}
+{{- if and .Values.security.enabled (include "elasticsearch.security.tlsSecretsProvided" .) $ingestSecret -}}
 elasticsearch: security.tls.ingest.existingSecret
     Missing secret containing the TLS certificates for the Elasticsearch ingest nodes.
     Provide the certificates using --set .Values.security.tls.ingest.existingSecret="my-secret".
@@ -477,11 +527,20 @@ elasticsearch: security.tls
 {{- end -}}
 {{- end -}}
 
+{{/* Validate at least Elasticsearch one master node is configured */}}
+{{- define "elasticsearch.validateValues.master.replicas" -}}
+{{- if not (include "elasticsearch.master.enabled" .) -}}
+elasticsearch: master.replicas
+    Elasticsearch needs at least one master-elegible node to form a cluster.
+{{- end -}}
+{{- end -}}
+
 {{/*
 Compile all warnings into a single message, and call fail.
 */}}
 {{- define "elasticsearch.validateValues" -}}
 {{- $messages := list -}}
+{{- $messages := append $messages (include "elasticsearch.validateValues.master.replicas" .) -}}
 {{- $messages := append $messages (include "elasticsearch.validateValues.security.tls" .) -}}
 {{- $messages := append $messages (include "elasticsearch.validateValues.security.missingTlsSecrets.master" .) -}}
 {{- $messages := append $messages (include "elasticsearch.validateValues.security.missingTlsSecrets.data" .) -}}
diff --git a/bitnami/elasticsearch/templates/configmap-curator.yaml b/bitnami/elasticsearch/templates/configmap-curator.yaml
deleted file mode 100644
index 14ee39535d..0000000000
--- a/bitnami/elasticsearch/templates/configmap-curator.yaml
+++ /dev/null
@@ -1,11 +0,0 @@
-{{- if .Values.curator.enabled }}
-apiVersion: v1
-kind: ConfigMap
-metadata:
-  name: {{ include "elasticsearch.curator.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: curator
-data:
-  action_file.yml: {{ required "A valid .Values.curator.configMaps.action_file_yml entry is required!" (toYaml .Values.curator.configMaps.action_file_yml | indent 2) }}
-  config.yml: {{ required "A valid .Values.curator.configMaps.config_yml entry is required!" (tpl (toYaml .Values.curator.configMaps.config_yml | indent 2) $) }}
-{{- end }}
diff --git a/bitnami/elasticsearch/templates/configmap-es.yaml b/bitnami/elasticsearch/templates/configmap-es.yaml
deleted file mode 100644
index 40efaa071a..0000000000
--- a/bitnami/elasticsearch/templates/configmap-es.yaml
+++ /dev/null
@@ -1,16 +0,0 @@
-{{- if or .Values.config .Values.extraConfig }}
-apiVersion: v1
-kind: ConfigMap
-metadata:
-  name: {{ include "common.names.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-data:
-  {{- if .Values.config }}
-  elasticsearch.yml: |-
-    {{- toYaml .Values.config | nindent 4 }}
-  {{- end }}
-  {{- if .Values.extraConfig }}
-  my_elasticsearch.yml: |-
-    {{- toYaml .Values.extraConfig | nindent 4 }}
-  {{- end }}
-{{- end }}
diff --git a/bitnami/elasticsearch/templates/configmap-initscripts.yaml b/bitnami/elasticsearch/templates/configmap-initscripts.yaml
deleted file mode 100644
index e764d3c3d5..0000000000
--- a/bitnami/elasticsearch/templates/configmap-initscripts.yaml
+++ /dev/null
@@ -1,12 +0,0 @@
-{{- if .Values.initScripts }}
-apiVersion: v1
-kind: ConfigMap
-metadata:
-  name: {{ template "elasticsearch.initScripts" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    component: master
-data:
-{{- with .Values.initScripts }}
-{{ toYaml . | indent 2 }}
-{{- end }}
-{{ end }}
diff --git a/bitnami/elasticsearch/templates/configmap.yaml b/bitnami/elasticsearch/templates/configmap.yaml
new file mode 100644
index 0000000000..3efba80cc4
--- /dev/null
+++ b/bitnami/elasticsearch/templates/configmap.yaml
@@ -0,0 +1,23 @@
+{{- if or .Values.config .Values.extraConfig }}
+apiVersion: v1
+kind: ConfigMap
+metadata:
+  name: {{ include "common.names.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+data:
+  {{- if .Values.config }}
+  elasticsearch.yml: |-
+    {{- include "common.tplvalues.render" ( dict "value" .Values.config "context" $ ) | nindent 4 }}
+  {{- end }}
+  {{- if .Values.extraConfig }}
+  my_elasticsearch.yml: |-
+    {{- include "common.tplvalues.render" ( dict "value" .Values.extraConfig "context" $ ) | nindent 4 }}
+  {{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/coordinating-svc.yaml b/bitnami/elasticsearch/templates/coordinating-svc.yaml
deleted file mode 100644
index 0acd7bdfc1..0000000000
--- a/bitnami/elasticsearch/templates/coordinating-svc.yaml
+++ /dev/null
@@ -1,27 +0,0 @@
-apiVersion: v1
-kind: Service
-metadata:
-  name: {{ include "elasticsearch.coordinating.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: coordinating-only
-  annotations: {{ include "common.tplvalues.render" ( dict "value" .Values.coordinating.service.annotations "context" $) | nindent 4 }}
-spec:
-  type: {{ .Values.coordinating.service.type | quote }}
-  {{- if and (eq .Values.coordinating.service.type "LoadBalancer") (not (empty .Values.coordinating.service.loadBalancerIP)) }}
-  loadBalancerIP: {{ .Values.coordinating.service.loadBalancerIP }}
-  externalTrafficPolicy: {{ .Values.coordinating.service.externalTrafficPolicy | quote }}
-  {{- end }}
-  publishNotReadyAddresses: true
-  ports:
-    - name: {{ include "elasticsearch.httpPortName" . }}
-      port: {{ .Values.coordinating.service.port }}
-      targetPort: {{ include "elasticsearch.httpPortName" . }}
-      {{- if and (or (eq .Values.coordinating.service.type "NodePort") (eq .Values.coordinating.service.type "LoadBalancer")) (not (empty .Values.coordinating.service.nodePort)) }}
-      nodePort: {{ .Values.coordinating.service.nodePort }}
-      {{- else if eq .Values.coordinating.service.type "ClusterIP" }}
-      nodePort: null
-      {{- end }}
-    - name: tcp-transport
-      port: 9300
-  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
-    app.kubernetes.io/component: coordinating-only
diff --git a/bitnami/elasticsearch/templates/coordinating-hpa.yaml b/bitnami/elasticsearch/templates/coordinating/hpa.yaml
similarity index 89%
rename from bitnami/elasticsearch/templates/coordinating-hpa.yaml
rename to bitnami/elasticsearch/templates/coordinating/hpa.yaml
index 59e330cc9a..1f75b21dc8 100644
--- a/bitnami/elasticsearch/templates/coordinating-hpa.yaml
+++ b/bitnami/elasticsearch/templates/coordinating/hpa.yaml
@@ -1,9 +1,9 @@
-{{- if .Values.coordinating.autoscaling.enabled }}
+{{- if and (include "elasticsearch.coordinating.enabled" .) .Values.coordinating.autoscaling.enabled }}
 apiVersion: autoscaling/v2beta1
 kind: HorizontalPodAutoscaler
 metadata:
   name: {{ include "elasticsearch.coordinating.fullname" . }}
-  namespace: {{ .Release.Namespace | quote }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: coordinating-only
     {{- if .Values.commonLabels }}
diff --git a/bitnami/elasticsearch/templates/coordinating/serviceaccount.yaml b/bitnami/elasticsearch/templates/coordinating/serviceaccount.yaml
new file mode 100644
index 0000000000..ba0861a324
--- /dev/null
+++ b/bitnami/elasticsearch/templates/coordinating/serviceaccount.yaml
@@ -0,0 +1,22 @@
+{{- if and (include "elasticsearch.coordinating.enabled" .) .Values.coordinating.serviceAccount.create -}}
+apiVersion: v1
+kind: ServiceAccount
+metadata:
+  name: {{ include "elasticsearch.coordinating.serviceAccountName" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: coordinating-only
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.coordinating.serviceAccount.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.coordinating.serviceAccount.annotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.serviceAccount.annotations "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+automountServiceAccountToken: {{ .Values.coordinating.serviceAccount.automountServiceAccountToken }}
+{{- end -}}
diff --git a/bitnami/elasticsearch/templates/coordinating-statefulset.yaml b/bitnami/elasticsearch/templates/coordinating/statefulset.yaml
similarity index 66%
rename from bitnami/elasticsearch/templates/coordinating-statefulset.yaml
rename to bitnami/elasticsearch/templates/coordinating/statefulset.yaml
index 9b145c71d4..c8f6207262 100644
--- a/bitnami/elasticsearch/templates/coordinating-statefulset.yaml
+++ b/bitnami/elasticsearch/templates/coordinating/statefulset.yaml
@@ -1,25 +1,31 @@
+{{- if (include "elasticsearch.coordinating.enabled" .) }}
 apiVersion: {{ template "common.capabilities.statefulset.apiVersion" . }}
 kind: StatefulSet
 metadata:
   name: {{ include "elasticsearch.coordinating.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: coordinating-only
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: coordinating-only
-spec:
-  updateStrategy:
-    type: {{ .Values.coordinating.updateStrategy.type }}
-    {{- if (eq "Recreate" .Values.coordinating.updateStrategy.type) }}
-    rollingUpdate: null
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+spec:
+  {{- if not .Values.coordinating.autoscaling.enabled }}
+  replicas: {{ .Values.coordinating.replicaCount }}
+  {{- end }}
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       app.kubernetes.io/component: coordinating-only
-  podManagementPolicy: Parallel
-  {{- if not .Values.coordinating.autoscaling.enabled }}
-  replicas: {{ .Values.coordinating.replicas }}
+  {{- if .Values.coordinating.updateStrategy }}
+  updateStrategy: {{- toYaml .Values.coordinating.updateStrategy | nindent 4 }}
   {{- end }}
-  serviceName: {{ template "elasticsearch.coordinating.fullname" . }}
+  serviceName: {{ printf "%s-hl" (include "elasticsearch.coordinating.fullname" .) | trunc 63 | trimSuffix "-" }}
+  podManagementPolicy: {{ .Values.coordinating.podManagementPolicy }}
   template:
     metadata:
       labels: {{- include "common.labels.standard" . | nindent 8 }}
@@ -37,16 +43,11 @@ spec:
         {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.podAnnotations "context" $) | nindent 8 }}
         {{- end }}
     spec:
+      serviceAccountName: {{ template "elasticsearch.coordinating.serviceAccountName" . }}
       {{- include "elasticsearch.imagePullSecrets" . | nindent 6 }}
       {{- if .Values.coordinating.hostAliases }}
       hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.hostAliases "context" $) | nindent 8 }}
       {{- end }}
-      {{- if .Values.coordinating.schedulerName }}
-      schedulerName: {{ .Values.coordinating.schedulerName }}
-      {{- end }}
-      {{- if .Values.coordinating.priorityClassName }}
-      priorityClassName: {{ .Values.coordinating.priorityClassName | quote }}
-      {{- end }}
       {{- if .Values.coordinating.affinity }}
       affinity: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.affinity "context" $) | nindent 8 }}
       {{- else }}
@@ -61,17 +62,20 @@ spec:
       {{- if .Values.coordinating.tolerations }}
       tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.tolerations "context" $) | nindent 8 }}
       {{- end }}
+      {{- if .Values.coordinating.schedulerName }}
+      schedulerName: {{ .Values.coordinating.schedulerName }}
+      {{- end }}
       {{- if .Values.coordinating.topologySpreadConstraints }}
       topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.topologySpreadConstraints "context" $) | nindent 8 }}
       {{- end }}
-      serviceAccountName: {{ template "elasticsearch.coordinating.serviceAccountName" . }}
-      {{- if or .Values.coordinating.podSecurityContext.enabled .Values.coordinating.securityContext.enabled }}
-      securityContext:
-        {{- if .Values.coordinating.podSecurityContext.enabled }}
-        {{- omit .Values.coordinating.podSecurityContext "enabled" | toYaml | nindent 8 }}
-        {{- else }}
-        fsGroup: {{ .Values.coordinating.securityContext.fsGroup }}
-        {{- end }}
+      {{- if .Values.coordinating.priorityClassName }}
+      priorityClassName: {{ .Values.coordinating.priorityClassName | quote }}
+      {{- end }}
+      {{- if .Values.coordinating.terminationGracePeriodSeconds }}
+      terminationGracePeriodSeconds: {{ .Values.coordinating.terminationGracePeriodSeconds }}
+      {{- end }}
+      {{- if .Values.coordinating.podSecurityContext.enabled }}
+      securityContext: {{- omit .Values.coordinating.podSecurityContext "enabled" | toYaml | nindent 8 }}
       {{- end }}
       {{- if or .Values.coordinating.initContainers .Values.sysctlImage.enabled }}
       initContainers:
@@ -95,22 +99,29 @@ spec:
         {{- if .Values.coordinating.initContainers }}
         {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.initContainers "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.initContainers }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.initContainers "context" $) | nindent 8 }}
+        {{- end }}
       {{- end }}
       containers:
         - name: elasticsearch
           image: {{ include "elasticsearch.image" . }}
           imagePullPolicy: {{ .Values.image.pullPolicy | quote }}
-          {{- if or .Values.coordinating.containerSecurityContext.enabled .Values.coordinating.securityContext.enabled }}
-          securityContext:
-            {{- if .Values.coordinating.containerSecurityContext.enabled }}
-            {{- omit .Values.coordinating.containerSecurityContext "enabled" | toYaml | nindent 12 }}
-            {{- else }}
-            runAsUser: {{ .Values.coordinating.securityContext.runAsUser }}
-            {{- end }}
+          {{- if .Values.coordinating.containerSecurityContext.enabled }}
+          securityContext: {{- omit .Values.coordinating.containerSecurityContext "enabled" | toYaml | nindent 12 }}
           {{- end }}
           {{- if .Values.diagnosticMode.enabled }}
           command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else if .Values.coordinating.command }}
+          command: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.command "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.diagnosticMode.enabled }}
           args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if .Values.coordinating.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.args "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.coordinating.lifecycleHooks }}
+          lifecycle: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.lifecycleHooks "context" $) | nindent 12 }}
           {{- end }}
           env:
             - name: MY_POD_NAME
@@ -120,40 +131,57 @@ spec:
             - name: BITNAMI_DEBUG
               value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
             - name: ELASTICSEARCH_CLUSTER_NAME
-              value: {{ .Values.name | quote }}
+              value: {{ .Values.clusterName | quote }}
+            - name: ELASTICSEARCH_IS_DEDICATED_NODE
+              value: "yes"
+            - name: ELASTICSEARCH_NODE_ROLES
+              value: ""
+            - name: ELASTICSEARCH_TRANSPORT_PORT_NUMBER
+              value: {{ .Values.containerPorts.transport | quote }}
+            - name: ELASTICSEARCH_HTTP_PORT_NUMBER
+              value: {{ .Values.containerPorts.restAPI | quote }}
             - name: ELASTICSEARCH_CLUSTER_HOSTS
               value: {{ include "elasticsearch.hosts" . | quote }}
             - name: ELASTICSEARCH_TOTAL_NODES
-              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicas .Values.data.autoscaling.enabled) | quote }}
+              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicaCount .Values.data.autoscaling.enabled) | quote }}
             - name: ELASTICSEARCH_CLUSTER_MASTER_HOSTS
               {{- $elasticsearchMasterFullname := include "elasticsearch.master.fullname" . }}
-              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) }}
-              value: {{ range $i, $e := until $replicas }}{{ $elasticsearchMasterFullname }}-{{ $e }} {{ end }}
+              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) }}
+              value: {{ range $i, $e := until $replicas }}{{ printf "%s-%d" $elasticsearchMasterFullname $e }} {{ end }}
             - name: ELASTICSEARCH_MINIMUM_MASTER_NODES
-              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) 2) 1 | quote }}
+              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) 2) 1 | quote }}
             - name: ELASTICSEARCH_ADVERTISED_HOSTNAME
-              value: "$(MY_POD_NAME).{{ include "elasticsearch.coordinating.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}"
+              value: "$(MY_POD_NAME).{{ printf "%s-hl" (include "elasticsearch.coordinating.fullname" .) | trunc 63 | trimSuffix "-" }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}"
             {{- if .Values.plugins }}
             - name: ELASTICSEARCH_PLUGINS
               value: {{ .Values.plugins | quote }}
             {{- end }}
+            {{- if .Values.coordinating.heapSize }}
             - name: ELASTICSEARCH_HEAP_SIZE
               value: {{ .Values.coordinating.heapSize | quote }}
-            - name: ELASTICSEARCH_IS_DEDICATED_NODE
-              value: "yes"
-            - name: ELASTICSEARCH_NODE_TYPE
-              value: "coordinating"
+            {{- end }}
             {{- if .Values.security.enabled }}
             {{- include "elasticsearch.configure.security" . | nindent 12 }}
             {{- end }}
+            {{- if .Values.coordinating.extraEnvVars }}
+            {{- include "common.tplvalues.render" ( dict "value" .Values.coordinating.extraEnvVars "context" $ ) | nindent 12 }}
+            {{- end }}
             {{- if .Values.extraEnvVars }}
             {{- include "common.tplvalues.render" ( dict "value" .Values.extraEnvVars "context" $ ) | nindent 12 }}
             {{- end }}
-          {{- if or .Values.extraEnvVarsConfigMap .Values.extraEnvVarsSecret }}
+          {{- if or .Values.extraEnvVarsCM .Values.extraEnvVarsSecret .Values.coordinating.extraEnvVarsCM .Values.coordinating.extraEnvVarsSecret }}
           envFrom:
-            {{- if .Values.extraEnvVarsConfigMap }}
+            {{- if .Values.coordinating.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.coordinating.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.coordinating.extraEnvVarsCM }}
             - configMapRef:
-                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsConfigMap "context" $ ) }}
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.coordinating.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsSecret "context" $ ) }}
             {{- end }}
             {{- if .Values.extraEnvVarsSecret }}
             - secretRef:
@@ -161,31 +189,20 @@ spec:
             {{- end }}
           {{- end }}
           ports:
-            - name: {{ include "elasticsearch.httpPortName" . }}
-              containerPort: 9200
+            - name: rest-api
+              containerPort: {{ .Values.containerPorts.restAPI }}
             - name: transport
-              containerPort: 9300
+              containerPort: {{ .Values.containerPorts.transport }}
           {{- if not .Values.diagnosticMode.enabled }}
           {{- if .Values.coordinating.startupProbe.enabled }}
-          startupProbe:
-            initialDelaySeconds: {{ .Values.coordinating.startupProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.coordinating.startupProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.coordinating.startupProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.coordinating.startupProbe.successThreshold }}
-            failureThreshold: {{ .Values.coordinating.startupProbe.failureThreshold }}
-            exec:
-              command:
-                - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
+          startupProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.coordinating.startupProbe "enabled") "context" $) | nindent 12 }}
+            tcpSocket:
+              port: rest-api
           {{- else if .Values.coordinating.customStartupProbe }}
           startupProbe: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.customStartupProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.coordinating.livenessProbe.enabled }}
-          livenessProbe:
-            initialDelaySeconds: {{ .Values.coordinating.livenessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.coordinating.livenessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.coordinating.livenessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.coordinating.livenessProbe.successThreshold }}
-            failureThreshold: {{ .Values.coordinating.livenessProbe.failureThreshold }}
+          livenessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.coordinating.livenessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -193,12 +210,7 @@ spec:
           livenessProbe: {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.customLivenessProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.coordinating.readinessProbe.enabled }}
-          readinessProbe:
-            initialDelaySeconds: {{ .Values.coordinating.readinessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.coordinating.readinessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.coordinating.readinessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.coordinating.readinessProbe.successThreshold }}
-            failureThreshold: {{ .Values.coordinating.readinessProbe.failureThreshold }}
+          readinessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.coordinating.readinessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -210,6 +222,8 @@ spec:
           resources: {{- toYaml .Values.coordinating.resources | nindent 12 }}
           {{- end }}
           volumeMounts:
+            - name: data
+              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.config }}
             - mountPath: /opt/bitnami/elasticsearch/config/elasticsearch.yml
               name: config
@@ -220,16 +234,11 @@ spec:
               name: config
               subPath: my_elasticsearch.yml
             {{- end }}
-            - name: data
-              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.security.enabled }}
             - name: elasticsearch-certificates
               mountPath: /opt/bitnami/elasticsearch/config/certs
               readOnly: true
             {{- end }}
-            {{- if .Values.extraVolumeMounts }}
-            {{- toYaml .Values.extraVolumeMounts | nindent 12 }}
-            {{- end }}
             {{- if .Values.initScripts }}
             - name: custom-init-scripts
               mountPath: /docker-entrypoint-initdb.d/init-scripts
@@ -242,10 +251,21 @@ spec:
             - name: custom-init-scripts-secret
               mountPath: /docker-entrypoint-initdb.d/init-scripts-secret
             {{- end }}
+            {{- if .Values.coordinating.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
+            {{- if .Values.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
         {{- if .Values.coordinating.sidecars }}
         {{- include "common.tplvalues.render" ( dict "value" .Values.coordinating.sidecars "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" .Values.sidecars "context" $) | nindent 8 }}
+        {{- end }}
       volumes:
+        - name: "data"
+          emptyDir: {}
         {{- if or .Values.config .Values.extraConfig }}
         - name: config
           configMap:
@@ -257,9 +277,6 @@ spec:
             secretName: {{ include "elasticsearch.coordinating.tlsSecretName" . }}
             defaultMode: 256
         {{- end }}
-        {{- if .Values.extraVolumes }}
-        {{- toYaml .Values.extraVolumes | nindent 8 }}
-        {{- end }}
         {{- if .Values.initScripts }}
         - name: custom-init-scripts
           configMap:
@@ -276,5 +293,10 @@ spec:
             secretName: {{ template "elasticsearch.initScriptsSecret" . }}
             defaultMode: 0755
         {{- end }}
-        - name: "data"
-          emptyDir: {}
+        {{- if .Values.coordinating.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.coordinating.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+        {{- if .Values.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/coordinating/svc-headless.yaml b/bitnami/elasticsearch/templates/coordinating/svc-headless.yaml
new file mode 100644
index 0000000000..84d87eb6e4
--- /dev/null
+++ b/bitnami/elasticsearch/templates/coordinating/svc-headless.yaml
@@ -0,0 +1,28 @@
+{{- if (include "elasticsearch.coordinating.enabled" .) }}
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ printf "%s-hl" (include "elasticsearch.coordinating.fullname" .) | trunc 63 | trimSuffix "-" }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: coordinating-only
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+  {{- end }}
+spec:
+  type: ClusterIP
+  clusterIP: None
+  publishNotReadyAddresses: true
+  ports:
+    - name: tcp-rest-api
+      port: {{ .Values.containerPorts.restAPI }}
+      targetPort: rest-api
+    - name: tcp-transport
+      port: {{ .Values.containerPorts.transport }}
+      targetPort: transport
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    app.kubernetes.io/component: coordinating-only
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/curator/configmap.yaml b/bitnami/elasticsearch/templates/curator/configmap.yaml
new file mode 100644
index 0000000000..1d17a715b5
--- /dev/null
+++ b/bitnami/elasticsearch/templates/curator/configmap.yaml
@@ -0,0 +1,26 @@
+{{- if .Values.curator.enabled }}
+apiVersion: v1
+kind: ConfigMap
+metadata:
+  name: {{ include "elasticsearch.curator.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: curator
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+data:
+  action_file.yml: {{ required "A valid .Values.curator.configMaps.action_file_yml entry is required!" (toYaml .Values.curator.configMaps.action_file_yml | indent 2) }}
+  {{- if .Values.curator.configMaps.config_yml }}
+  config.yml: {{- include "common.tplvalues.render" ( dict "value" .Values.curator.configMaps.config_yml "context" $ ) | nindent 2 }}
+  {{- else }}
+  config.yml: |-
+    client:
+      hosts:
+        - {{ template "elasticsearch.service.name" . }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}
+      port: {{ include "elasticsearch.service.ports.restAPI" . }}
+  {{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/cronjob.yaml b/bitnami/elasticsearch/templates/curator/cronjob.yaml
similarity index 55%
rename from bitnami/elasticsearch/templates/cronjob.yaml
rename to bitnami/elasticsearch/templates/curator/cronjob.yaml
index 8e9c2deb0b..d3eca8d8ed 100644
--- a/bitnami/elasticsearch/templates/cronjob.yaml
+++ b/bitnami/elasticsearch/templates/curator/cronjob.yaml
@@ -1,25 +1,29 @@
 {{- if .Values.curator.enabled }}
-apiVersion: {{ template "cronjob.apiVersion" . }}
+apiVersion: {{ template "common.capabilities.cronjob.apiVersion" . }}
 kind: CronJob
 metadata:
   name: {{ template "elasticsearch.curator.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: curator
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: curator
-  {{- if .Values.curator.cronjob.annotations }}
-  annotations: {{- toYaml .Values.curator.cronjob.annotations | nindent 4 }}
+    {{- if .Values.curator.cronjob.cronjobLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.curator.cronjob.cronjobLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.curator.cronjob.cronjobAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.curator.cronjob.cronjobAnnotations "context" $) | nindent 4 }}
   {{- end }}
 spec:
-  schedule: "{{ .Values.curator.cronjob.schedule }}"
-  {{- with .Values.curator.cronjob.concurrencyPolicy }}
-  concurrencyPolicy: {{ . }}
+  schedule: {{ .Values.curator.cronjob.schedule | quote }}
+  {{- if .Values.curator.cronjob.concurrencyPolicy }}
+  concurrencyPolicy: {{ .Values.curator.cronjob.concurrencyPolicy }}
   {{- end }}
-  {{- with .Values.curator.cronjob.failedJobsHistoryLimit }}
-  failedJobsHistoryLimit: {{ . }}
+  {{- if .Values.curator.cronjob.failedJobsHistoryLimit }}
+  failedJobsHistoryLimit: {{ .Values.curator.cronjob.failedJobsHistoryLimit }}
   {{- end }}
-  {{- with .Values.curator.cronjob.successfulJobsHistoryLimit }}
-  successfulJobsHistoryLimit: {{ . }}
+  {{- if .Values.curator.cronjob.successfulJobsHistoryLimit }}
+  successfulJobsHistoryLimit: {{ .Values.curator.cronjob.successfulJobsHistoryLimit }}
   {{- end }}
   jobTemplate:
     metadata:
@@ -27,9 +31,12 @@ spec:
         app.kubernetes.io/component: curator
         ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
         app: curator
-        {{- if .Values.curator.podLabels }}
-        {{- include "common.tplvalues.render" (dict "value" .Values.curator.podLabels "context" $) | nindent 8 }}
+        {{- if .Values.curator.cronjob.jobLabels }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.curator.cronjob.jobLabels "context" $) | nindent 8 }}
         {{- end }}
+      {{- if .Values.curator.cronjob.jobAnnotations }}
+      annotations: {{- include "common.tplvalues.render" (dict "value" .Values.curator.jobAnnotations "context" $) | nindent 8 }}
+      {{- end }}
     spec:
       template:
         metadata:
@@ -37,26 +44,18 @@ spec:
             app.kubernetes.io/component: curator
             ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
             app: curator
+            {{- if .Values.curator.podLabels }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.curator.podLabels "context" $) | nindent 8 }}
+            {{- end }}
           {{- if .Values.curator.podAnnotations }}
-          annotations: {{- toYaml .Values.curator.podAnnotations | nindent 12 }}
+          annotations: {{- include "common.tplvalues.render" (dict "value" .Values.curator.podAnnotations "context" $) | nindent 12 }}
           {{- end }}
         spec:
-          volumes:
-            - name: config-volume
-              configMap:
-                name: {{ template "elasticsearch.curator.fullname" . }}
-            {{- if .Values.curator.extraVolumes }}
-            {{- toYaml .Values.curator.extraVolumes | nindent 12 }}
-            {{- end }}
+          {{- include "elasticsearch.imagePullSecrets" . | indent 10 }}
           restartPolicy: {{ .Values.curator.cronjob.jobRestartPolicy }}
           {{- if .Values.curator.priorityClassName }}
           priorityClassName: {{ .Values.curator.priorityClassName | quote }}
           {{- end }}
-{{- include "elasticsearch.imagePullSecrets" . | indent 10 }}
-          {{- $initContainers := coalesce .Values.curator.initContainers .Values.curator.extraInitContainers -}}
-          {{- if $initContainers }}
-          initContainers: {{- include "common.tplvalues.render" (dict "value" $initContainers "context" $) | nindent 8 }}
-          {{- end }}
           {{- if .Values.curator.schedulerName }}
           schedulerName: {{ .Values.curator.schedulerName }}
           {{- end }}
@@ -80,51 +79,63 @@ spec:
           {{- if .Values.curator.topologySpreadConstraints }}
           topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.curator.topologySpreadConstraints "context" $) | nindent 12 }}
           {{- end }}
-          {{- if .Values.curator.securityContext }}
-          securityContext: {{- toYaml .Values.curator.securityContext | nindent 12 }}
+          {{- if .Values.curator.podSecurityContext }}
+          securityContext: {{- toYaml .Values.curator.podSecurityContext | nindent 12 }}
+          {{- end }}
+          {{- if .Values.curator.initContainers }}
+          initContainers: {{- include "common.tplvalues.render" (dict "value" .Values.curator.initContainers "context" $) | nindent 12 }}
           {{- end }}
           containers:
             - name: {{ template "elasticsearch.curator.fullname" . }}
               image: {{ template "elasticsearch.curator.image" . }}
               imagePullPolicy: {{ .Values.curator.image.pullPolicy | quote }}
-              volumeMounts:
-                - name: config-volume
-                  mountPath: /etc/es-curator
-                {{- if .Values.curator.extraVolumeMounts }}
-                {{- toYaml .Values.curator.extraVolumeMounts | nindent 16 }}
-                {{- end }}
-              {{- if .Values.diagnosticMode.enabled }}
-              command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 16 }}
-              {{ else if .Values.curator.command }}
-              command: {{ toYaml .Values.curator.command | nindent 16 }}
+              {{- if .Values.curator.containerSecurityContext.enabled }}
+              securityContext: {{- omit .Values.curator.containerSecurityContext "enabled" | toYaml | nindent 12 }}
+              {{- end }}
+              {{- if .Values.curator.command }}
+              command: {{- include "common.tplvalues.render" (dict "value" .Values.curator.command "context" $) | nindent 16 }}
               {{- end }}
-              {{- if .Values.diagnosticMode.enabled }}
-              args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 16 }}
-              {{- else if .Values.curator.dryrun }}
-              args: [ "--dry-run", "--config", "/etc/es-curator/config.yml", "/etc/es-curator/action_file.yml" ]
+              {{- if .Values.curator.args }}
+              args: {{- include "common.tplvalues.render" (dict "value" .Values.curator.args "context" $) | nindent 16 }}
               {{- else }}
-              args: [ "--config", "/etc/es-curator/config.yml", "/etc/es-curator/action_file.yml" ]
+              args:
+                {{- if .Values.curator.dryRun }}
+                - "--dry-run"
+                {{- end }}
+                - "--config"
+                - "/etc/es-curator/config.yml"
+                - "/etc/es-curator/action_file.yml" ]
               {{- end }}
               env:
-                {{- if .Values.curator.env }}
-                {{- range $key,$value := .Values.curator.env }}
-                - name: {{ $key | upper | quote }}
-                  value: {{ $value | quote }}
-                {{- end }}
+                {{- if .Values.curator.extraEnvVars }}
+                {{- include "common.tplvalues.render" (dict "value" .Values.curator.extraEnvVars "context" $) | nindent 16 }}
                 {{- end }}
-                {{- if .Values.curator.envFromSecrets }}
-                {{- range $key,$value := .Values.curator.envFromSecrets }}
-                - name: {{ $key | upper | quote }}
-                  valueFrom:
-                    secretKeyRef:
-                      name: {{ $value.from.secret | quote }}
-                      key: {{ $value.from.key | quote }}
+              envFrom:
+                {{- if .Values.curator.extraEnvVarsCM }}
+                - configMapRef:
+                    name: {{ include "common.tplvalues.render" (dict "value" .Values.curator.extraEnvVarsCM "context" $) }}
                 {{- end }}
+                {{- if .Values.curator.extraEnvVarsSecret }}
+                - secretRef:
+                    name: {{ include "common.tplvalues.render" (dict "value" .Values.curator.extraEnvVarsSecret "context" $) }}
                 {{- end }}
               {{- if .Values.curator.resources }}
               resources: {{- toYaml .Values.curator.resources | nindent 16 }}
-            {{- end }}
+              {{- end }}
+              volumeMounts:
+                - name: config-volume
+                  mountPath: /etc/es-curator
+                {{- if .Values.curator.extraVolumeMounts }}
+                {{- include "common.tplvalues.render" (dict "value" .Values.curator.extraVolumeMounts "context" $) | nindent 16 }}
+                {{- end }}
             {{- if .Values.curator.sidecars }}
             {{- include "common.tplvalues.render" ( dict "value" .Values.curator.sidecars "context" $) | nindent 12 }}
             {{- end }}
+          volumes:
+            - name: config-volume
+              configMap:
+                name: {{ template "elasticsearch.curator.fullname" . }}
+            {{- if .Values.curator.extraVolumes }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.curator.extraVolumes "context" $) | nindent 12 }}
+            {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/curator/job.yaml b/bitnami/elasticsearch/templates/curator/job.yaml
new file mode 100644
index 0000000000..46bc56dfbd
--- /dev/null
+++ b/bitnami/elasticsearch/templates/curator/job.yaml
@@ -0,0 +1,131 @@
+{{- if $.Values.curator.enabled }}
+{{- range $kind, $enabled := $.Values.curator.hooks }}
+{{- if $enabled }}
+---
+apiVersion: batch/v1
+kind: Job
+metadata:
+  name: {{ printf "%s-curator-on-%s" (include "elasticsearch.curator.fullname" .) $kind }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: curator
+    ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
+    app: curator
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.curator.jobLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.curator.jobLabels "context" $) | nindent 8 }}
+    {{- end }}
+  annotations:
+    "helm.sh/hook": post-{{ $kind }}
+    "helm.sh/hook-weight": "1"
+    {{- if .Values.curator.jobAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.curator.jobAnnotations "context" $) | nindent 12 }}
+    {{- end }}
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+    {{- end }}
+spec:
+  template:
+    metadata:
+      labels: {{- include "common.labels.standard" . | nindent 8 }}
+        app.kubernetes.io/component: curator
+        ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
+        app: curator
+      {{- if $.Values.curator.podAnnotations }}
+      annotations: {{- toYaml $.Values.curator.podAnnotations | nindent 8 }}
+      {{- end }}
+    spec:
+      {{- include "elasticsearch.imagePullSecrets" . | indent 6 }}
+      restartPolicy: Never
+      {{- if $.Values.curator.priorityClassName }}
+      priorityClassName: {{ $.Values.curator.priorityClassName | quote }}
+      {{- end }}
+      {{- if $.Values.curator.schedulerName }}
+      schedulerName: {{ $.Values.curator.schedulerName }}
+      {{- end }}
+      {{- if $.Values.curator.rbac.enabled }}
+      serviceAccountName: {{ include "elasticsearch.curator.serviceAccountName" . }}
+      {{- end }}
+      {{- if $.Values.curator.affinity }}
+      affinity: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.affinity "context" $) | nindent 8 }}
+      {{- else }}
+      affinity:
+        podAffinity: {{- include "common.affinities.pods" (dict "type" $.Values.curator.podAffinityPreset "component" "curator" "context" $) | nindent 10 }}
+        podAntiAffinity: {{- include "common.affinities.pods" (dict "type" $.Values.curator.podAntiAffinityPreset "component" "curator" "context" $) | nindent 10 }}
+        nodeAffinity: {{- include "common.affinities.nodes" (dict "type" $.Values.curator.nodeAffinityPreset.type "key" $.Values.curator.nodeAffinityPreset.key "values" $.Values.curator.nodeAffinityPreset.values) | nindent 14 }}
+      {{- end }}
+      {{- if $.Values.curator.nodeSelector }}
+      nodeSelector: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.nodeSelector "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if $.Values.curator.tolerations }}
+      tolerations: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.tolerations "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if $.Values.curator.topologySpreadConstraints }}
+      topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.topologySpreadConstraints "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if $.Values.curator.podSecurityContext }}
+      securityContext: {{- toYaml $.Values.curator.podSecurityContext | nindent 8 }}
+      {{- end }}
+      {{- if $.Values.curator.initContainers }}
+      initContainers: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.initContainers "context" $) | nindent 8 }}
+      {{- end }}
+      containers:
+        - name: {{ template "elasticsearch.curator.fullname" . }}
+          image: {{ template "elasticsearch.curator.image" . }}
+          imagePullPolicy: {{ $.Values.curator.image.pullPolicy | quote }}
+          {{- if $.Values.curator.containerSecurityContext.enabled }}
+          securityContext: {{- omit $.Values.curator.containerSecurityContext "enabled" | toYaml | nindent 12 }}
+          {{- end }}
+          {{- if $.Values.diagnosticMode.enabled }}
+          command: {{- include "common.tplvalues.render" (dict "value" $.Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else if $.Values.curator.command }}
+          command: {{ toYaml $.Values.curator.command | nindent 12 }}
+          {{- end }}
+          {{- if $.Values.diagnosticMode.enabled }}
+          args: {{- include "common.tplvalues.render" (dict "value" $.Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if $.Values.curator.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.args "context" $) | nindent 12 }}
+          {{- else }}
+          args:
+            {{- if $.Values.curator.dryRun }}
+            - "--dry-run"
+            {{- end }}
+            - "--config"
+            - "/etc/es-curator/config.yml"
+            - "/etc/es-curator/action_file.yml" ]
+          {{- end }}
+          env:
+            {{- if $.Values.curator.extraEnvVars }}
+            {{- include "common.tplvalues.render" (dict "value" $.Values.curator.extraEnvVars "context" $) | nindent 12 }}
+            {{- end }}
+          envFrom:
+            {{- if $.Values.curator.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" (dict "value" $.Values.curator.extraEnvVarsCM "context" $) }}
+            {{- end }}
+            {{- if $.Values.curator.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" (dict "value" $.Values.curator.extraEnvVarsSecret "context" $) }}
+            {{- end }}
+          resources: {{- toYaml $.Values.curator.resources | nindent 12 }}
+          volumeMounts:
+            - name: config-volume
+              mountPath: /etc/es-curator
+           {{- if $.Values.curator.extraVolumeMounts }}
+           {{- toYaml $.Values.curator.extraVolumeMounts | nindent 12 }}
+           {{- end }}
+        {{- if $.Values.curator.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" $.Values.curator.sidecars "context" $) | nindent 12 }}
+        {{- end }}
+      volumes:
+        - name: config-volume
+          configMap:
+            name: {{ template "elasticsearch.curator.fullname" . }}
+        {{- if $.Values.curator.extraVolumes }}
+        {{- toYaml $.Values.curator.extraVolumes | nindent 8 }}
+        {{- end }}
+{{- end }}
+{{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/podsecuritypolicy.yaml b/bitnami/elasticsearch/templates/curator/podsecuritypolicy.yaml
similarity index 69%
rename from bitnami/elasticsearch/templates/podsecuritypolicy.yaml
rename to bitnami/elasticsearch/templates/curator/podsecuritypolicy.yaml
index 2d0a3ff459..f80cf25973 100644
--- a/bitnami/elasticsearch/templates/podsecuritypolicy.yaml
+++ b/bitnami/elasticsearch/templates/curator/podsecuritypolicy.yaml
@@ -4,8 +4,15 @@ apiVersion: policy/v1beta1
 kind: PodSecurityPolicy
 metadata:
   name: {{ include "elasticsearch.curator.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     role: curator
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
 spec:
   privileged: true
   #requiredDropCapabilities:
diff --git a/bitnami/elasticsearch/templates/role.yaml b/bitnami/elasticsearch/templates/curator/role.yaml
similarity index 66%
rename from bitnami/elasticsearch/templates/role.yaml
rename to bitnami/elasticsearch/templates/curator/role.yaml
index 9f34b99688..98516019da 100644
--- a/bitnami/elasticsearch/templates/role.yaml
+++ b/bitnami/elasticsearch/templates/curator/role.yaml
@@ -3,9 +3,16 @@ kind: Role
 apiVersion: {{ include "common.capabilities.rbac.apiVersion" . }}
 metadata:
   name: {{ include "elasticsearch.curator.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     role: curator
     component: elasticsearch-curator-configmap
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
 rules:
   - apiGroups: [""]
     resources: ["configmaps"]
diff --git a/bitnami/elasticsearch/templates/rolebinding.yaml b/bitnami/elasticsearch/templates/curator/rolebinding.yaml
similarity index 90%
rename from bitnami/elasticsearch/templates/rolebinding.yaml
rename to bitnami/elasticsearch/templates/curator/rolebinding.yaml
index 658e028a06..92bfee57f4 100644
--- a/bitnami/elasticsearch/templates/rolebinding.yaml
+++ b/bitnami/elasticsearch/templates/curator/rolebinding.yaml
@@ -13,5 +13,5 @@ roleRef:
 subjects:
   - kind: ServiceAccount
     name: {{ include "elasticsearch.curator.serviceAccountName" . }}
-    namespace: {{ .Release.Namespace }}
+    namespace: {{ include "common.names.namespace" . | quote }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/curator/serviceaccount.yaml b/bitnami/elasticsearch/templates/curator/serviceaccount.yaml
new file mode 100644
index 0000000000..4ae75adc13
--- /dev/null
+++ b/bitnami/elasticsearch/templates/curator/serviceaccount.yaml
@@ -0,0 +1,22 @@
+{{- if and .Values.curator.enabled .Values.curator.serviceAccount.create -}}
+apiVersion: v1
+kind: ServiceAccount
+metadata:
+  name: {{ include "elasticsearch.curator.serviceAccountName" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: curator
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.curator.serviceAccount.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.curator.serviceAccount.annotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.curator.serviceAccount.annotations "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+automountServiceAccountToken: {{ .Values.curator.serviceAccount.automountServiceAccountToken }}
+{{- end -}}
diff --git a/bitnami/elasticsearch/templates/data-svc.yaml b/bitnami/elasticsearch/templates/data-svc.yaml
deleted file mode 100644
index 76039bd09b..0000000000
--- a/bitnami/elasticsearch/templates/data-svc.yaml
+++ /dev/null
@@ -1,20 +0,0 @@
-apiVersion: v1
-kind: Service
-metadata:
-  name: {{ include "elasticsearch.data.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: data
-  annotations: {{ include "common.tplvalues.render" ( dict "value" .Values.data.service.annotations "context" $) | nindent 4 }}
-spec:
-  type: ClusterIP
-  publishNotReadyAddresses: true
-  ports:
-    - name: {{ include "elasticsearch.httpPortName" . }}
-      port: 9200
-      targetPort: {{ include "elasticsearch.httpPortName" . }}
-    - name: tcp-transport
-      port: 9300
-      targetPort: transport
-      nodePort: null
-  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
-    app.kubernetes.io/component: data
diff --git a/bitnami/elasticsearch/templates/data-hpa.yaml b/bitnami/elasticsearch/templates/data/hpa.yaml
similarity index 89%
rename from bitnami/elasticsearch/templates/data-hpa.yaml
rename to bitnami/elasticsearch/templates/data/hpa.yaml
index 67bc687140..a57a986b20 100644
--- a/bitnami/elasticsearch/templates/data-hpa.yaml
+++ b/bitnami/elasticsearch/templates/data/hpa.yaml
@@ -1,9 +1,9 @@
-{{- if .Values.data.autoscaling.enabled }}
+{{- if and (include "elasticsearch.data.enabled" .) .Values.data.autoscaling.enabled }}
 apiVersion: autoscaling/v2beta1
 kind: HorizontalPodAutoscaler
 metadata:
   name: {{ include "elasticsearch.data.fullname" . }}
-  namespace: {{ .Release.Namespace | quote }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: data
     {{- if .Values.commonLabels }}
diff --git a/bitnami/elasticsearch/templates/data/serviceaccount.yaml b/bitnami/elasticsearch/templates/data/serviceaccount.yaml
new file mode 100644
index 0000000000..bd71bd2d93
--- /dev/null
+++ b/bitnami/elasticsearch/templates/data/serviceaccount.yaml
@@ -0,0 +1,22 @@
+{{- if and (include "elasticsearch.data.enabled" .) .Values.data.serviceAccount.create -}}
+apiVersion: v1
+kind: ServiceAccount
+metadata:
+  name: {{ include "elasticsearch.data.serviceAccountName" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: data
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.data.serviceAccount.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.data.serviceAccount.annotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.data.serviceAccount.annotations "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+automountServiceAccountToken: {{ .Values.data.serviceAccount.automountServiceAccountToken }}
+{{- end -}}
diff --git a/bitnami/elasticsearch/templates/data-statefulset.yaml b/bitnami/elasticsearch/templates/data/statefulset.yaml
similarity index 61%
rename from bitnami/elasticsearch/templates/data-statefulset.yaml
rename to bitnami/elasticsearch/templates/data/statefulset.yaml
index f498597047..1a3b8910fd 100644
--- a/bitnami/elasticsearch/templates/data-statefulset.yaml
+++ b/bitnami/elasticsearch/templates/data/statefulset.yaml
@@ -1,28 +1,31 @@
+{{- if (include "elasticsearch.data.enabled" .) }}
 apiVersion: {{ template "common.capabilities.statefulset.apiVersion" . }}
 kind: StatefulSet
 metadata:
   name: {{ include "elasticsearch.data.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: data
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: data
-spec:
-  updateStrategy:
-    type: {{ .Values.data.updateStrategy.type }}
-    {{- if (eq "OnDelete" .Values.data.updateStrategy.type) }}
-    rollingUpdate: null
-    {{- else if .Values.data.updateStrategy.rollingUpdatePartition }}
-    rollingUpdate:
-      partition: {{ .Values.data.updateStrategy.rollingUpdatePartition }}
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+spec:
+  {{- if not .Values.data.autoscaling.enabled }}
+  replicas: {{ .Values.data.replicaCount }}
+  {{- end }}
+  podManagementPolicy: {{ .Values.data.podManagementPolicy }}
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       app.kubernetes.io/component: data
-  podManagementPolicy: Parallel
-  {{- if not .Values.data.autoscaling.enabled }}
-  replicas: {{ .Values.data.replicas }}
+  serviceName: {{ printf "%s-hl" (include "elasticsearch.data.fullname" .) | trunc 63 | trimSuffix "-" }}
+  {{- if .Values.data.updateStrategy }}
+  updateStrategy: {{- toYaml .Values.data.updateStrategy | nindent 4 }}
   {{- end }}
-  serviceName: {{ template "elasticsearch.data.fullname" . }}
   template:
     metadata:
       labels: {{- include "common.labels.standard" . | nindent 8 }}
@@ -40,9 +43,10 @@ spec:
         {{- include "common.tplvalues.render" (dict "value" .Values.data.podAnnotations "context" $) | nindent 8 }}
         {{- end }}
     spec:
+      serviceAccountName: {{ template "elasticsearch.data.serviceAccountName" . }}
       {{- include "elasticsearch.imagePullSecrets" . | nindent 6 }}
-      {{- if .Values.data.priorityClassName }}
-      priorityClassName: {{ .Values.data.priorityClassName | quote }}
+      {{- if .Values.data.hostAliases }}
+      hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.data.hostAliases "context" $) | nindent 8 }}
       {{- end }}
       {{- if .Values.data.affinity }}
       affinity: {{- include "common.tplvalues.render" (dict "value" .Values.data.affinity "context" $) | nindent 8 }}
@@ -52,29 +56,26 @@ spec:
         podAntiAffinity: {{- include "common.affinities.pods" (dict "type" .Values.data.podAntiAffinityPreset "component" "data" "context" $) | nindent 10 }}
         nodeAffinity: {{- include "common.affinities.nodes" (dict "type" .Values.data.nodeAffinityPreset.type "key" .Values.data.nodeAffinityPreset.key "values" .Values.data.nodeAffinityPreset.values) | nindent 10 }}
       {{- end }}
-      {{- if .Values.data.hostAliases }}
-      hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.data.hostAliases "context" $) | nindent 8 }}
-      {{- end }}
-      {{- if .Values.data.schedulerName }}
-      schedulerName: {{ .Values.data.schedulerName }}
-      {{- end }}
       {{- if .Values.data.nodeSelector }}
       nodeSelector: {{- include "common.tplvalues.render" (dict "value" .Values.data.nodeSelector "context" $) | nindent 8 }}
       {{- end }}
       {{- if .Values.data.tolerations }}
       tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.data.tolerations "context" $) | nindent 8 }}
       {{- end }}
+      {{- if .Values.data.schedulerName }}
+      schedulerName: {{ .Values.data.schedulerName }}
+      {{- end }}
       {{- if .Values.data.topologySpreadConstraints }}
       topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.data.topologySpreadConstraints "context" $) | nindent 8 }}
       {{- end }}
-      serviceAccountName: {{ template "elasticsearch.data.serviceAccountName" . }}
-      {{- if or .Values.data.podSecurityContext.enabled .Values.data.securityContext.enabled }}
-      securityContext:
-        {{- if .Values.data.podSecurityContext.enabled }}
-        {{- omit .Values.data.podSecurityContext "enabled" | toYaml | nindent 8 }}
-        {{- else }}
-        fsGroup: {{ .Values.data.securityContext.fsGroup }}
-        {{- end }}
+      {{- if .Values.data.priorityClassName }}
+      priorityClassName: {{ .Values.data.priorityClassName | quote }}
+      {{- end }}
+      {{- if .Values.data.podSecurityContext.enabled }}
+      securityContext: {{- omit .Values.data.podSecurityContext "enabled" | toYaml | nindent 8 }}
+      {{- end }}
+      {{- if .Values.data.terminationGracePeriodSeconds }}
+      terminationGracePeriodSeconds: {{ .Values.data.terminationGracePeriodSeconds }}
       {{- end }}
       {{- if or .Values.data.initContainers .Values.sysctlImage.enabled (and .Values.volumePermissions.enabled .Values.data.persistence.enabled) }}
       initContainers:
@@ -103,7 +104,9 @@ spec:
             - /bin/bash
             - -ec
             - |
-              chown -R {{ .Values.data.securityContext.runAsUser }}:{{ .Values.data.securityContext.fsGroup }} //bitnami/elasticsearch/data
+              mkdir -p /bitnami/elasticsearch/data
+              chown {{ .Values.data.containerSecurityContext.runAsUser }}:{{ .Values.data.podSecurityContext.fsGroup }} /bitnami/elasticsearch/data
+              find /bitnami/elasticsearch/data -mindepth 1 -maxdepth 1 -not -name ".snapshot" -not -name "lost+found" | xargs chown -R {{ .Values.data.containerSecurityContext.runAsUser }}:{{ .Values.data.podSecurityContext.fsGroup }}
           securityContext:
             runAsUser: 0
           {{- if .Values.volumePermissions.resources }}
@@ -111,42 +114,65 @@ spec:
           {{- end }}
           volumeMounts:
             - name: data
-              mountPath: "/bitnami/elasticsearch/data"
+              mountPath: /bitnami/elasticsearch/data
         {{- end }}
         {{- if .Values.data.initContainers }}
         {{- include "common.tplvalues.render" (dict "value" .Values.data.initContainers "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.initContainers }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.initContainers "context" $) | nindent 8 }}
+        {{- end }}
       {{- end }}
       containers:
         - name: elasticsearch
           image: {{ include "elasticsearch.image" . }}
           imagePullPolicy: {{ .Values.image.pullPolicy | quote }}
-          {{- if or .Values.data.containerSecurityContext.enabled .Values.data.securityContext.enabled }}
-          securityContext:
-            {{- if .Values.data.containerSecurityContext.enabled }}
-            {{- omit .Values.data.containerSecurityContext "enabled" | toYaml | nindent 12 }}
-            {{- else }}
-            runAsUser: {{ .Values.data.securityContext.runAsUser }}
-            {{- end }}
+          {{- if .Values.data.containerSecurityContext.enabled }}
+          securityContext: {{- omit .Values.data.containerSecurityContext "enabled" | toYaml | nindent 12 }}
           {{- end }}
           {{- if .Values.diagnosticMode.enabled }}
           command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else if .Values.data.command }}
+          command: {{- include "common.tplvalues.render" (dict "value" .Values.data.command "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.diagnosticMode.enabled }}
           args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if .Values.data.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" .Values.data.args "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.data.lifecycleHooks }}
+          lifecycle: {{- include "common.tplvalues.render" (dict "value" .Values.data.lifecycleHooks "context" $) | nindent 12 }}
           {{- end }}
           env:
+            - name: BITNAMI_DEBUG
+              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
             - name: MY_POD_NAME
               valueFrom:
                 fieldRef:
                   fieldPath: metadata.name
-            - name: BITNAMI_DEBUG
-              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
+            - name: ELASTICSEARCH_IS_DEDICATED_NODE
+              value: "yes"
+            - name: ELASTICSEARCH_NODE_ROLES
+              value: "data"
+            - name: ELASTICSEARCH_TRANSPORT_PORT_NUMBER
+              value: {{ .Values.containerPorts.transport | quote }}
+            - name: ELASTICSEARCH_HTTP_PORT_NUMBER
+              value: {{ .Values.containerPorts.restAPI | quote }}
             - name: ELASTICSEARCH_CLUSTER_NAME
-              value: {{ .Values.name | quote }}
+              value: {{ .Values.clusterName | quote }}
             - name: ELASTICSEARCH_CLUSTER_HOSTS
               value: {{ include "elasticsearch.hosts" . | quote }}
             - name: ELASTICSEARCH_TOTAL_NODES
-              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicas .Values.data.autoscaling.enabled) | quote }}
-            {{- if .Values.plugins }}
+              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicaCount .Values.data.autoscaling.enabled) | quote }}
+            - name: ELASTICSEARCH_CLUSTER_MASTER_HOSTS
+              {{- $elasticsearchMasterFullname := include "elasticsearch.master.fullname" . }}
+              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) }}
+              value: {{ range $i, $e := until $replicas }}{{ printf "%s-%d" $elasticsearchMasterFullname $e }} {{ end }}
+            - name: ELASTICSEARCH_MINIMUM_MASTER_NODES
+              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) 2) 1 | quote }}
+            - name: ELASTICSEARCH_ADVERTISED_HOSTNAME
+              value: "$(MY_POD_NAME).{{ printf "%s-hl" (include "elasticsearch.data.fullname" .) | trunc 63 | trimSuffix "-" }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}"
+              {{- if .Values.plugins }}
             - name: ELASTICSEARCH_PLUGINS
               value: {{ .Values.plugins | quote }}
             {{- end }}
@@ -154,25 +180,32 @@ spec:
             - name: ELASTICSEARCH_FS_SNAPSHOT_REPO_PATH
               value: {{ .Values.snapshotRepoPath | quote }}
             {{- end }}
+            {{- if .Values.data.heapSize }}
             - name: ELASTICSEARCH_HEAP_SIZE
               value: {{ .Values.data.heapSize | quote }}
-            - name: ELASTICSEARCH_IS_DEDICATED_NODE
-              value: "yes"
-            - name: ELASTICSEARCH_NODE_TYPE
-              value: "data"
-            - name: ELASTICSEARCH_ADVERTISED_HOSTNAME
-              value: "$(MY_POD_NAME).{{ include "elasticsearch.data.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}"
+            {{- end }}
             {{- if .Values.security.enabled }}
             {{- include "elasticsearch.configure.security" . | nindent 12 }}
             {{- end }}
+            {{- if .Values.data.extraEnvVars }}
+            {{- include "common.tplvalues.render" ( dict "value" .Values.data.extraEnvVars "context" $ ) | nindent 12 }}
+            {{- end }}
             {{- if .Values.extraEnvVars }}
             {{- include "common.tplvalues.render" ( dict "value" .Values.extraEnvVars "context" $ ) | nindent 12 }}
             {{- end }}
-          {{- if or .Values.extraEnvVarsConfigMap .Values.extraEnvVarsSecret }}
+          {{- if or .Values.extraEnvVarsCM .Values.extraEnvVarsSecret .Values.data.extraEnvVarsCM .Values.data.extraEnvVarsSecret }}
           envFrom:
-            {{- if .Values.extraEnvVarsConfigMap }}
+            {{- if .Values.data.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.data.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.data.extraEnvVarsCM }}
             - configMapRef:
-                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsConfigMap "context" $ ) }}
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.data.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsSecret "context" $ ) }}
             {{- end }}
             {{- if .Values.extraEnvVarsSecret }}
             - secretRef:
@@ -180,31 +213,20 @@ spec:
             {{- end }}
           {{- end }}
           ports:
-            - name: {{ include "elasticsearch.httpPortName" . }}
-              containerPort: 9200
+            - name: rest-api
+              containerPort: {{ .Values.containerPorts.restAPI }}
             - name: transport
-              containerPort: 9300
+              containerPort: {{ .Values.containerPorts.transport }}
           {{- if not .Values.diagnosticMode.enabled }}
           {{- if .Values.data.startupProbe.enabled }}
-          startupProbe:
-            initialDelaySeconds: {{ .Values.data.startupProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.data.startupProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.data.startupProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.data.startupProbe.successThreshold }}
-            failureThreshold: {{ .Values.data.startupProbe.failureThreshold }}
-            exec:
-              command:
-                - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
+          startupProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.data.startupProbe "enabled") "context" $) | nindent 12 }}
+            tcpSocket:
+              port: rest-api
           {{- else if .Values.data.customStartupProbe }}
           startupProbe: {{- include "common.tplvalues.render" (dict "value" .Values.data.customStartupProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.data.livenessProbe.enabled }}
-          livenessProbe:
-            initialDelaySeconds: {{ .Values.data.livenessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.data.livenessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.data.livenessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.data.livenessProbe.successThreshold }}
-            failureThreshold: {{ .Values.data.livenessProbe.failureThreshold }}
+          livenessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.data.livenessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -212,12 +234,7 @@ spec:
           livenessProbe: {{- include "common.tplvalues.render" (dict "value" .Values.data.customLivenessProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.data.readinessProbe.enabled }}
-          readinessProbe:
-            initialDelaySeconds: {{ .Values.data.readinessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.data.readinessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.data.readinessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.data.readinessProbe.successThreshold }}
-            failureThreshold: {{ .Values.data.readinessProbe.failureThreshold }}
+          readinessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.data.readinessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -229,9 +246,11 @@ spec:
           resources: {{- toYaml .Values.data.resources | nindent 12 }}
           {{- end }}
           volumeMounts:
+            - name: data
+              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.config }}
             - mountPath: /opt/bitnami/elasticsearch/config/elasticsearch.yml
-              name: "config"
+              name: config
               subPath: elasticsearch.yml
             {{- end }}
             {{- if .Values.extraConfig }}
@@ -239,16 +258,11 @@ spec:
               name: config
               subPath: my_elasticsearch.yml
             {{- end }}
-            - name: "data"
-              mountPath: "/bitnami/elasticsearch/data"
             {{- if .Values.security.enabled }}
             - name: elasticsearch-certificates
               mountPath: /opt/bitnami/elasticsearch/config/certs
               readOnly: true
             {{- end }}
-            {{- if .Values.extraVolumeMounts }}
-            {{- toYaml .Values.extraVolumeMounts | nindent 12 }}
-            {{- end }}
             {{- if .Values.initScripts }}
             - name: custom-init-scripts
               mountPath: /docker-entrypoint-initdb.d/init-scripts
@@ -261,24 +275,30 @@ spec:
             - name: custom-init-scripts-secret
               mountPath: /docker-entrypoint-initdb.d/init-scripts-secret
             {{- end }}
+            {{- if .Values.data.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.data.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
+            {{- if .Values.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
         {{- if .Values.data.sidecars }}
         {{- include "common.tplvalues.render" ( dict "value" .Values.data.sidecars "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" .Values.sidecars "context" $) | nindent 8 }}
+        {{- end }}
       volumes:
         {{- if or .Values.config .Values.extraConfig }}
-        - name: "config"
+        - name: config
           configMap:
             name: {{ template "common.names.fullname" . }}
         {{- end }}
         {{- if .Values.security.enabled }}
         - name: elasticsearch-certificates
           secret:
-            secretName: {{ include "elasticsearch.data.tlsSecretName" . }}
+            secretName: {{ template "elasticsearch.data.tlsSecretName" . }}
             defaultMode: 256
         {{- end }}
-        {{- if .Values.extraVolumes }}
-        {{- toYaml .Values.extraVolumes | nindent 8 }}
-        {{- end }}
         {{- if .Values.initScripts }}
         - name: custom-init-scripts
           configMap:
@@ -295,24 +315,38 @@ spec:
             secretName: {{ template "elasticsearch.initScriptsSecret" . }}
             defaultMode: 0755
         {{- end }}
-{{- if not .Values.data.persistence.enabled }}
+        {{- if .Values.data.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.data.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+        {{- if .Values.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+  {{- if not .Values.data.persistence.enabled }}
         - name: "data"
           emptyDir: {}
-{{- else if .Values.data.persistence.existingClaim }}
+  {{- else if .Values.data.persistence.existingClaim }}
         - name: "data"
           persistentVolumeClaim:
             claimName: {{ .Values.data.persistence.existingClaim }}
-{{- else }}
+  {{- else }}
   volumeClaimTemplates:
     - metadata:
         name: "data"
-        {{- if .Values.data.persistence.annotations }}
-        annotations: {{- toYaml .Values.data.persistence.annotations | nindent 10 }}
+        annotations:
+          {{- if .Values.data.persistence.annotations }}
+          {{- include "common.tplvalues.render" (dict "value" .Values.data.persistence.annotations "context" $) | nindent 10 }}
+          {{- end }}
+          {{- if .Values.commonAnnotations }}
+          {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 10 }}
+          {{- end }}
+        {{- if .Values.commonLabels }}
+        labels: {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 10 }}
         {{- end }}
       spec:
-        accessModes: {{- toYaml .Values.data.persistence.accessModes | nindent 10 }}
-        {{ $storage := dict "global" .Values.global "local" .Values.data }}
-        {{ include "elasticsearch.storageClass" $storage }}
+        accessModes:
+          {{- range .Values.data.persistence.accessModes }}
+          - {{ . | quote }}
+          {{- end }}
         resources:
           requests:
             storage: {{ .Values.data.persistence.size | quote }}
@@ -323,4 +357,6 @@ spec:
           matchLabels:
             volume: {{ .Values.data.persistence.existingVolume }}
         {{- end }}
+        {{- include "common.storage.class" (dict "persistence" .Values.data.persistence "global" .Values.global) | nindent 8 }}
+  {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/data/svc-headless.yaml b/bitnami/elasticsearch/templates/data/svc-headless.yaml
new file mode 100644
index 0000000000..22c8baa180
--- /dev/null
+++ b/bitnami/elasticsearch/templates/data/svc-headless.yaml
@@ -0,0 +1,28 @@
+{{- if (include "elasticsearch.data.enabled" .) }}
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ printf "%s-hl" (include "elasticsearch.data.fullname" .) | trunc 63 | trimSuffix "-" }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: data
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+  {{- end }}
+spec:
+  type: ClusterIP
+  clusterIP: None
+  publishNotReadyAddresses: true
+  ports:
+    - name: tcp-rest-api
+      port: {{ .Values.containerPorts.restAPI }}
+      targetPort: rest-api
+    - name: tcp-transport
+      port: {{ .Values.containerPorts.transport }}
+      targetPort: transport
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    app.kubernetes.io/component: data
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/hooks/job.install.yaml b/bitnami/elasticsearch/templates/hooks/job.install.yaml
deleted file mode 100644
index e6555371cd..0000000000
--- a/bitnami/elasticsearch/templates/hooks/job.install.yaml
+++ /dev/null
@@ -1,73 +0,0 @@
-{{- if .Values.curator.enabled }}
-{{- range $kind, $enabled := .Values.curator.hooks }}
-{{- if $enabled }}
----
-apiVersion: batch/v1
-kind: Job
-metadata:
-  name: {{ template "elasticsearch.curator.fullname" . }}-curator-on-{{ $kind }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: curator
-    ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
-    app: curator
-  annotations:
-    "helm.sh/hook": post-{{ $kind }}
-    "helm.sh/hook-weight": "1"
-    {{- if $.Values.cronjob.annotations }}
-    {{- toYaml $.Values.cronjob.annotations | nindent 4 }}
-    {{- end }}
-spec:
- template:
-    metadata:
-      labels: {{- include "common.labels.standard" . | nindent 10 }}
-        app.kubernetes.io/component: curator
-        ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
-        app: curator
-      {{- if $.Values.podAnnotations }}
-      annotations: {{- toYaml $.Values.podAnnotations | nindent 8 }}
-      {{- end }}
-    spec:
-      restartPolicy: Never
-      {{- if $.Values.curator.priorityClassName }}
-      priorityClassName: {{ $.Values.curator.priorityClassName | quote }}
-      {{- end }}
-      {{- if .Values.curator.schedulerName }}
-      schedulerName: {{ .Values.curator.schedulerName }}
-      {{- end }}
-      {{- if $.Values.curator.affinity }}
-      affinity: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.affinity "context" $) | nindent 8 }}
-      {{- end }}
-      {{- if $.Values.curator.nodeSelector }}
-      nodeSelector: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.nodeSelector "context" $) | nindent 8 }}
-      {{- end }}
-      {{- if $.Values.curator.tolerations }}
-      tolerations: {{- include "common.tplvalues.render" (dict "value" $.Values.curator.tolerations "context" $) | nindent 8 }}
-      {{- end }}
-      containers:
-        - name: {{ template "elasticsearch.curator.fullname" . }}
-          image: {{ template "elasticsearch.curator.image" . }}
-          imagePullPolicy: {{ .Values.curator.image.pullPolicy | quote }}
-          {{- if .Values.diagnosticMode.enabled }}
-          command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
-          args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
-          {{- else }}
-          command: [ "curator" ]
-          args: [ "--config", "/etc/es-curator/config.yml", "/etc/es-curator/action_file.yml" ]
-          {{- end }}
-          resources: {{- toYaml $.Values.curator.resources | nindent 12 }}
-          volumeMounts:
-            - name: config-volume
-              mountPath: /etc/es-curator
-           {{- if $.Values.curator.extraVolumeMounts }}
-           {{- toYaml $.Values.curator.extraVolumeMounts | nindent 12 }}
-           {{- end }}
-      volumes:
-        - name: config-volume
-          configMap:
-            name: {{ template "elasticsearch.curator.fullname" . }}
-        {{- if $.Values.curator.extraVolumes }}
-        {{- toYaml $.Values.curator.extraVolumes | nindent 8 }}
-        {{- end }}
-{{- end }}
-{{- end }}
-{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest-svc.yaml b/bitnami/elasticsearch/templates/ingest-svc.yaml
deleted file mode 100644
index 5527dcbe84..0000000000
--- a/bitnami/elasticsearch/templates/ingest-svc.yaml
+++ /dev/null
@@ -1,29 +0,0 @@
-{{- if .Values.ingest.enabled }}
-apiVersion: v1
-kind: Service
-metadata:
-  name: {{ include "elasticsearch.ingest.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: ingest
-  annotations: {{ include "common.tplvalues.render" ( dict "value" .Values.ingest.service.annotations "context" $) | nindent 4 }}
-spec:
-  type: {{ .Values.ingest.service.type | quote }}
-  {{- if and (eq .Values.ingest.service.type "LoadBalancer") (not (empty .Values.ingest.service.loadBalancerIP)) }}
-  loadBalancerIP: {{ .Values.ingest.service.loadBalancerIP }}
-  {{- end }}
-  publishNotReadyAddresses: true
-  ports:
-    - name: {{ include "elasticsearch.httpPortName" . }}
-      port: 9200
-      targetPort: {{ include "elasticsearch.httpPortName" . }}
-    - name: tcp-transport
-      port: {{ .Values.ingest.service.port }}
-      targetPort: transport
-      {{- if and (or (eq .Values.ingest.service.type "NodePort") (eq .Values.ingest.service.type "LoadBalancer")) (not (empty .Values.ingest.service.nodePort)) }}
-      nodePort: {{ .Values.ingest.service.nodePort }}
-      {{- else if eq .Values.ingest.service.type "ClusterIP" }}
-      nodePort: null
-      {{- end }}
-  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
-    app.kubernetes.io/component: ingest
-{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest/hpa.yaml b/bitnami/elasticsearch/templates/ingest/hpa.yaml
new file mode 100644
index 0000000000..08540067fc
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingest/hpa.yaml
@@ -0,0 +1,35 @@
+{{- if and (include "elasticsearch.ingest.enabled" .) .Values.ingest.autoscaling.enabled }}
+apiVersion: autoscaling/v2beta1
+kind: HorizontalPodAutoscaler
+metadata:
+  name: {{ include "elasticsearch.ingest.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+spec:
+  scaleTargetRef:
+    apiVersion: {{ template "common.capabilities.statefulset.apiVersion" . }}
+    kind: StatefulSet
+    name: {{ include "elasticsearch.ingest.fullname" . }}
+  minReplicas: {{ .Values.ingest.autoscaling.minReplicas }}
+  maxReplicas: {{ .Values.ingest.autoscaling.maxReplicas }}
+  metrics:
+    {{- if .Values.ingest.autoscaling.targetCPU }}
+    - type: Resource
+      resource:
+        name: cpu
+        targetAverageUtilization: {{ .Values.ingest.autoscaling.targetCPU }}
+    {{- end }}
+    {{- if .Values.ingest.autoscaling.targetMemory }}
+    - type: Resource
+      resource:
+        name: memory
+        targetAverageUtilization: {{ .Values.ingest.autoscaling.targetMemory }}
+    {{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest/ingress.yaml b/bitnami/elasticsearch/templates/ingest/ingress.yaml
new file mode 100644
index 0000000000..9edc9dbbcc
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingest/ingress.yaml
@@ -0,0 +1,65 @@
+{{- if and (include "elasticsearch.ingest.enabled" .) .Values.ingest.service.enabled .Values.ingest.ingress.enabled }}
+apiVersion: {{ include "common.capabilities.ingress.apiVersion" . }}
+kind: Ingress
+metadata:
+  name: {{ include "common.names.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+      app.kubernetes.io/component: elasticsearch
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.ingest.ingress.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.ingest.ingress.annotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.ingest.ingress.annotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+spec:
+  {{- if and .Values.ingest.ingress.ingressClassName (eq "true" (include "common.ingress.supportsIngressClassname" .)) }}
+  ingressClassName: {{ .Values.ingest.ingress.ingressClassName | quote }}
+  {{- end }}
+  rules:
+    {{- if .Values.ingest.ingress.hostname }}
+    - http:
+      {{- if ne .Values.ingest.ingress.hostname "*" }}
+      host: {{ .Values.ingest.ingress.hostname }}
+      {{- end }}
+        paths:
+          {{- if .Values.ingest.ingress.extraPaths }}
+          {{- toYaml .Values.ingest.ingress.extraPaths | nindent 10 }}
+          {{- end }}
+          - path: {{ .Values.ingest.ingress.path }}
+            {{- if eq "true" (include "common.ingress.supportsPathType" .) }}
+            pathType: {{ .Values.ingest.ingress.pathType }}
+            {{- end }}
+            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "common.names.fullname" .) "servicePort" "restAPI" "context" $)  | nindent 14 }}
+    {{- end }}
+    {{- range .Values.ingest.ingress.extraHosts }}
+    - host: {{ .name }}
+      http:
+        paths:
+          - path: {{ default "/" .path }}
+            {{- if eq "true" (include "common.ingress.supportsPathType" $) }}
+            pathType: {{ default "ImplementationSpecific" .pathType }}
+            {{- end }}
+            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "common.names.fullname" $) "servicePort" "restAPI" "context" $) | nindent 14 }}
+    {{- end }}
+    {{- if .Values.ingest.ingress.extraRules }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.ingest.ingress.extraRules "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if or (and .Values.ingest.ingress.tls (or (include "common.ingress.certManagerRequest" ( dict "annotations" .Values.ingest.ingress.annotations )) .Values.ingest.ingress.selfSigned)) .Values.ingest.ingress.extraTls }}
+  tls:
+    {{- if and .Values.ingest.ingress.tls (or (include "common.ingress.certManagerRequest" ( dict "annotations" .Values.ingest.ingress.annotations )) .Values.ingest.ingress.selfSigned) }}
+    - hosts:
+        - {{ .Values.ingest.ingress.hostname | quote }}
+      secretName: {{ printf "%s-tls" .Values.ingest.ingress.hostname }}
+    {{- end }}
+    {{- if .Values.ingest.ingress.extraTls }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.ingest.ingress.extraTls "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest/service.yaml b/bitnami/elasticsearch/templates/ingest/service.yaml
new file mode 100644
index 0000000000..4e671d6a8b
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingest/service.yaml
@@ -0,0 +1,60 @@
+{{- if and (include "elasticsearch.ingest.enabled" .) .Values.ingest.service.enabled }}
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ include "common.names.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.ingest.service.annotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.ingest.service.annotations "context" $) | nindent 4 }}
+    {{- end }}
+spec:
+  type: {{ .Values.ingest.service.type }}
+  {{- if and .Values.ingest.service.clusterIP (eq .Values.ingest.service.type "ClusterIP") }}
+  clusterIP: {{ .Values.ingest.service.clusterIP }}
+  {{- end }}
+  {{- if or (eq .Values.ingest.service.type "LoadBalancer") (eq .Values.ingest.service.type "NodePort") }}
+  externalTrafficPolicy: {{ .Values.ingest.service.externalTrafficPolicy | quote }}
+  {{- end }}
+  {{- if and (eq .Values.ingest.service.type "LoadBalancer") .Values.ingest.service.loadBalancerSourceRanges }}
+  loadBalancerSourceRanges: {{- toYaml .Values.ingest.service.loadBalancerSourceRanges | nindent 4 }}
+  {{- end }}
+  {{- if (and (eq .Values.ingest.service.type "LoadBalancer") (not (empty .Values.ingest.service.loadBalancerIP))) }}
+  loadBalancerIP: {{ .Values.ingest.service.loadBalancerIP }}
+  {{- end }}
+  {{- if .Values.ingest.service.sessionAffinity }}
+  sessionAffinity: {{ .Values.ingest.service.sessionAffinity }}
+  {{- end }}
+  {{- if .Values.ingest.service.sessionAffinityConfig }}
+  sessionAffinityConfig: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.service.sessionAffinityConfig "context" $) | nindent 4 }}
+  {{- end }}
+  ports:
+    - name: tcp-rest-api
+      port: {{ .Values.ingest.service.ports.restAPI }}
+      targetPort: rest-api
+      {{- if and (or (eq .Values.ingest.service.type "NodePort") (eq .Values.ingest.service.type "LoadBalancer")) (not (empty .Values.ingest.service.nodePorts.restAPI)) }}
+      nodePort: {{ .Values.ingest.service.nodePorts.restAPI }}
+      {{- else if eq .Values.ingest.service.type "ClusterIP" }}
+      nodePort: null
+      {{- end }}
+    - name: tcp-transport
+      port: {{ .Values.ingest.service.ports.transport }}
+      {{- if and (or (eq .Values.ingest.service.type "NodePort") (eq .Values.ingest.service.type "LoadBalancer")) (not (empty .Values.ingest.service.nodePorts.transport)) }}
+      nodePort: {{ .Values.ingest.service.nodePorts.transport }}
+      {{- else if eq .Values.ingest.service.type "ClusterIP" }}
+      nodePort: null
+      {{- end }}
+    {{- if .Values.ingest.service.extraPorts }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.ingest.service.extraPorts "context" $) | nindent 4 }}
+    {{- end }}
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest/serviceaccount.yaml b/bitnami/elasticsearch/templates/ingest/serviceaccount.yaml
new file mode 100644
index 0000000000..a3bff38166
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingest/serviceaccount.yaml
@@ -0,0 +1,22 @@
+{{- if and (include "elasticsearch.ingest.enabled" .) .Values.ingest.serviceAccount.create -}}
+apiVersion: v1
+kind: ServiceAccount
+metadata:
+  name: {{ include "elasticsearch.ingest.serviceAccountName" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.ingest.serviceAccount.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.ingest.serviceAccount.annotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.ingest.serviceAccount.annotations "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+automountServiceAccountToken: {{ .Values.ingest.serviceAccount.automountServiceAccountToken }}
+{{- end -}}
diff --git a/bitnami/elasticsearch/templates/ingest-statefulset.yaml b/bitnami/elasticsearch/templates/ingest/statefulset.yaml
similarity index 65%
rename from bitnami/elasticsearch/templates/ingest-statefulset.yaml
rename to bitnami/elasticsearch/templates/ingest/statefulset.yaml
index e467f40deb..7870bf8554 100644
--- a/bitnami/elasticsearch/templates/ingest-statefulset.yaml
+++ b/bitnami/elasticsearch/templates/ingest/statefulset.yaml
@@ -1,24 +1,31 @@
-{{- if .Values.ingest.enabled }}
+{{- if (include "elasticsearch.ingest.enabled" . ) }}
 apiVersion: {{ template "common.capabilities.statefulset.apiVersion" . }}
 kind: StatefulSet
 metadata:
   name: {{ include "elasticsearch.ingest.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: ingest
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: ingest
-spec:
-  updateStrategy:
-    type: {{ .Values.ingest.updateStrategy.type }}
-    {{- if (eq "OnDelete" .Values.ingest.updateStrategy.type) }}
-    rollingUpdate: null
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+spec:
+  {{- if not .Values.ingest.autoscaling.enabled }}
+  replicas: {{ .Values.ingest.replicaCount }}
+  {{- end }}
+  podManagementPolicy: {{ .Values.ingest.podManagementPolicy }}
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       app.kubernetes.io/component: ingest
-  podManagementPolicy: Parallel
-  replicas: {{ .Values.ingest.replicas }}
-  serviceName: {{ template "elasticsearch.ingest.fullname" . }}
+  serviceName: {{ printf "%s-hl" (include "elasticsearch.ingest.fullname" .) | trunc 63 | trimSuffix "-" }}
+  {{- if .Values.ingest.updateStrategy }}
+  updateStrategy: {{- toYaml .Values.ingest.updateStrategy | nindent 4 }}
+  {{- end }}
   template:
     metadata:
       labels: {{- include "common.labels.standard" . | nindent 8 }}
@@ -36,16 +43,11 @@ spec:
         {{- include "common.tplvalues.render" (dict "value" .Values.ingest.podAnnotations "context" $) | nindent 8 }}
         {{- end }}
     spec:
+      serviceAccountName: {{ template "elasticsearch.ingest.serviceAccountName" . }}
       {{- include "elasticsearch.imagePullSecrets" . | nindent 6 }}
       {{- if .Values.ingest.hostAliases }}
       hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.hostAliases "context" $) | nindent 8 }}
       {{- end }}
-      {{- if .Values.ingest.schedulerName }}
-      schedulerName: {{ .Values.ingest.schedulerName }}
-      {{- end }}
-      {{- if .Values.ingest.priorityClassName }}
-      priorityClassName: {{ .Values.ingest.priorityClassName | quote }}
-      {{- end }}
       {{- if .Values.ingest.affinity }}
       affinity: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.affinity "context" $) | nindent 8 }}
       {{- else }}
@@ -60,17 +62,20 @@ spec:
       {{- if .Values.ingest.tolerations }}
       tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.tolerations "context" $) | nindent 8 }}
       {{- end }}
+      {{- if .Values.ingest.schedulerName }}
+      schedulerName: {{ .Values.ingest.schedulerName }}
+      {{- end }}
       {{- if .Values.ingest.topologySpreadConstraints }}
       topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.topologySpreadConstraints "context" $) | nindent 8 }}
       {{- end }}
-      serviceAccountName: {{ template "elasticsearch.ingest.serviceAccountName" . }}
-      {{- if or .Values.ingest.podSecurityContext.enabled .Values.ingest.securityContext.enabled }}
-      securityContext:
-        {{- if .Values.ingest.podSecurityContext.enabled }}
-        {{- omit .Values.ingest.podSecurityContext "enabled" | toYaml | nindent 8 }}
-        {{- else }}
-        fsGroup: {{ .Values.ingest.securityContext.fsGroup }}
-        {{- end }}
+      {{- if .Values.ingest.priorityClassName }}
+      priorityClassName: {{ .Values.ingest.priorityClassName | quote }}
+      {{- end }}
+      {{- if .Values.ingest.podSecurityContext.enabled }}
+      securityContext: {{- omit .Values.ingest.podSecurityContext "enabled" | toYaml | nindent 8 }}
+      {{- end }}
+      {{- if .Values.ingest.terminationGracePeriodSeconds }}
+      terminationGracePeriodSeconds: {{ .Values.ingest.terminationGracePeriodSeconds }}
       {{- end }}
       {{- if or .Values.ingest.initContainers  .Values.sysctlImage.enabled }}
       initContainers:
@@ -94,65 +99,89 @@ spec:
         {{- if .Values.ingest.initContainers }}
         {{- include "common.tplvalues.render" (dict "value" .Values.ingest.initContainers "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.initContainers }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.initContainers "context" $) | nindent 8 }}
+        {{- end }}
       {{- end }}
       containers:
         - name: elasticsearch
           image: {{ include "elasticsearch.image" . }}
           imagePullPolicy: {{ .Values.image.pullPolicy | quote }}
-          {{- if or .Values.ingest.containerSecurityContext.enabled .Values.ingest.securityContext.enabled }}
-          securityContext:
-            {{- if .Values.ingest.containerSecurityContext.enabled }}
-            {{- omit .Values.ingest.containerSecurityContext "enabled" | toYaml | nindent 12 }}
-            {{- else }}
-            runAsUser: {{ .Values.ingest.securityContext.runAsUser }}
-            {{- end }}
+          {{- if .Values.ingest.containerSecurityContext.enabled }}
+          securityContext: {{- omit .Values.ingest.containerSecurityContext "enabled" | toYaml | nindent 12 }}
           {{- end }}
           {{- if .Values.diagnosticMode.enabled }}
           command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else if .Values.ingest.command }}
+          command: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.command "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.diagnosticMode.enabled }}
           args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if .Values.ingest.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.args "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.ingest.lifecycleHooks }}
+          lifecycle: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.lifecycleHooks "context" $) | nindent 12 }}
           {{- end }}
           env:
+            - name: BITNAMI_DEBUG
+              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
             - name: MY_POD_NAME
               valueFrom:
                 fieldRef:
                   fieldPath: metadata.name
-            - name: BITNAMI_DEBUG
-              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
+            - name: ELASTICSEARCH_IS_DEDICATED_NODE
+              value: "yes"
+            - name: ELASTICSEARCH_NODE_ROLES
+              value: "ingest"
+            - name: ELASTICSEARCH_TRANSPORT_PORT_NUMBER
+              value: {{ .Values.containerPorts.transport | quote }}
+            - name: ELASTICSEARCH_HTTP_PORT_NUMBER
+              value: {{ .Values.containerPorts.restAPI | quote }}
             - name: ELASTICSEARCH_CLUSTER_NAME
-              value: {{ .Values.name | quote }}
+              value: {{ .Values.clusterName | quote }}
             - name: ELASTICSEARCH_CLUSTER_HOSTS
               value: {{ include "elasticsearch.hosts" . | quote }}
             - name: ELASTICSEARCH_TOTAL_NODES
-              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas (eq .Values.master.autoscaling.enabled true)) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicas (eq .Values.data.autoscaling.enabled true)) | quote }}
+              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicaCount .Values.data.autoscaling.enabled) | quote }}
             - name: ELASTICSEARCH_CLUSTER_MASTER_HOSTS
               {{- $elasticsearchMasterFullname := include "elasticsearch.master.fullname" . }}
-              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas (eq .Values.master.autoscaling.enabled true)) }}
-              value: {{ range $i, $e := until $replicas }}{{ $elasticsearchMasterFullname }}-{{ $e }} {{ end }}
+              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) }}
+              value: {{ range $i, $e := until $replicas }}{{ printf "%s-%d" $elasticsearchMasterFullname $e }} {{ end }}
             - name: ELASTICSEARCH_MINIMUM_MASTER_NODES
-              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas (eq .Values.master.autoscaling.enabled true)) 2) 1 | quote }}
+              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) 2) 1 | quote }}
             - name: ELASTICSEARCH_ADVERTISED_HOSTNAME
-              value: "$(MY_POD_NAME).{{ include "elasticsearch.ingest.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}"
+              value: "$(MY_POD_NAME).{{ printf "%s-hl" (include "elasticsearch.ingest.fullname" .) | trunc 63 | trimSuffix "-" }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}"
             {{- if .Values.plugins }}
             - name: ELASTICSEARCH_PLUGINS
               value: {{ .Values.plugins | quote }}
             {{- end }}
+            {{- if .Values.ingest.heapSize }}
             - name: ELASTICSEARCH_HEAP_SIZE
               value: {{ .Values.ingest.heapSize | quote }}
-            - name: ELASTICSEARCH_IS_DEDICATED_NODE
-              value: "yes"
-            - name: ELASTICSEARCH_NODE_TYPE
-              value: "ingest"
+            {{- end }}
             {{- if .Values.security.enabled }}
             {{- include "elasticsearch.configure.security" . | nindent 12 }}
             {{- end }}
+            {{- if .Values.ingest.extraEnvVars }}
+            {{- include "common.tplvalues.render" ( dict "value" .Values.ingest.extraEnvVars "context" $ ) | nindent 12 }}
+            {{- end }}
             {{- if .Values.extraEnvVars }}
             {{- include "common.tplvalues.render" ( dict "value" .Values.extraEnvVars "context" $ ) | nindent 12 }}
             {{- end }}
-          {{- if or .Values.extraEnvVarsConfigMap .Values.extraEnvVarsSecret }}
+          {{- if or .Values.extraEnvVarsCM .Values.extraEnvVarsSecret .Values.ingest.extraEnvVarsCM .Values.ingest.extraEnvVarsSecret }}
           envFrom:
-            {{- if .Values.extraEnvVarsConfigMap }}
+            {{- if .Values.ingest.extraEnvVarsCM }}
             - configMapRef:
-                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsConfigMap "context" $ ) }}
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.ingest.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.ingest.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.ingest.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsSecret "context" $ ) }}
             {{- end }}
             {{- if .Values.extraEnvVarsSecret }}
             - secretRef:
@@ -160,31 +189,20 @@ spec:
             {{- end }}
           {{- end }}
           ports:
-            - name: {{ include "elasticsearch.httpPortName" . }}
-              containerPort: 9200
+            - name: rest-api
+              containerPort: {{ .Values.containerPorts.restAPI }}
             - name: transport
-              containerPort: 9300
+              containerPort: {{ .Values.containerPorts.transport }}
           {{- if not .Values.diagnosticMode.enabled }}
           {{- if .Values.ingest.startupProbe.enabled }}
-          startupProbe:
-            initialDelaySeconds: {{ .Values.ingest.startupProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.ingest.startupProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.ingest.startupProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.ingest.startupProbe.successThreshold }}
-            failureThreshold: {{ .Values.ingest.startupProbe.failureThreshold }}
-            exec:
-              command:
-                - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
+          startupProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.ingest.startupProbe "enabled") "context" $) | nindent 12 }}
+            tcpSocket:
+              port: rest-api
           {{- else if .Values.ingest.customStartupProbe }}
           startupProbe: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.customStartupProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.ingest.livenessProbe.enabled }}
-          livenessProbe:
-            initialDelaySeconds: {{ .Values.ingest.livenessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.ingest.livenessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.ingest.livenessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.ingest.livenessProbe.successThreshold }}
-            failureThreshold: {{ .Values.ingest.livenessProbe.failureThreshold }}
+          livenessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.ingest.livenessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -192,12 +210,7 @@ spec:
           livenessProbe: {{- include "common.tplvalues.render" (dict "value" .Values.ingest.customLivenessProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.ingest.readinessProbe.enabled }}
-          readinessProbe:
-            initialDelaySeconds: {{ .Values.ingest.readinessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.ingest.readinessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.ingest.readinessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.ingest.readinessProbe.successThreshold }}
-            failureThreshold: {{ .Values.ingest.readinessProbe.failureThreshold }}
+          readinessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.ingest.readinessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -209,25 +222,22 @@ spec:
           resources: {{- toYaml .Values.ingest.resources | nindent 12 }}
           {{- end }}
           volumeMounts:
+            - name: data
+              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.config }}
             - mountPath: /opt/bitnami/elasticsearch/config/elasticsearch.yml
               name: config
               subPath: elasticsearch.yml
             {{- end }}
-            - name: data
-              mountPath: /bitnami/elasticsearch/data
-            {{- if .Values.security.enabled }}
-            - name: elasticsearch-certificates
-              mountPath: /opt/bitnami/elasticsearch/config/certs
-              readOnly: true
-            {{- end }}
             {{- if .Values.extraConfig }}
             - mountPath: /opt/bitnami/elasticsearch/config/my_elasticsearch.yml
               name: config
               subPath: my_elasticsearch.yml
             {{- end }}
-            {{- if .Values.extraVolumeMounts }}
-            {{- toYaml .Values.extraVolumeMounts | nindent 12 }}
+            {{- if .Values.security.enabled }}
+            - name: elasticsearch-certificates
+              mountPath: /opt/bitnami/elasticsearch/config/certs
+              readOnly: true
             {{- end }}
             {{- if .Values.initScripts }}
             - name: custom-init-scripts
@@ -241,24 +251,32 @@ spec:
             - name: custom-init-scripts-secret
               mountPath: /docker-entrypoint-initdb.d/init-scripts-secret
             {{- end }}
+            {{- if .Values.ingest.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.ingest.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
+            {{- if .Values.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
         {{- if .Values.ingest.sidecars }}
         {{- include "common.tplvalues.render" ( dict "value" .Values.ingest.sidecars "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" .Values.sidecars "context" $) | nindent 8 }}
+        {{- end }}
       volumes:
+        - name: "data"
+          emptyDir: {}
         {{- if or .Values.config .Values.extraConfig }}
         - name: config
           configMap:
-            name: {{ include "common.names.fullname" . }}
+            name: {{ template "common.names.fullname" . }}
         {{- end }}
         {{- if .Values.security.enabled }}
         - name: elasticsearch-certificates
           secret:
-            secretName: {{ include "elasticsearch.ingest.tlsSecretName" . }}
+            secretName: {{ template "elasticsearch.ingest.tlsSecretName" . }}
             defaultMode: 256
         {{- end }}
-        {{- if .Values.extraVolumes }}
-        {{- toYaml .Values.extraVolumes | nindent 8 }}
-        {{- end }}
         {{- if .Values.initScripts }}
         - name: custom-init-scripts
           configMap:
@@ -275,6 +293,10 @@ spec:
             secretName: {{ template "elasticsearch.initScriptsSecret" . }}
             defaultMode: 0755
         {{- end }}
-        - name: "data"
-          emptyDir: {}
+        {{- if .Values.ingest.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.ingest.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+        {{- if .Values.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/ingest/svc-headless.yaml b/bitnami/elasticsearch/templates/ingest/svc-headless.yaml
new file mode 100644
index 0000000000..7fa2f8f150
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingest/svc-headless.yaml
@@ -0,0 +1,28 @@
+{{- if (include "elasticsearch.ingest.enabled" .) }}
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ printf "%s-hl" (include "elasticsearch.ingest.fullname" .) | trunc 63 | trimSuffix "-" }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+  {{- end }}
+spec:
+  type: ClusterIP
+  clusterIP: None
+  publishNotReadyAddresses: true
+  ports:
+    - name: tcp-rest-api
+      port: {{ .Values.containerPorts.restAPI }}
+      targetPort: rest-api
+    - name: tcp-transport
+      port: {{ .Values.containerPorts.transport }}
+      targetPort: transport
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingress-tls-secrets.yaml b/bitnami/elasticsearch/templates/ingress-tls-secrets.yaml
new file mode 100644
index 0000000000..8d604535cb
--- /dev/null
+++ b/bitnami/elasticsearch/templates/ingress-tls-secrets.yaml
@@ -0,0 +1,92 @@
+{{- if .Values.ingress.enabled }}
+{{- if .Values.ingress.secrets }}
+{{- range .Values.ingress.secrets }}
+apiVersion: v1
+kind: Secret
+metadata:
+  name: {{ .name }}
+  namespace: {{ template "common.names.namespace" $ }}
+  labels: {{- include "common.labels.standard" $ | nindent 4 }}
+    {{- if $.Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" $.Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if $.Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" $.Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+type: kubernetes.io/tls
+data:
+  tls.crt: {{ .certificate | b64enc }}
+  tls.key: {{ .key | b64enc }}
+---
+{{- end }}
+{{- end }}
+{{- if and .Values.ingress.tls .Values.ingress.selfSigned }}
+{{- $ca := genCA "elasticsearch-ca" 365 }}
+{{- $cert := genSignedCert .Values.ingress.hostname nil (list .Values.ingress.hostname) 365 $ca }}
+apiVersion: v1
+kind: Secret
+metadata:
+  name: {{ printf "%s-tls" .Values.ingress.hostname }}
+  namespace: {{ template "common.names.namespace" . }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+type: kubernetes.io/tls
+data:
+  tls.crt: {{ $cert.Cert | b64enc | quote }}
+  tls.key: {{ $cert.Key | b64enc | quote }}
+  ca.crt: {{ $ca.Cert | b64enc | quote }}
+---
+{{- end }}
+{{- end }}
+{{- if .Values.ingest.ingress.enabled }}
+{{- if .Values.ingest.ingress.secrets }}
+{{- range .Values.ingest.ingress.secrets }}
+apiVersion: v1
+kind: Secret
+metadata:
+  name: {{ .name }}
+  namespace: {{ printf "%s-ingest-ingress" (include "common.names.namespace" $ ) }}
+  labels: {{- include "common.labels.standard" $ | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if $.Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" $.Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if $.Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" $.Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+type: kubernetes.io/tls
+data:
+  tls.crt: {{ .certificate | b64enc }}
+  tls.key: {{ .key | b64enc }}
+---
+{{- end }}
+{{- end }}
+{{- if and .Values.ingest.ingress.tls .Values.ingest.ingress.selfSigned }}
+{{- $ca := genCA "elasticsearch-ingest-ca" 365 }}
+{{- $cert := genSignedCert .Values.ingest.ingress.hostname nil (list .Values.ingest.ingress.hostname) 365 $ca }}
+apiVersion: v1
+kind: Secret
+metadata:
+  name: {{ printf "%s-ingest-tls" .Values.ingest.ingress.hostname }}
+  namespace: {{ template "common.names.namespace" $ }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: ingest
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+type: kubernetes.io/tls
+data:
+  tls.crt: {{ $cert.Cert | b64enc | quote }}
+  tls.key: {{ $cert.Key | b64enc | quote }}
+  ca.crt: {{ $ca.Cert | b64enc | quote }}
+---
+{{- end }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/ingress.yaml b/bitnami/elasticsearch/templates/ingress.yaml
index 16c81178ff..05eea4d206 100644
--- a/bitnami/elasticsearch/templates/ingress.yaml
+++ b/bitnami/elasticsearch/templates/ingress.yaml
@@ -1,37 +1,44 @@
-{{- if .Values.master.ingress.enabled }}
+{{- if .Values.ingress.enabled }}
 apiVersion: {{ include "common.capabilities.ingress.apiVersion" . }}
 kind: Ingress
 metadata:
   name: {{ include "common.names.fullname" . }}
-  namespace: {{ .Release.Namespace }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
+      app.kubernetes.io/component: elasticsearch
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
-  {{- if or .Values.master.ingress.annotations .Values.commonAnnotations }}
+  {{- if or .Values.ingress.annotations .Values.commonAnnotations }}
   annotations:
-    {{- if .Values.master.ingress.annotations }}
-    {{- include "common.tplvalues.render" ( dict "value" .Values.master.ingress.annotations "context" $) | nindent 4 }}
+    {{- if .Values.ingress.annotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.ingress.annotations "context" $) | nindent 4 }}
     {{- end }}
     {{- if .Values.commonAnnotations }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
     {{- end }}
   {{- end }}
 spec:
+  {{- if and .Values.ingress.ingressClassName (eq "true" (include "common.ingress.supportsIngressClassname" .)) }}
+  ingressClassName: {{ .Values.ingress.ingressClassName | quote }}
+  {{- end }}
   rules:
-    {{- if .Values.master.ingress.hostname }}
+    {{- if .Values.ingress.hostname }}
     - http:
+      {{- if ne .Values.ingress.hostname "*" }}
+      host: {{ .Values.ingress.hostname }}
+      {{- end }}
         paths:
-          - path: {{ .Values.master.ingress.path }}
+          {{- if .Values.ingress.extraPaths }}
+          {{- toYaml .Values.ingress.extraPaths | nindent 10 }}
+          {{- end }}
+          - path: {{ .Values.ingress.path }}
             {{- if eq "true" (include "common.ingress.supportsPathType" .) }}
-            pathType: {{ .Values.master.ingress.pathType }}
+            pathType: {{ .Values.ingress.pathType }}
             {{- end }}
-            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "elasticsearch.master.fullname" .) "servicePort" (include "elasticsearch.httpPortName" .) "context" $)  | nindent 14 }}
-      {{- if ne .Values.master.ingress.hostname "*" }}
-      host: {{ .Values.master.ingress.hostname }}
-      {{- end }}
+            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "common.names.fullname" .) "servicePort" "restAPI" "context" $)  | nindent 14 }}
     {{- end }}
-    {{- range .Values.master.ingress.extraHosts }}
+    {{- range .Values.ingress.extraHosts }}
     - host: {{ .name }}
       http:
         paths:
@@ -39,17 +46,20 @@ spec:
             {{- if eq "true" (include "common.ingress.supportsPathType" $) }}
             pathType: {{ default "ImplementationSpecific" .pathType }}
             {{- end }}
-            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "elasticsearch.master.fullname" $) "servicePort" (include "elasticsearch.httpPortName" $) "context" $) | nindent 14 }}
+            backend: {{- include "common.ingress.backend" (dict "serviceName" (include "common.names.fullname" $) "servicePort" "restAPI" "context" $) | nindent 14 }}
+    {{- end }}
+    {{- if .Values.ingress.extraRules }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.ingress.extraRules "context" $ ) | nindent 4 }}
     {{- end }}
-  {{- if or .Values.master.ingress.tls .Values.master.ingress.extraTls }}
+  {{- if or (and .Values.ingress.tls (or (include "common.ingress.certManagerRequest" ( dict "annotations" .Values.ingress.annotations )) .Values.ingress.selfSigned)) .Values.ingress.extraTls }}
   tls:
-    {{- if .Values.master.ingress.tls }}
+    {{- if and .Values.ingress.tls (or (include "common.ingress.certManagerRequest" ( dict "annotations" .Values.ingress.annotations )) .Values.ingress.selfSigned) }}
     - hosts:
-        - {{ .Values.master.ingress.hostname }}
-      secretName: {{ printf "%s-tls" .Values.master.ingress.hostname }}
+        - {{ .Values.ingress.hostname | quote }}
+      secretName: {{ printf "%s-tls" .Values.ingress.hostname }}
     {{- end }}
-    {{- if .Values.master.ingress.extraTls }}
-    {{- include "common.tplvalues.render" ( dict "value" .Values.master.ingress.extraTls "context" $ ) | nindent 4 }}
+    {{- if .Values.ingress.extraTls }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.ingress.extraTls "context" $) | nindent 4 }}
     {{- end }}
   {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/initialization-configmap.yaml b/bitnami/elasticsearch/templates/initialization-configmap.yaml
new file mode 100644
index 0000000000..d84a353d6d
--- /dev/null
+++ b/bitnami/elasticsearch/templates/initialization-configmap.yaml
@@ -0,0 +1,16 @@
+{{- if .Values.initScripts }}
+apiVersion: v1
+kind: ConfigMap
+metadata:
+  name:  {{ printf "%s-init-scripts" (include "common.names.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+data:
+{{- include "common.tplvalues.render" ( dict "value" .Values.initScripts "context" $ ) | nindent 4 }}
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/master-svc.yaml b/bitnami/elasticsearch/templates/master-svc.yaml
deleted file mode 100644
index e79e3c6f9d..0000000000
--- a/bitnami/elasticsearch/templates/master-svc.yaml
+++ /dev/null
@@ -1,27 +0,0 @@
-apiVersion: v1
-kind: Service
-metadata:
-  name: {{ include "elasticsearch.master.fullname" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    app.kubernetes.io/component: master
-  annotations: {{ include "common.tplvalues.render" ( dict "value" .Values.master.service.annotations "context" $) | nindent 4 }}
-spec:
-  type: {{ .Values.master.service.type | quote }}
-  {{- if and (eq .Values.master.service.type "LoadBalancer") (not (empty .Values.master.service.loadBalancerIP)) }}
-  loadBalancerIP: {{ .Values.master.service.loadBalancerIP }}
-  {{- end }}
-  publishNotReadyAddresses: true
-  ports:
-    - name: {{ include "elasticsearch.httpPortName" . }}
-      port: 9200
-      targetPort: {{ include "elasticsearch.httpPortName" . }}
-    - name: tcp-transport
-      port: {{ .Values.master.service.port }}
-      targetPort: transport
-      {{- if and (or (eq .Values.master.service.type "NodePort") (eq .Values.master.service.type "LoadBalancer")) (not (empty .Values.master.service.nodePort)) }}
-      nodePort: {{ .Values.master.service.nodePort }}
-      {{- else if eq .Values.master.service.type "ClusterIP" }}
-      nodePort: null
-      {{- end }}
-  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
-    app.kubernetes.io/component: master
diff --git a/bitnami/elasticsearch/templates/master-hpa.yaml b/bitnami/elasticsearch/templates/master/hpa.yaml
similarity index 89%
rename from bitnami/elasticsearch/templates/master-hpa.yaml
rename to bitnami/elasticsearch/templates/master/hpa.yaml
index d542337cb5..80bce4f43f 100644
--- a/bitnami/elasticsearch/templates/master-hpa.yaml
+++ b/bitnami/elasticsearch/templates/master/hpa.yaml
@@ -1,9 +1,9 @@
-{{- if .Values.master.autoscaling.enabled }}
+{{- if and (include "elasticsearch.master.enabled" .) .Values.master.autoscaling.enabled }}
 apiVersion: autoscaling/v2beta1
 kind: HorizontalPodAutoscaler
 metadata:
   name: {{ include "elasticsearch.master.fullname" . }}
-  namespace: {{ .Release.Namespace | quote }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: master
     {{- if .Values.commonLabels }}
diff --git a/bitnami/elasticsearch/templates/master/serviceaccount.yaml b/bitnami/elasticsearch/templates/master/serviceaccount.yaml
new file mode 100644
index 0000000000..a6fefec019
--- /dev/null
+++ b/bitnami/elasticsearch/templates/master/serviceaccount.yaml
@@ -0,0 +1,22 @@
+{{- if and (include "elasticsearch.master.enabled" .) .Values.master.serviceAccount.create -}}
+apiVersion: v1
+kind: ServiceAccount
+metadata:
+  name: {{ include "elasticsearch.master.serviceAccountName" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: master
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if or .Values.master.serviceAccount.annotations .Values.commonAnnotations }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.master.serviceAccount.annotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.master.serviceAccount.annotations "context" $) | nindent 4 }}
+    {{- end }}
+  {{- end }}
+automountServiceAccountToken: {{ .Values.master.serviceAccount.automountServiceAccountToken }}
+{{- end -}}
diff --git a/bitnami/elasticsearch/templates/master-statefulset.yaml b/bitnami/elasticsearch/templates/master/statefulset.yaml
similarity index 63%
rename from bitnami/elasticsearch/templates/master-statefulset.yaml
rename to bitnami/elasticsearch/templates/master/statefulset.yaml
index 7288568b28..4233d0b085 100644
--- a/bitnami/elasticsearch/templates/master-statefulset.yaml
+++ b/bitnami/elasticsearch/templates/master/statefulset.yaml
@@ -1,25 +1,31 @@
+{{- if (include "elasticsearch.master.enabled" .) }}
 apiVersion: {{ template "common.capabilities.statefulset.apiVersion" . }}
 kind: StatefulSet
 metadata:
   name: {{ include "elasticsearch.master.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: master
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: master
-spec:
-  updateStrategy:
-    type: {{ .Values.master.updateStrategy.type }}
-    {{- if (eq "OnDelete" .Values.master.updateStrategy.type) }}
-    rollingUpdate: null
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
+spec:
+  {{- if not .Values.master.autoscaling.enabled }}
+  replicas: {{ .Values.master.replicaCount }}
+  {{- end }}
+  podManagementPolicy: {{ .Values.master.podManagementPolicy }}
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       app.kubernetes.io/component: master
-  podManagementPolicy: Parallel
-  {{- if not .Values.master.autoscaling.enabled }}
-  replicas: {{ .Values.master.replicas }}
+  serviceName: {{ printf "%s-hl" (include "elasticsearch.master.fullname" .) | trunc 63 | trimSuffix "-" }}
+  {{- if .Values.master.updateStrategy }}
+  updateStrategy: {{- toYaml .Values.master.updateStrategy | nindent 4 }}
   {{- end }}
-  serviceName: {{ template "elasticsearch.master.fullname" . }}
   template:
     metadata:
       labels: {{- include "common.labels.standard" . | nindent 8 }}
@@ -37,16 +43,11 @@ spec:
         {{- include "common.tplvalues.render" (dict "value" .Values.master.podAnnotations "context" $) | nindent 8 }}
         {{- end }}
     spec:
+      serviceAccountName: {{ template "elasticsearch.master.serviceAccountName" . }}
       {{- include "elasticsearch.imagePullSecrets" . | nindent 6 }}
       {{- if .Values.master.hostAliases }}
       hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.master.hostAliases "context" $) | nindent 8 }}
       {{- end }}
-      {{- if .Values.master.schedulerName }}
-      schedulerName: {{ .Values.master.schedulerName }}
-      {{- end }}
-      {{- if .Values.master.priorityClassName }}
-      priorityClassName: {{ .Values.master.priorityClassName | quote }}
-      {{- end }}
       {{- if .Values.master.affinity }}
       affinity: {{- include "common.tplvalues.render" (dict "value" .Values.master.affinity "context" $) | nindent 8 }}
       {{- else }}
@@ -61,17 +62,20 @@ spec:
       {{- if .Values.master.tolerations }}
       tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.master.tolerations "context" $) | nindent 8 }}
       {{- end }}
+      {{- if .Values.master.schedulerName }}
+      schedulerName: {{ .Values.master.schedulerName }}
+      {{- end }}
       {{- if .Values.master.topologySpreadConstraints }}
       topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.master.topologySpreadConstraints "context" $) | nindent 8 }}
       {{- end }}
-      serviceAccountName: {{ template "elasticsearch.master.serviceAccountName" . }}
-      {{- if or .Values.master.podSecurityContext.enabled .Values.master.securityContext.enabled }}
-      securityContext:
-        {{- if .Values.master.podSecurityContext.enabled }}
-        {{- omit .Values.master.podSecurityContext "enabled" | toYaml | nindent 8 }}
-        {{- else }}
-        fsGroup: {{ .Values.master.securityContext.fsGroup }}
-        {{- end }}
+      {{- if .Values.master.priorityClassName }}
+      priorityClassName: {{ .Values.master.priorityClassName | quote }}
+      {{- end }}
+      {{- if .Values.master.podSecurityContext.enabled }}
+      securityContext: {{- omit .Values.master.podSecurityContext "enabled" | toYaml | nindent 8 }}
+      {{- end }}
+      {{- if .Values.master.terminationGracePeriodSeconds }}
+      terminationGracePeriodSeconds: {{ .Values.master.terminationGracePeriodSeconds }}
       {{- end }}
       {{- if or .Values.master.initContainers .Values.sysctlImage.enabled (and .Values.volumePermissions.enabled .Values.master.persistence.enabled) }}
       initContainers:
@@ -100,7 +104,9 @@ spec:
             - /bin/bash
             - -ec
             - |
-              chown -R {{ .Values.master.securityContext.runAsUser }}:{{ .Values.master.securityContext.fsGroup }} //bitnami/elasticsearch/data
+              mkdir -p /bitnami/elasticsearch/data
+              chown {{ .Values.master.containerSecurityContext.runAsUser }}:{{ .Values.master.podSecurityContext.fsGroup }} /bitnami/elasticsearch/data
+              find /bitnami/elasticsearch/data -mindepth 1 -maxdepth 1 -not -name ".snapshot" -not -name "lost+found" | xargs chown -R {{ .Values.master.containerSecurityContext.runAsUser }}:{{ .Values.master.podSecurityContext.fsGroup }}
           securityContext:
             runAsUser: 0
           {{- if .Values.volumePermissions.resources }}
@@ -108,49 +114,64 @@ spec:
           {{- end }}
           volumeMounts:
             - name: data
-              mountPath: "/bitnami/elasticsearch/data"
+              mountPath: /bitnami/elasticsearch/data
         {{- end }}
         {{- if .Values.master.initContainers }}
         {{- include "common.tplvalues.render" (dict "value" .Values.master.initContainers "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.initContainers }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.initContainers "context" $) | nindent 8 }}
+        {{- end }}
       {{- end }}
       containers:
         - name: elasticsearch
           image: {{ include "elasticsearch.image" . }}
           imagePullPolicy: {{ .Values.image.pullPolicy | quote }}
-          {{- if or .Values.master.containerSecurityContext.enabled .Values.master.securityContext.enabled }}
-          securityContext:
-            {{- if .Values.master.containerSecurityContext.enabled }}
-            {{- omit .Values.master.containerSecurityContext "enabled" | toYaml | nindent 12 }}
-            {{ else }}
-            runAsUser: {{ .Values.master.securityContext.runAsUser }}
-            {{- end }}
+          {{- if .Values.master.containerSecurityContext.enabled }}
+          securityContext: {{- omit .Values.master.containerSecurityContext "enabled" | toYaml | nindent 12 }}
           {{- end }}
           {{- if .Values.diagnosticMode.enabled }}
           command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else if .Values.master.command }}
+          command: {{- include "common.tplvalues.render" (dict "value" .Values.master.command "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.diagnosticMode.enabled }}
           args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if .Values.master.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" .Values.master.args "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.master.lifecycleHooks }}
+          lifecycle: {{- include "common.tplvalues.render" (dict "value" .Values.master.lifecycleHooks "context" $) | nindent 12 }}
           {{- end }}
           env:
+            - name: BITNAMI_DEBUG
+              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
             - name: MY_POD_NAME
               valueFrom:
                 fieldRef:
                   fieldPath: metadata.name
-            - name: BITNAMI_DEBUG
-              value: {{ ternary "true" "false" (or .Values.image.debug .Values.diagnosticMode.enabled) | quote }}
+            - name: ELASTICSEARCH_IS_DEDICATED_NODE
+              value: {{ ternary "yes" "no" .Values.master.masterOnly | quote }}
+            - name: ELASTICSEARCH_NODE_ROLES
+              value: "master"
+            - name: ELASTICSEARCH_TRANSPORT_PORT_NUMBER
+              value: {{ .Values.containerPorts.transport | quote }}
+            - name: ELASTICSEARCH_HTTP_PORT_NUMBER
+              value: {{ .Values.containerPorts.restAPI | quote }}
             - name: ELASTICSEARCH_CLUSTER_NAME
-              value: {{ .Values.name | quote }}
+              value: {{ .Values.clusterName | quote }}
             - name: ELASTICSEARCH_CLUSTER_HOSTS
               value: {{ include "elasticsearch.hosts" . | quote }}
             - name: ELASTICSEARCH_TOTAL_NODES
-              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicas .Values.data.autoscaling.enabled) | quote }}
+              value: {{ add (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) (ternary .Values.data.autoscaling.minReplicas .Values.data.replicaCount .Values.data.autoscaling.enabled) | quote }}
             - name: ELASTICSEARCH_CLUSTER_MASTER_HOSTS
               {{- $elasticsearchMasterFullname := include "elasticsearch.master.fullname" . }}
-              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) }}
-              value: {{ range $i, $e := until $replicas }}{{ $elasticsearchMasterFullname }}-{{ $e }} {{ end }}
+              {{- $replicas := int (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) }}
+              value: {{ range $i, $e := until $replicas }}{{ printf "%s-%d" $elasticsearchMasterFullname $e }} {{ end }}
             - name: ELASTICSEARCH_MINIMUM_MASTER_NODES
-              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicas .Values.master.autoscaling.enabled) 2) 1 | quote }}
+              value: {{ add (div (ternary .Values.master.autoscaling.minReplicas .Values.master.replicaCount .Values.master.autoscaling.enabled) 2) 1 | quote }}
             - name: ELASTICSEARCH_ADVERTISED_HOSTNAME
-              value: "$(MY_POD_NAME).{{ include "elasticsearch.master.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}"
+              value: "$(MY_POD_NAME).{{ printf "%s-hl" (include "elasticsearch.master.fullname" .) | trunc 63 | trimSuffix "-" }}.{{ include "common.names.namespace" . }}.svc.{{ .Values.clusterDomain }}"
             {{- if .Values.plugins }}
             - name: ELASTICSEARCH_PLUGINS
               value: {{ .Values.plugins | quote }}
@@ -159,23 +180,32 @@ spec:
             - name: ELASTICSEARCH_FS_SNAPSHOT_REPO_PATH
               value: {{ .Values.snapshotRepoPath | quote }}
             {{- end }}
+            {{- if .Values.data.heapSize }}
             - name: ELASTICSEARCH_HEAP_SIZE
               value: {{ .Values.master.heapSize | quote }}
-            - name: ELASTICSEARCH_IS_DEDICATED_NODE
-              value: "yes"
-            - name: ELASTICSEARCH_NODE_TYPE
-              value: "master"
+            {{- end }}
             {{- if .Values.security.enabled }}
             {{- include "elasticsearch.configure.security" . | nindent 12 }}
             {{- end }}
+            {{- if .Values.master.extraEnvVars }}
+            {{- include "common.tplvalues.render" ( dict "value" .Values.master.extraEnvVars "context" $ ) | nindent 12 }}
+            {{- end }}
             {{- if .Values.extraEnvVars }}
             {{- include "common.tplvalues.render" ( dict "value" .Values.extraEnvVars "context" $ ) | nindent 12 }}
             {{- end }}
-          {{- if or .Values.extraEnvVarsConfigMap .Values.extraEnvVarsSecret }}
+          {{- if or .Values.extraEnvVarsCM .Values.extraEnvVarsSecret .Values.master.extraEnvVarsCM .Values.master.extraEnvVarsSecret }}
           envFrom:
-            {{- if .Values.extraEnvVarsConfigMap }}
+            {{- if .Values.master.extraEnvVarsCM }}
             - configMapRef:
-                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsConfigMap "context" $ ) }}
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.master.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.master.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.master.extraEnvVarsCM "context" $ ) }}
+            {{- end }}
+            {{- if .Values.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" ( dict "value" .Values.extraEnvVarsSecret "context" $ ) }}
             {{- end }}
             {{- if .Values.extraEnvVarsSecret }}
             - secretRef:
@@ -183,31 +213,20 @@ spec:
             {{- end }}
           {{- end }}
           ports:
-            - name: {{ include "elasticsearch.httpPortName" . }}
-              containerPort: 9200
+            - name: rest-api
+              containerPort: {{ .Values.containerPorts.restAPI }}
             - name: transport
-              containerPort: 9300
+              containerPort: {{ .Values.containerPorts.transport }}
           {{- if not .Values.diagnosticMode.enabled }}
           {{- if .Values.master.startupProbe.enabled }}
-          startupProbe:
-            initialDelaySeconds: {{ .Values.master.startupProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.master.startupProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.master.startupProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.master.startupProbe.successThreshold }}
-            failureThreshold: {{ .Values.master.startupProbe.failureThreshold }}
-            exec:
-              command:
-                - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
+          startupProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.master.startupProbe "enabled") "context" $) | nindent 12 }}
+            tcpSocket:
+              port: rest-api
           {{- else if .Values.master.customStartupProbe }}
           startupProbe: {{- include "common.tplvalues.render" (dict "value" .Values.master.customStartupProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.master.livenessProbe.enabled }}
-          livenessProbe:
-            initialDelaySeconds: {{ .Values.master.livenessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.master.livenessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.master.livenessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.master.livenessProbe.successThreshold }}
-            failureThreshold: {{ .Values.master.livenessProbe.failureThreshold }}
+          livenessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.master.livenessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -215,12 +234,7 @@ spec:
           livenessProbe: {{- include "common.tplvalues.render" (dict "value" .Values.master.customLivenessProbe "context" $) | nindent 12 }}
           {{- end }}
           {{- if .Values.master.readinessProbe.enabled }}
-          readinessProbe:
-            initialDelaySeconds: {{ .Values.master.readinessProbe.initialDelaySeconds }}
-            periodSeconds: {{ .Values.master.readinessProbe.periodSeconds }}
-            timeoutSeconds: {{ .Values.master.readinessProbe.timeoutSeconds }}
-            successThreshold: {{ .Values.master.readinessProbe.successThreshold }}
-            failureThreshold: {{ .Values.master.readinessProbe.failureThreshold }}
+          readinessProbe: {{- include "common.tplvalues.render" (dict "value" (omit .Values.master.readinessProbe "enabled") "context" $) | nindent 12 }}
             exec:
               command:
                 - /opt/bitnami/scripts/elasticsearch/healthcheck.sh
@@ -232,6 +246,8 @@ spec:
           resources: {{- toYaml .Values.master.resources | nindent 12 }}
           {{- end }}
           volumeMounts:
+            - name: data
+              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.config }}
             - mountPath: /opt/bitnami/elasticsearch/config/elasticsearch.yml
               name: config
@@ -242,16 +258,11 @@ spec:
               name: config
               subPath: my_elasticsearch.yml
             {{- end }}
-            - name: data
-              mountPath: /bitnami/elasticsearch/data
             {{- if .Values.security.enabled }}
             - name: elasticsearch-certificates
               mountPath: /opt/bitnami/elasticsearch/config/certs
               readOnly: true
             {{- end }}
-            {{- if .Values.extraVolumeMounts }}
-            {{- toYaml .Values.extraVolumeMounts | nindent 12 }}
-            {{- end }}
             {{- if .Values.initScripts }}
             - name: custom-init-scripts
               mountPath: /docker-entrypoint-initdb.d/init-scripts
@@ -264,24 +275,30 @@ spec:
             - name: custom-init-scripts-secret
               mountPath: /docker-entrypoint-initdb.d/init-scripts-secret
             {{- end }}
+            {{- if .Values.master.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.master.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
+            {{- if .Values.extraVolumeMounts }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumeMounts "context" $) | nindent 12 }}
+            {{- end }}
         {{- if .Values.master.sidecars }}
         {{- include "common.tplvalues.render" ( dict "value" .Values.master.sidecars "context" $) | nindent 8 }}
         {{- end }}
+        {{- if .Values.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" .Values.sidecars "context" $) | nindent 8 }}
+        {{- end }}
       volumes:
         {{- if or .Values.config .Values.extraConfig }}
         - name: config
           configMap:
-            name: {{ include "common.names.fullname" . }}
+            name: {{ template "common.names.fullname" . }}
         {{- end }}
         {{- if .Values.security.enabled }}
         - name: elasticsearch-certificates
           secret:
-            secretName: {{ include "elasticsearch.master.tlsSecretName" . }}
+            secretName: {{ template "elasticsearch.master.tlsSecretName" . }}
             defaultMode: 256
         {{- end }}
-        {{- if .Values.extraVolumes }}
-        {{- toYaml .Values.extraVolumes | nindent 8 }}
-        {{- end }}
         {{- if .Values.initScripts }}
         - name: custom-init-scripts
           configMap:
@@ -298,24 +315,38 @@ spec:
             secretName: {{ template "elasticsearch.initScriptsSecret" . }}
             defaultMode: 0755
         {{- end }}
-{{- if not .Values.master.persistence.enabled }}
+        {{- if .Values.master.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.master.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+        {{- if .Values.extraVolumes }}
+        {{- include "common.tplvalues.render" (dict "value" .Values.extraVolumes "context" $) | nindent 8 }}
+        {{- end }}
+  {{- if not .Values.master.persistence.enabled }}
         - name: "data"
           emptyDir: {}
-{{- else if .Values.master.persistence.existingClaim }}
+  {{- else if .Values.master.persistence.existingClaim }}
         - name: "data"
           persistentVolumeClaim:
             claimName: {{ .Values.master.persistence.existingClaim }}
-{{- else }}
+  {{- else }}
   volumeClaimTemplates:
     - metadata:
         name: "data"
-        {{- if .Values.master.persistence.annotations }}
-        annotations: {{- toYaml .Values.master.persistence.annotations | nindent 10 }}
+        annotations:
+          {{- if .Values.master.persistence.annotations }}
+          {{- include "common.tplvalues.render" (dict "value" .Values.master.persistence.annotations "context" $) | nindent 10 }}
+          {{- end }}
+          {{- if .Values.commonAnnotations }}
+          {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 10 }}
+          {{- end }}
+        {{- if .Values.commonLabels }}
+        labels: {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 10 }}
         {{- end }}
       spec:
-        accessModes: {{- toYaml .Values.master.persistence.accessModes | nindent 10 }}
-        {{ $storage := dict "global" .Values.global "local" .Values.master }}
-        {{ include "elasticsearch.storageClass" $storage  }}
+        accessModes:
+          {{- range .Values.master.persistence.accessModes }}
+          - {{ . | quote }}
+          {{- end }}
         resources:
           requests:
             storage: {{ .Values.master.persistence.size | quote }}
@@ -326,4 +357,6 @@ spec:
           matchLabels:
             volume: {{ .Values.master.persistence.existingVolume }}
         {{- end }}
+        {{- include "common.storage.class" (dict "persistence" .Values.master.persistence "global" .Values.global) | nindent 8 }}
+  {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/master/svc-headless.yaml b/bitnami/elasticsearch/templates/master/svc-headless.yaml
new file mode 100644
index 0000000000..7400d5828e
--- /dev/null
+++ b/bitnami/elasticsearch/templates/master/svc-headless.yaml
@@ -0,0 +1,28 @@
+{{- if (include "elasticsearch.master.enabled" .) }}
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ printf "%s-hl" (include "elasticsearch.master.fullname" .) | trunc 63 | trimSuffix "-" }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{ include "common.labels.standard" . | nindent 4 }}
+    app.kubernetes.io/component: master
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+  {{- end }}
+spec:
+  type: ClusterIP
+  clusterIP: None
+  publishNotReadyAddresses: true
+  ports:
+    - name: tcp-rest-api
+      port: {{ .Values.containerPorts.restAPI }}
+      targetPort: rest-api
+    - name: tcp-transport
+      port: {{ .Values.containerPorts.transport }}
+      targetPort: transport
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    app.kubernetes.io/component: master
+{{- end }}
diff --git a/bitnami/elasticsearch/templates/metrics-deploy.yaml b/bitnami/elasticsearch/templates/metrics/deployment.yaml
similarity index 59%
rename from bitnami/elasticsearch/templates/metrics-deploy.yaml
rename to bitnami/elasticsearch/templates/metrics/deployment.yaml
index f30e6b4885..1dddeffa63 100644
--- a/bitnami/elasticsearch/templates/metrics-deploy.yaml
+++ b/bitnami/elasticsearch/templates/metrics/deployment.yaml
@@ -3,15 +3,22 @@ apiVersion: {{ template "common.capabilities.deployment.apiVersion" . }}
 kind: Deployment
 metadata:
   name: {{ include "elasticsearch.metrics.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: metrics
     ## Istio Labels: https://istio.io/docs/ops/deployment/requirements/
     app: metrics
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
 spec:
+  replicaCount: 1
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       app.kubernetes.io/component: metrics
-  replicas: 1
   template:
     metadata:
       labels: {{- include "common.labels.standard" . | nindent 8 }}
@@ -21,40 +28,69 @@ spec:
         {{- if .Values.metrics.podLabels }}
         {{- include "common.tplvalues.render" (dict "value" .Values.metrics.podLabels "context" $) | nindent 8 }}
         {{- end }}
-      {{- with .Values.metrics.podAnnotations }}
-      annotations: {{ toYaml . | nindent 8 }}
+      {{- if .Values.metrics.podAnnotations }}
+      annotations: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.podAnnotations "context" $) | nindent 8 }}
       {{- end }}
     spec:
       {{- include "elasticsearch.imagePullSecrets" . | nindent 6 }}
       {{- if .Values.metrics.hostAliases }}
       hostAliases: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.hostAliases "context" $) | nindent 8 }}
       {{- end }}
+      {{- if .Values.metrics.affinity }}
+      affinity: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.affinity "context" $) | nindent 8 }}
+      {{- else }}
+      affinity:
+        podAffinity: {{- include "common.affinities.pods" (dict "type" .Values.metrics.podAffinityPreset "component" "metrics" "context" $) | nindent 10 }}
+        podAntiAffinity: {{- include "common.affinities.pods" (dict "type" .Values.metrics.podAntiAffinityPreset "component" "metrics" "context" $) | nindent 10 }}
+        nodeAffinity: {{- include "common.affinities.nodes" (dict "type" .Values.metrics.nodeAffinityPreset.type "key" .Values.metrics.nodeAffinityPreset.key "values" .Values.metrics.nodeAffinityPreset.values) | nindent 10 }}
+      {{- end }}
+      {{- if .Values.metrics.nodeSelector }}
+      nodeSelector: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.nodeSelector "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if .Values.metrics.tolerations }}
+      tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.tolerations "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if .Values.metrics.priorityClassName }}
+      priorityClassName: {{ .Values.metrics.priorityClassName | quote }}
+      {{- end }}
       {{- if .Values.metrics.schedulerName }}
-      schedulerName: {{ .Values.metrics.schedulerName }}
+      schedulerName: {{ .Values.metrics.schedulerName | quote }}
+      {{- end }}
+      {{- if .Values.metrics.podSecurityContext.enabled }}
+      securityContext: {{- omit .Values.metrics.podSecurityContext "enabled" | toYaml | nindent 8 }}
+      {{- end }}
+      {{- if .Values.metrics.topologySpreadConstraints }}
+      topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.topologySpreadConstraints "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if .Values.metrics.initContainers }}
+      initContainers: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.initContainers "context" $) | nindent 8 }}
       {{- end }}
       containers:
         - name: metrics
           image: {{ include "elasticsearch.metrics.image" . }}
           imagePullPolicy: {{ .Values.metrics.image.pullPolicy | quote }}
+          {{- if .Values.metrics.containerSecurityContext.enabled }}
+          securityContext: {{- omit .Values.metrics.containerSecurityContext "enabled" | toYaml | nindent 12 }}
+          {{- end }}
           {{- if .Values.diagnosticMode.enabled }}
           command: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.command "context" $) | nindent 12 }}
+          {{- else }}
+          command: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.command "context" $) | nindent 12 }}
+          {{- end }}
+          {{- if .Values.diagnosticMode.enabled }}
           args: {{- include "common.tplvalues.render" (dict "value" .Values.diagnosticMode.args "context" $) | nindent 12 }}
+          {{- else if .Values.metrics.args }}
+          args: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.args "context" $) | nindent 12 }}
           {{- else }}
           args:
             {{- $protocol := (ternary "https" "http" (and .Values.security.enabled .Values.security.tls.restEncryption)) }}
-            {{- if gt (int .Values.coordinating.replicas) 0 }}
-            # Prefer coordinating only nodes to do the initial metrics query
-            - --es.uri={{$protocol}}://{{ template "elasticsearch.coordinating.fullname" . }}:{{ .Values.coordinating.service.port }}
-            {{- else }}
-            # Using master nodes as there are no coordinating only nodes
-            - --es.uri={{$protocol}}://{{ include "elasticsearch.master.fullname" . }}:9200
-            {{- end }}
+            - --es.uri={{$protocol}}://{{ include "common.names.fullname" . }}:{{ include "elasticsearch.service.ports.restAPI" . }}
             - --es.all
             {{- if .Values.security.tls.restEncryption }}
             - --es.ssl-skip-verify
             {{- end }}
             {{- if .Values.metrics.extraArgs }}
-            {{- toYaml .Values.metrics.extraArgs | nindent 12 }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.metrics.extraArgs "context" $) | nindent 12 }}
             {{- end }}
           {{- end }}
           env:
@@ -67,6 +103,18 @@ spec:
                     name: {{ include "elasticsearch.secretName" . }}
                     key: elasticsearch-password
             {{- end }}
+            {{- if .Values.metrics.extraEnvVars }}
+            {{- include "common.tplvalues.render" (dict "value" .Values.metrics.extraEnvVars "context" $) | nindent 12 }}
+            {{- end }}
+          envFrom:
+            {{- if .Values.metrics.extraEnvVarsCM }}
+            - configMapRef:
+                name: {{ include "common.tplvalues.render" (dict "value" .Values.metrics.extraEnvVarsCM "context" $) }}
+            {{- end }}
+            {{- if .Values.metrics.extraEnvVarsSecret }}
+            - secretRef:
+                name: {{ include "common.tplvalues.render" (dict "value" .Values.metrics.extraEnvVarsSecret "context" $) }}
+            {{- end }}
           ports:
             - name: metrics
               containerPort: 9114
@@ -97,25 +145,30 @@ spec:
           {{- else if .Values.metrics.customReadinessProbe }}
           readinessProbe: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.customReadinessProbe "context" $) | nindent 12 }}
           {{- end }}
+          {{- if .Values.metrics.startupProbe.enabled }}
+          startupProbe:
+            initialDelaySeconds: {{ .Values.metrics.startupProbe.initialDelaySeconds }}
+            periodSeconds: {{ .Values.metrics.startupProbe.periodSeconds }}
+            timeoutSeconds: {{ .Values.metrics.startupProbe.timeoutSeconds }}
+            successThreshold: {{ .Values.metrics.startupProbe.successThreshold }}
+            failureThreshold: {{ .Values.metrics.startupProbe.failureThreshold }}
+            httpGet:
+              path: /metrics
+              port: metrics
+          {{- else if .Values.metrics.customStartupProbe }}
+          startupProbe: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.customStartupProbe "context" $) | nindent 12 }}
+          {{- end }}
           {{- end }}
           {{- if .Values.metrics.resources }}
           resources: {{- toYaml .Values.metrics.resources | nindent 12 }}
           {{- end }}
-      {{- if .Values.metrics.affinity }}
-      affinity: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.affinity "context" $) | nindent 8 }}
-      {{- else }}
-      affinity:
-        podAffinity: {{- include "common.affinities.pods" (dict "type" .Values.metrics.podAffinityPreset "component" "metrics" "context" $) | nindent 10 }}
-        podAntiAffinity: {{- include "common.affinities.pods" (dict "type" .Values.metrics.podAntiAffinityPreset "component" "metrics" "context" $) | nindent 10 }}
-        nodeAffinity: {{- include "common.affinities.nodes" (dict "type" .Values.metrics.nodeAffinityPreset.type "key" .Values.metrics.nodeAffinityPreset.key "values" .Values.metrics.nodeAffinityPreset.values) | nindent 10 }}
-      {{- end }}
-      {{- if .Values.metrics.nodeSelector }}
-      nodeSelector: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.nodeSelector "context" $) | nindent 8 }}
-      {{- end }}
-      {{- if .Values.metrics.tolerations }}
-      tolerations: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.tolerations "context" $) | nindent 8 }}
-      {{- end }}
-      {{- if .Values.metrics.topologySpreadConstraints }}
-      topologySpreadConstraints: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.topologySpreadConstraints "context" $) | nindent 8 }}
+          {{- if .Values.metrics.extraVolumeMounts }}
+          volumeMounts: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.extraVolumeMounts "context" $) | nindent 12 }}
+          {{- end }}
+        {{- if .Values.metrics.sidecars }}
+        {{- include "common.tplvalues.render" ( dict "value" .Values.metrics.sidecars "context" $) | nindent 8 }}
+        {{- end }}
+      {{- if .Values.metrics.extraVolumes }}
+      volumes: {{- include "common.tplvalues.render" (dict "value" .Values.metrics.extraVolumes "context" $) | nindent 8 }}
       {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/metrics-svc.yaml b/bitnami/elasticsearch/templates/metrics/service.yaml
similarity index 57%
rename from bitnami/elasticsearch/templates/metrics-svc.yaml
rename to bitnami/elasticsearch/templates/metrics/service.yaml
index 6e49a71191..bf3d5208c9 100644
--- a/bitnami/elasticsearch/templates/metrics-svc.yaml
+++ b/bitnami/elasticsearch/templates/metrics/service.yaml
@@ -3,14 +3,21 @@ apiVersion: v1
 kind: Service
 metadata:
   name: {{ include "elasticsearch.metrics.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: metrics
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
   annotations: {{ include "common.tplvalues.render" ( dict "value" .Values.metrics.service.annotations "context" $) | nindent 4 }}
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+    {{- end }}
 spec:
   type: {{ .Values.metrics.service.type }}
   ports:
     - name: http-metrics
-      port: 9114
+      port: {{ .Values.metrics.service.port }}
       targetPort: metrics
   selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
     app.kubernetes.io/component: metrics
diff --git a/bitnami/elasticsearch/templates/servicemonitor.yaml b/bitnami/elasticsearch/templates/metrics/servicemonitor.yaml
similarity index 51%
rename from bitnami/elasticsearch/templates/servicemonitor.yaml
rename to bitnami/elasticsearch/templates/metrics/servicemonitor.yaml
index aad59f9d64..f5f2630e49 100644
--- a/bitnami/elasticsearch/templates/servicemonitor.yaml
+++ b/bitnami/elasticsearch/templates/metrics/servicemonitor.yaml
@@ -4,14 +4,23 @@ kind: ServiceMonitor
 metadata:
   name: {{ include "elasticsearch.metrics.fullname" . }}
   {{- if .Values.metrics.serviceMonitor.namespace }}
-  namespace: {{ .Values.metrics.serviceMonitor.namespace }}
+  namespace: {{ .Values.metrics.serviceMonitor.namespace | quote }}
+  {{- else }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   {{- end }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     app.kubernetes.io/component: metrics
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonLabels "context" $) | nindent 4 }}
+    {{- end }}
     {{- if .Values.metrics.serviceMonitor.labels }}
     {{- include "common.tplvalues.render" (dict "value" .Values.metrics.serviceMonitor.labels "context" $) | nindent 4 }}
     {{- end }}
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+  {{- end }}
 spec:
+  jobLabel: {{ .Values.metrics.serviceMonitor.jobLabel | quote }}
   selector:
     matchLabels: {{- include "common.labels.matchLabels" . | nindent 6 }}
       {{- if .Values.metrics.serviceMonitor.selector }}
@@ -26,7 +35,16 @@ spec:
       {{- if .Values.metrics.serviceMonitor.scrapeTimeout }}
       scrapeTimeout: {{ .Values.metrics.serviceMonitor.scrapeTimeout }}
       {{- end }}
+      {{- if .Values.metrics.serviceMonitor.honorLabels }}
+      honorLabels: {{ .Values.metrics.serviceMonitor.honorLabels }}
+      {{- end }}
+      {{- if .Values.metrics.serviceMonitor.metricRelabelings }}
+      metricRelabelings: {{- include "common.tplvalues.render" ( dict "value" .Values.metrics.serviceMonitor.metricRelabelings "context" $) | nindent 8 }}
+      {{- end }}
+      {{- if .Values.metrics.serviceMonitor.relabelings }}
+      relabelings: {{- include "common.tplvalues.render" ( dict "value" .Values.metrics.serviceMonitor.relabelings "context" $) | nindent 8 }}
+      {{- end }}
   namespaceSelector:
     matchNames:
-      - {{ .Release.Namespace }}
+      - {{ include "common.names.namespace" . | quote }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/secrets.yaml b/bitnami/elasticsearch/templates/secrets.yaml
index 140e3e8635..1576e371b7 100644
--- a/bitnami/elasticsearch/templates/secrets.yaml
+++ b/bitnami/elasticsearch/templates/secrets.yaml
@@ -3,6 +3,7 @@ apiVersion: v1
 kind: Secret
 metadata:
   name: {{ template "common.names.fullname" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
@@ -12,27 +13,15 @@ metadata:
   {{- end }}
 type: Opaque
 data:
-  {{- if .Values.security.elasticPassword }}
-  elasticsearch-password: {{ default "" .Values.security.elasticPassword | b64enc | quote }}
-  {{- else }}
-  elasticsearch-password: {{ randAlphaNum 14 | b64enc | quote }}
-  {{- end }}
-  {{- if .Values.security.tls.keystorePassword }}
-  keystore-password: {{ default "" .Values.security.tls.keystorePassword | b64enc | quote }}
-  {{- end }}
-  {{- if .Values.security.tls.truststorePassword }}
-  truststore-password: {{ default "" .Values.security.tls.truststorePassword | b64enc | quote }}
-  {{- end }}
-  {{- if .Values.security.tls.keyPassword }}
-  key-password: {{ default "" .Values.security.tls.keyPassword | b64enc | quote }}
-  {{- end }}
+  elasticsearch-password: {{ include "common.secrets.passwords.manage" (dict "secret" (include "common.names.fullname" .) "key" "elasticsearch-password" "length" 16 "providedValues" (list "security.elasticPassword") "context" $) }}
 ---
 {{- end }}
 {{- if (include "elasticsearch.createTlsPasswordsSecret" . ) }}
 apiVersion: v1
 kind: Secret
 metadata:
-  name: {{ template "common.names.fullname" . }}-tls-pass
+  name: {{ printf "%s-tls-pass" (include "common.names.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
@@ -43,12 +32,12 @@ metadata:
 type: Opaque
 data:
   {{- if .Values.security.tls.keystorePassword }}
-  truststore-password: {{ default "" .Values.elasticPassword | b64enc | quote }}
+  truststore-password: {{ default "" .Values.security.tls.keystorePassword | b64enc | quote }}
   {{- end }}
   {{- if .Values.security.tls.truststorePassword }}
-  keystore-password: {{ default "" .Values.elasticPassword | b64enc | quote }}
+  keystore-password: {{ default "" .Values.security.tls.truststorePassword | b64enc | quote }}
   {{- end }}
-  {{- if .Values.security.tls.elasticPassword }}
-  key-password: {{ default "" .Values.elasticPassword | b64enc | quote }}
+  {{- if .Values.security.tls.keyPassword }}
+  key-password: {{ default "" .Values.security.tls.keyPassword | b64enc | quote }}
   {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/templates/service.yaml b/bitnami/elasticsearch/templates/service.yaml
new file mode 100644
index 0000000000..cb3e679384
--- /dev/null
+++ b/bitnami/elasticsearch/templates/service.yaml
@@ -0,0 +1,66 @@
+apiVersion: v1
+kind: Service
+metadata:
+  name: {{ include "elasticsearch.service.name" . }}
+  namespace: {{ include "common.names.namespace" . | quote }}
+  labels: {{- include "common.labels.standard" . | nindent 4 }}
+    {{- if .Values.commonLabels }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
+    {{- end }}
+    {{- if (include "elasticsearch.coordinating.enabled" .) }}
+    app.kubernetes.io/component: coordinating-only
+    {{- else }}
+    app.kubernetes.io/component: master
+    {{- end }}
+  annotations:
+    {{- if .Values.commonAnnotations }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.commonAnnotations "context" $) | nindent 4 }}
+    {{- end }}
+    {{- if .Values.service.annotations }}
+    {{- include "common.tplvalues.render" ( dict "value" .Values.service.annotations "context" $) | nindent 4 }}
+    {{- end }}
+spec:
+  type: {{ .Values.service.type }}
+  {{- if and .Values.service.clusterIP (eq .Values.service.type "ClusterIP") }}
+  clusterIP: {{ .Values.service.clusterIP }}
+  {{- end }}
+  {{- if or (eq .Values.service.type "LoadBalancer") (eq .Values.service.type "NodePort") }}
+  externalTrafficPolicy: {{ .Values.service.externalTrafficPolicy | quote }}
+  {{- end }}
+  {{- if and (eq .Values.service.type "LoadBalancer") .Values.service.loadBalancerSourceRanges }}
+  loadBalancerSourceRanges: {{- toYaml .Values.service.loadBalancerSourceRanges | nindent 4 }}
+  {{- end }}
+  {{- if (and (eq .Values.service.type "LoadBalancer") (not (empty .Values.service.loadBalancerIP))) }}
+  loadBalancerIP: {{ .Values.service.loadBalancerIP }}
+  {{- end }}
+  {{- if .Values.service.sessionAffinity }}
+  sessionAffinity: {{ .Values.service.sessionAffinity }}
+  {{- end }}
+  {{- if .Values.service.sessionAffinityConfig }}
+  sessionAffinityConfig: {{- include "common.tplvalues.render" (dict "value" .Values.service.sessionAffinityConfig "context" $) | nindent 4 }}
+  {{- end }}
+  ports:
+    - name: tcp-rest-api
+      port: {{ include "elasticsearch.service.ports.restAPI" . }}
+      targetPort: rest-api
+      {{- if and (or (eq .Values.service.type "NodePort") (eq .Values.service.type "LoadBalancer")) (not (empty .Values.service.nodePorts.restAPI)) }}
+      nodePort: {{ .Values.service.nodePorts.restAPI }}
+      {{- else if eq .Values.service.type "ClusterIP" }}
+      nodePort: null
+      {{- end }}
+    - name: tcp-transport
+      port: {{ .Values.service.ports.transport }}
+      {{- if and (or (eq .Values.service.type "NodePort") (eq .Values.service.type "LoadBalancer")) (not (empty .Values.service.nodePorts.transport)) }}
+      nodePort: {{ .Values.service.nodePorts.transport }}
+      {{- else if eq .Values.service.type "ClusterIP" }}
+      nodePort: null
+      {{- end }}
+    {{- if .Values.service.extraPorts }}
+    {{- include "common.tplvalues.render" (dict "value" .Values.service.extraPorts "context" $) | nindent 4 }}
+    {{- end }}
+  selector: {{- include "common.labels.matchLabels" . | nindent 4 }}
+    {{- if (include "elasticsearch.coordinating.enabled" .) }}
+    app.kubernetes.io/component: coordinating-only
+    {{- else }}
+    app.kubernetes.io/component: master
+    {{- end }}
diff --git a/bitnami/elasticsearch/templates/serviceaccount.yaml b/bitnami/elasticsearch/templates/serviceaccount.yaml
deleted file mode 100644
index 60da5471ea..0000000000
--- a/bitnami/elasticsearch/templates/serviceaccount.yaml
+++ /dev/null
@@ -1,44 +0,0 @@
-{{- if and .Values.curator.enabled .Values.curator.serviceAccount.create .Values.curator.rbac.enabled }}
-apiVersion: v1
-kind: ServiceAccount
-metadata:
-  name: {{ include "elasticsearch.curator.serviceAccountName" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    role: curator
-{{- end }}
-{{- if .Values.data.serviceAccount.create }}
----
-apiVersion: v1
-kind: ServiceAccount
-metadata:
-  name: {{ template "elasticsearch.data.serviceAccountName" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    role: data
-{{- end }}
-{{- if .Values.master.serviceAccount.create }}
----
-apiVersion: v1
-kind: ServiceAccount
-metadata:
-  name: {{ template "elasticsearch.master.serviceAccountName" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    role: master
-{{- end }}
-{{- if .Values.coordinating.serviceAccount.create }}
----
-apiVersion: v1
-kind: ServiceAccount
-metadata:
-  name: {{ template "elasticsearch.coordinating.serviceAccountName" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    role: coordinating-only
-{{- end }}
-{{- if and .Values.ingest.enabled .Values.ingest.serviceAccount.create }}
----
-apiVersion: v1
-kind: ServiceAccount
-metadata:
-  name: {{ template "elasticsearch.ingest.serviceAccountName" . }}
-  labels: {{- include "common.labels.standard" . | nindent 4 }}
-    role: ingest
-{{- end }}
diff --git a/bitnami/elasticsearch/templates/tls-secret.yaml b/bitnami/elasticsearch/templates/tls-secret.yaml
index f4f157a3f3..e0b8737f68 100644
--- a/bitnami/elasticsearch/templates/tls-secret.yaml
+++ b/bitnami/elasticsearch/templates/tls-secret.yaml
@@ -1,39 +1,43 @@
 {{- if (include "elasticsearch.createTlsSecret" .) }}
 {{- $ca := genCA "elasticsearch-ca" 365 }}
-{{- $releaseNamespace := .Release.Namespace }}
+{{- $releaseNamespace := include "common.names.namespace" . }}
 {{- $clusterDomain := .Values.clusterDomain }}
 
-{{- if not .Values.security.tls.master.existingSecret }}
----
+{{- if and (include "elasticsearch.master.enabled" .) (not .Values.security.tls.master.existingSecret) }}
 {{- $fullname := include "elasticsearch.master.fullname" . }}
-{{- $serviceName := include "elasticsearch.master.fullname" . }}
+{{- $serviceName := printf "%s-hl" (include "elasticsearch.master.fullname" .) | trunc 63 | trimSuffix "-" }}
 {{- $altNames := list (printf "*.%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) (printf "%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) $fullname "127.0.0.1" "localhost" }}
 {{- $crt := genSignedCert $fullname nil $altNames 365 $ca }}
 apiVersion: v1
 kind: Secret
 metadata:
-  name: {{ include "elasticsearch.master.fullname" . }}-crt
+  name: {{ printf "%s-crt" (include "elasticsearch.master.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
     {{- end }}
     app.kubernetes.io/component: master
+  {{- if .Values.commonAnnotations }}
+  annotations: {{- include "common.tplvalues.render" ( dict "value" .Values.commonAnnotations "context" $ ) | nindent 4 }}
+  {{- end }}
 type: kubernetes.io/tls
 data:
   ca.crt: {{ $ca.Cert | b64enc | quote }}
   tls.crt: {{ $crt.Cert | b64enc | quote }}
   tls.key: {{ $crt.Key | b64enc | quote }}
-{{- end }}
-{{- if not .Values.security.tls.data.existingSecret }}
 ---
+{{- end }}
+{{- if and (include "elasticsearch.data.enabled" .) (not .Values.security.tls.data.existingSecret) }}
 {{- $fullname := include "elasticsearch.data.fullname" . }}
-{{- $serviceName := include "elasticsearch.data.fullname" . }}
+{{- $serviceName := printf "%s-hl" (include "elasticsearch.data.fullname" .) | trunc 63 | trimSuffix "-" }}
 {{- $altNames := list (printf "*.%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) (printf "%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) $fullname "127.0.0.1" "localhost" }}
 {{- $crt := genSignedCert $fullname nil $altNames 365 $ca }}
 apiVersion: v1
 kind: Secret
 metadata:
-  name: {{ include "elasticsearch.data.fullname" . }}-crt
+  name: {{ printf "%s-crt" (include "elasticsearch.data.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
@@ -47,17 +51,18 @@ data:
   ca.crt: {{ $ca.Cert | b64enc | quote }}
   tls.crt: {{ $crt.Cert | b64enc | quote }}
   tls.key: {{ $crt.Key | b64enc | quote }}
-{{- end }}
-{{- if not .Values.security.tls.coordinating.existingSecret }}
 ---
+{{- end }}
+{{- if and (include "elasticsearch.coordinating.enabled" .) (not .Values.security.tls.coordinating.existingSecret) }}
 {{- $fullname := include "elasticsearch.coordinating.fullname" . }}
-{{- $serviceName := include "elasticsearch.coordinating.fullname" . }}
+{{- $serviceName := printf "%s-hl" (include "elasticsearch.coordinating.fullname" .) | trunc 63 | trimSuffix "-" }}
 {{- $altNames := list (printf "*.%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) (printf "%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) $fullname "127.0.0.1" "localhost" }}
 {{- $crt := genSignedCert $fullname nil $altNames 365 $ca }}
 apiVersion: v1
 kind: Secret
 metadata:
-  name: {{ include "elasticsearch.coordinating.fullname" . }}-crt
+  name: {{ printf "%s-crt" (include "elasticsearch.coordinating.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
@@ -71,17 +76,18 @@ data:
   ca.crt: {{ $ca.Cert | b64enc | quote }}
   tls.crt: {{ $crt.Cert | b64enc | quote }}
   tls.key: {{ $crt.Key | b64enc | quote }}
-{{- end }}
-{{- if and .Values.ingest.enabled (not .Values.security.tls.ingest.existingSecret) }}
 ---
+{{- end }}
+{{- if and (include "elasticsearch.ingest.enabled" .) (not .Values.security.tls.ingest.existingSecret) }}
 {{- $fullname := include "elasticsearch.ingest.fullname" . }}
-{{- $serviceName := include "elasticsearch.ingest.fullname" . }}
+{{- $serviceName := printf "%s-hl" (include "elasticsearch.ingest.fullname" .) | trunc 63 | trimSuffix "-" }}
 {{- $altNames := list (printf "*.%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) (printf "%s.%s.svc.%s" $serviceName $releaseNamespace $clusterDomain) $fullname "127.0.0.1" "localhost" }}
 {{- $crt := genSignedCert $fullname nil $altNames 365 $ca }}
 apiVersion: v1
 kind: Secret
 metadata:
-  name: {{ include "elasticsearch.ingest.fullname" . }}-crt
+  name: {{ printf "%s-crt" (include "elasticsearch.ingest.fullname" .) }}
+  namespace: {{ include "common.names.namespace" . | quote }}
   labels: {{- include "common.labels.standard" . | nindent 4 }}
     {{- if .Values.commonLabels }}
     {{- include "common.tplvalues.render" ( dict "value" .Values.commonLabels "context" $ ) | nindent 4 }}
@@ -95,5 +101,6 @@ data:
   ca.crt: {{ $ca.Cert | b64enc | quote }}
   tls.crt: {{ $crt.Cert | b64enc | quote }}
   tls.key: {{ $crt.Key | b64enc | quote }}
+---
 {{- end }}
 {{- end }}
diff --git a/bitnami/elasticsearch/values.yaml b/bitnami/elasticsearch/values.yaml
index 7e1eebefd1..3e1f840d95 100644
--- a/bitnami/elasticsearch/values.yaml
+++ b/bitnami/elasticsearch/values.yaml
@@ -6,7 +6,8 @@
 ## @param global.imageRegistry Global Docker image registry
 ## @param global.imagePullSecrets Global Docker registry secret names as an array
 ## @param global.storageClass Global StorageClass for Persistent Volume(s)
-## @param global.coordinating.name Coordinating name to be used in the Kibana subchart (service name)
+## @param global.elasticsearch.service.name Elasticsearch service name to be used in the Kibana subchart (ignored if kibanaEnabled=false)
+## @param global.elasticsearch.service.ports.restAPI Elasticsearch service restAPI port to be used in the Kibana subchart (ignored if kibanaEnabled=false)
 ## @param global.kibanaEnabled Whether or not to enable Kibana
 ##
 global:
@@ -17,24 +18,39 @@ global:
   ##
   imagePullSecrets: []
   storageClass: ""
-  coordinating:
-    name: coordinating-only
+  elasticsearch:
+    service:
+      name: elasticsearch
+      ports:
+        restAPI: 9200
   kibanaEnabled: false
 
 ## @section Common parameters
 
-## @param nameOverride String to partially override common.names.fullname template (will maintain the release name)
+## @param kubeVersion Override Kubernetes version
+##
+kubeVersion: ""
+## @param nameOverride String to partially override common.names.fullname
 ##
 nameOverride: ""
-## @param fullnameOverride String to fully override common.names.fullname template
+## @param fullnameOverride String to fully override common.names.fullname
 ##
 fullnameOverride: ""
-## @param clusterDomain Kubernetes cluster domain
+## @param commonLabels Labels to add to all deployed objects
+##
+commonLabels: {}
+## @param commonAnnotations Annotations to add to all deployed objects
+##
+commonAnnotations: {}
+## @param clusterDomain Kubernetes cluster domain name
 ##
 clusterDomain: cluster.local
 ## @param extraDeploy Array of extra objects to deploy with the release
 ##
 extraDeploy: []
+## @param namespaceOverride String to fully override common.names.namespace
+##
+namespaceOverride: ""
 
 ## Enable diagnostic mode in the deployment
 ##
@@ -51,24 +67,119 @@ diagnosticMode:
   args:
     - infinity
 
-## @section Elasticsearch parameters
+## @section Elasticsearch cluster Parameters
+
+## @param clusterName Elasticsearch cluster name
+##
+clusterName: elastic
+## @param containerPorts.restAPI Elasticsearch REST API port
+## @param containerPorts.transport Elasticsearch Transport port
+##
+containerPorts:
+  restAPI: 9200
+  transport: 9300
+## @param plugins Comma, semi-colon or space separated list of plugins to install at initialization
+## ref: https://github.com/bitnami/bitnami-docker-elasticsearch#environment-variables
+##
+plugins: ""
+## @param snapshotRepoPath File System snapshot repository path
+## ref: https://github.com/bitnami/bitnami-docker-elasticsearch#environment-variables
+##
+snapshotRepoPath: ""
+## @param config Override elasticsearch configuration
+##
+config: {}
+## @param extraConfig Append extra configuration to the elasticsearch node configuration
+## Use this instead of `config` to add more configuration
+## See below example:
+## extraConfig:
+##   node:
+##     store:
+##       allow_mmap: false
+## ref: https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html
+##
+extraConfig: {}
+## @param extraVolumes A list of volumes to be added to the pod
+## Example Use Case: mount ssl certificates when elasticsearch has tls enabled
+## extraVolumes:
+##   - name: es-certs
+##     secret:
+##       defaultMode: 420
+##       secretName: es-certs
+extraVolumes: []
+## @param extraVolumeMounts A list of volume mounts to be added to the pod
+## extraVolumeMounts:
+##   - name: es-certs
+##     mountPath: /certs
+##     readOnly: true
+extraVolumeMounts: []
+## @param initScripts Dictionary of init scripts. Evaluated as a template.
+## Specify dictionary of scripts to be run at first boot
+## Alternatively, you can put your scripts under the files/docker-entrypoint-initdb.d directory
+## For example:
+## initScripts:
+##   my_init_script.sh: |
+##      #!/bin/sh
+##      echo "Do something."
+##
+initScripts: {}
+## @param initScriptsCM ConfigMap with the init scripts. Evaluated as a template.
+## Note: This will override initScripts
+##
+initScriptsCM: ""
+## @param initScriptsSecret Secret containing `/docker-entrypoint-initdb.d` scripts to be executed at initialization time that contain sensitive data. Evaluated as a template.
+##
+initScriptsSecret: ""
+## @param extraEnvVars Array containing extra env vars to be added to all pods (evaluated as a template)
+## For example:
+## extraEnvVars:
+##  - name: MY_ENV_VAR
+##    value: env_var_value
+##
+extraEnvVars: []
+## @param extraEnvVarsCM ConfigMap containing extra env vars to be added to all pods (evaluated as a template)
+##
+extraEnvVarsCM: ""
+## @param extraEnvVarsSecret Secret containing extra env vars to be added to all pods (evaluated as a template)
+##
+extraEnvVarsSecret: ""
+## @param sidecars Add additional sidecar containers to the all elasticsearch node pod(s)
+## e.g:
+## sidecars:
+##   - name: your-image-name
+##     image: your-image
+##     imagePullPolicy: Always
+##     ports:
+##       - name: portname
+##         containerPort: 1234
+##
+sidecars: []
+## @param initContainers Add additional init containers to the all elasticsearch node pod(s)
+## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+## e.g:
+## initContainers:
+##  - name: your-image-name
+##    image: your-image
+##    imagePullPolicy: Always
+##    command: ['sh', '-c', 'echo "hello world"']
+##
+initContainers: []
 
-## Bitnami Elasticsearch image version
-## ref: https://hub.docker.com/r/bitnami/elasticsearch/tags/
+## Bitnami Elasticsearch image
 ## @param image.registry Elasticsearch image registry
 ## @param image.repository Elasticsearch image repository
 ## @param image.tag Elasticsearch image tag (immutable tags are recommended)
 ## @param image.pullPolicy Elasticsearch image pull policy
 ## @param image.pullSecrets Elasticsearch image pull secrets
-## @param image.debug Enable image debug mode
+## @param image.debug Enable Elasticsearch image debug mode
 ##
 image:
   registry: docker.io
   repository: bitnami/elasticsearch
-  tag: 7.17.3-debian-10-r0
+  tag: 8.2.0-debian-10-r0
   ## Specify a imagePullPolicy
   ## Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'
-  ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images
+  ## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images
   ##
   pullPolicy: IfNotPresent
   ## Optionally specify an array of imagePullSecrets.
@@ -79,7 +190,7 @@ image:
   ##   - myRegistryKeySecretName
   ##
   pullSecrets: []
-  ## Set to true if you would like to see extra information on logs
+  ## Enable debug mode
   ##
   debug: false
 
@@ -94,7 +205,7 @@ security:
   ## Ref: https://github.com/bitnami/bitnami-docker-elasticsearch#security
   ##
   elasticPassword: ""
-  ## @param security.existingSecret Name of the existing secret containing the Elasticsearch password
+  ## @param security.existingSecret Name of the existing secret containing the Elasticsearch password and
   ##
   existingSecret: ""
   ## FIPS mode
@@ -130,12 +241,6 @@ security:
       existingSecret: ""
     coordinating:
       existingSecret: ""
-    ## @param security.tls.keystorePassword Password to access the JKS/PKCS12 keystore or PEM key when they are password-protected.
-    ##
-    keystorePassword: ""
-    ## @param security.tls.truststorePassword Password to access the JKS/PKCS12 truststore when they are password-protected.
-    ##
-    truststorePassword: ""
     ## @param security.tls.keystoreFilename Name of the keystore file
     ##
     keystoreFilename: elasticsearch.keystore.jks
@@ -146,213 +251,312 @@ security:
     ## Ignored when using autoGenerated certs.
     ##
     usePemCerts: false
+    ## @param security.tls.passwordsSecret Existing secret containing the Keystore and Truststore passwords, or key password if PEM certs are used
+    ##
+    passwordsSecret: ""
+    ## @param security.tls.keystorePassword Password to access the JKS/PKCS12 keystore or PEM key when they are password-protected.
+    ## Ignored if security.tls.passwordsSecret is provided.
+    ##
+    keystorePassword: ""
+    ## @param security.tls.truststorePassword Password to access the JKS/PKCS12 truststore when they are password-protected.
+    ## Ignored if security.tls.passwordsSecret is provided.
+    ##
+    truststorePassword: ""
     ## @param security.tls.keyPassword Password to access the PEM key when they are password-protected.
+    ## Ignored if security.tls.passwordsSecret is provided.
     ##
     keyPassword: ""
+    ## @param security.tls.secretKeystoreKey Name of the secret key containing the Keystore password
+    ##
+    secretKeystoreKey: ""
+    ## @param security.tls.secretTruststoreKey Name of the secret key containing the Truststore password
+    ##
+    secretTruststoreKey: ""
+    ## @param security.tls.secretKey Name of the secret key containing the PEM key password
+    ##
+    secretKey: ""
 
-## Elasticsearch cluster name
-## @param name Elasticsearch cluster name
-##
-name: elastic
-## @param plugins Comma, semi-colon or space separated list of plugins to install at initialization
-## ref: https://github.com/bitnami/bitnami-docker-elasticsearch#environment-variables
-##
-plugins: ""
-## @param snapshotRepoPath File System snapshot repository path
-## ref: https://github.com/bitnami/bitnami-docker-elasticsearch#environment-variables
-##
-snapshotRepoPath: ""
-## @param config Override elasticsearch configuration
-##
-config: {}
-## @param extraConfig Append extra configuration to the elasticsearch node configuration
-## Use this instead of `config` to add more configuration
-## See below example:
-## extraConfig:
-##   node:
-##     store:
-##       allow_mmap: false
-## ref: https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html
-##
-extraConfig: {}
-## @param extraVolumes A list of volumes to be added to the pod
-## Example Use Case: mount ssl certificates when elasticsearch has tls enabled
-## extraVolumes:
-##   - name: es-certs
-##     secret:
-##       defaultMode: 420
-##       secretName: es-certs
-extraVolumes: []
-## @param extraVolumeMounts A list of volume mounts to be added to the pod
-## extraVolumeMounts:
-##   - name: es-certs
-##     mountPath: /certs
-##     readOnly: true
-extraVolumeMounts: []
-## @param initScripts Dictionary of init scripts. Evaluated as a template.
-## Specify dictionary of scripts to be run at first boot
-## Alternatively, you can put your scripts under the files/docker-entrypoint-initdb.d directory
-## For example:
-## initScripts:
-##   my_init_script.sh: |
-##      #!/bin/sh
-##      echo "Do something."
-##
-initScripts: {}
-## @param initScriptsCM ConfigMap with the init scripts. Evaluated as a template.
-## Note: This will override initScripts
-##
-initScriptsCM: ""
-## @param initScriptsSecret Secret containing `/docker-entrypoint-initdb.d` scripts to be executed at initialization time that contain sensitive data. Evaluated as a template.
-##
-initScriptsSecret: ""
-## @param extraEnvVars Array containing extra env vars to be added to all pods (evaluated as a template)
-## For example:
-## extraEnvVars:
-##  - name: MY_ENV_VAR
-##    value: env_var_value
+## @section Traffic Exposure Parameters
 ##
-extraEnvVars: []
-## @param extraEnvVarsConfigMap ConfigMap containing extra env vars to be added to all pods (evaluated as a template)
+
+## Elasticsearch service parameters
 ##
-extraEnvVarsConfigMap: ""
-## @param extraEnvVarsSecret Secret containing extra env vars to be added to all pods (evaluated as a template)
+service:
+  ## @param service.type Elasticsearch service type
+  ##
+  type: ClusterIP
+  ## @param service.ports.restAPI Elasticsearch service REST API port
+  ## @param service.ports.transport Elasticsearch service transport port
+  ##
+  ports:
+    restAPI: 9200
+    transport: 9300
+  ## Node ports to expose
+  ## @param service.nodePorts.restAPI Node port for REST API
+  ## @param service.nodePorts.transport Node port for REST API
+  ## NOTE: choose port between <30000-32767>
+  ##
+  nodePorts:
+    restAPI: ""
+    transport: ""
+  ## @param service.clusterIP Elasticsearch service Cluster IP
+  ## e.g.:
+  ## clusterIP: None
+  ##
+  clusterIP: ""
+  ## @param service.loadBalancerIP Elasticsearch service Load Balancer IP
+  ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-loadbalancer
+  ##
+  loadBalancerIP: ""
+  ## @param service.loadBalancerSourceRanges Elasticsearch service Load Balancer sources
+  ## ref: https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service
+  ## e.g:
+  ## loadBalancerSourceRanges:
+  ##   - 10.10.10.0/24
+  ##
+  loadBalancerSourceRanges: []
+  ## @param service.externalTrafficPolicy Elasticsearch service external traffic policy
+  ## ref http://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip
+  ##
+  externalTrafficPolicy: Cluster
+  ## @param service.annotations Additional custom annotations for Elasticsearch service
+  ##
+  annotations: {}
+  ## @param service.extraPorts Extra ports to expose in Elasticsearch service (normally used with the `sidecars` value)
+  ##
+  extraPorts: []
+  ## @param service.sessionAffinity Session Affinity for Kubernetes service, can be "None" or "ClientIP"
+  ## If "ClientIP", consecutive client requests will be directed to the same Pod
+  ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies
+  ##
+  sessionAffinity: None
+  ## @param service.sessionAffinityConfig Additional settings for the sessionAffinity
+  ## sessionAffinityConfig:
+  ##   clientIP:
+  ##     timeoutSeconds: 300
+  ##
+  sessionAffinityConfig: {}
+
+## Elasticsearch ingress parameters
+## ref: http://kubernetes.io/docs/user-guide/ingress/
 ##
-extraEnvVarsSecret: ""
+ingress:
+  ## @param ingress.enabled Enable ingress record generation for Elasticsearch
+  ##
+  enabled: false
+  ## @param ingress.pathType Ingress path type
+  ##
+  pathType: ImplementationSpecific
+  ## @param ingress.apiVersion Force Ingress API version (automatically detected if not set)
+  ##
+  apiVersion: ""
+  ## @param ingress.hostname Default host for the ingress record
+  ##
+  hostname: elasticsearch.local
+  ## @param ingress.path Default path for the ingress record
+  ## NOTE: You may need to set this to '/*' in order to use this with ALB ingress controllers
+  ##
+  path: /
+  ## @param ingress.annotations Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.
+  ## Use this parameter to set the required annotations for cert-manager, see
+  ## ref: https://cert-manager.io/docs/usage/ingress/#supported-annotations
+  ## e.g:
+  ## annotations:
+  ##   kubernetes.io/ingress.class: nginx
+  ##   cert-manager.io/cluster-issuer: cluster-issuer-name
+  ##
+  annotations: {}
+  ## @param ingress.tls Enable TLS configuration for the host defined at `ingress.hostname` parameter
+  ## TLS certificates will be retrieved from a TLS secret with name: `{{- printf "%s-tls" .Values.ingress.hostname }}`
+  ## You can:
+  ##   - Use the `ingress.secrets` parameter to create this TLS secret
+  ##   - Relay on cert-manager to create it by setting the corresponding annotations
+  ##   - Relay on Helm to create self-signed certificates by setting `ingress.selfSigned=true`
+  ##
+  tls: false
+  ## @param ingress.selfSigned Create a TLS secret for this ingress record using self-signed certificates generated by Helm
+  ##
+  selfSigned: false
+  ## @param ingress.ingressClassName IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)
+  ## This is supported in Kubernetes 1.18+ and required if you have more than one IngressClass marked as the default for your cluster .
+  ## ref: https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/
+  ##
+  ingressClassName: ""
+  ## @param ingress.extraRules An array with additional ingress rules, evaluated as a template.
+  ##
+  extraRules: []
+  ## @param ingress.extraHosts An array with additional hostname(s) to be covered with the ingress record
+  ## e.g:
+  ## extraHosts:
+  ##   - name: elasticsearch.local
+  ##     path: /
+  ##
+  extraHosts: []
+  ## @param ingress.extraPaths An array with additional arbitrary paths that may need to be added to the ingress under the main host
+  ## e.g:
+  ## extraPaths:
+  ## - path: /*
+  ##   backend:
+  ##     serviceName: ssl-redirect
+  ##     servicePort: use-annotation
+  ##
+  extraPaths: []
+  ## @param ingress.extraTls TLS configuration for additional hostname(s) to be covered with this ingress record
+  ## ref: https://kubernetes.io/docs/concepts/services-networking/ingress/#tls
+  ## e.g:
+  ## extraTls:
+  ## - hosts:
+  ##     - elasticsearch.local
+  ##   secretName: elasticsearch.local-tls
+  ##
+  extraTls: []
+  ## @param ingress.secrets Custom TLS certificates as secrets
+  ## NOTE: 'key' and 'certificate' are expected in PEM format
+  ## NOTE: 'name' should line up with a 'secretName' set further up
+  ## If it is not set and you're using cert-manager, this is unneeded, as it will create a secret for you with valid certificates
+  ## If it is not set and you're NOT using cert-manager either, self-signed certificates will be created valid for 365 days
+  ## It is also possible to create and manage the certificates outside of this helm chart
+  ## Please see README.md for more information
+  ## e.g:
+  ## secrets:
+  ##   - name: elasticsearch.local-tls
+  ##     key: |-
+  ##       -----BEGIN RSA PRIVATE KEY-----
+  ##       ...
+  ##       -----END RSA PRIVATE KEY-----
+  ##     certificate: |-
+  ##       -----BEGIN CERTIFICATE-----
+  ##       ...
+  ##       -----END CERTIFICATE-----
+  ##
+  secrets: []
 
-## @section Master parameters
+## @section Master-elegible nodes parameters
 
-## Elasticsearch master-eligible node parameters
-##
 master:
-  ## @param master.name Master-eligible node pod name
+  ## @param master.masterOnly Deploy the Elasticsearch master-elegible nodes as master-only nodes. Recommended for high-demand deployments.
+  ## If you are
+  masterOnly: true
+  ## @param master.replicaCount Number of master-elegible replicas to deploy
   ##
-  name: master
-  ## @param master.fullnameOverride String to fully override elasticsearch.master.fullname template with a string
+  replicaCount: 2
+  ## @param master.nameOverride String to partially override elasticsearch.master.fullname
   ##
-  fullnameOverride: ""
-  ## @param master.replicas Desired number of Elasticsearch master-eligible nodes. Consider using an odd number of master nodes to prevent "split brain" situation.  See: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/modules-discovery-voting.html
-  ## https://www.elastic.co/guide/en/elasticsearch/reference/7.x/modules-discovery-voting.html#_even_numbers_of_master_eligible_nodes
-  ## https://www.elastic.co/guide/en/elasticsearch/reference/7.x/modules-discovery-quorums.html#modules-discovery-quorums
+  nameOverride: ""
+  ## @param master.fullnameOverride String to fully override elasticsearch.master.fullname
   ##
-  replicas: 3
-  ## Update strategy for ElasticSearch master statefulset
+  fullnameOverride: ""
+  ## @param master.updateStrategy.type Master-elegible nodes statefulset stategy type
   ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies
-  ## @param master.updateStrategy.type Update strategy for Master statefulset
   ##
   updateStrategy:
     type: RollingUpdate
-  ## @param master.hostAliases Add deployment host aliases
-  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ## Elasticsearch resource requests and limits
+  ## ref: http://kubernetes.io/docs/user-guide/compute-resources/
+  ## @param master.resources.limits The resources limits for the master-elegible containers
+  ## @param master.resources.requests [object] The requested resources for the master-elegible containers
   ##
-  hostAliases: []
-  ## @param master.schedulerName Name of the k8s scheduler (other than default)
-  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
-  ##
-  schedulerName: ""
-  ##
-  ## @param master.heapSize Master-eligible node heap size
+  resources:
+    limits: {}
+    requests:
+      cpu: 25m
+      memory: 256Mi
+  ## @param master.heapSize Elasticsearch master-eligible node heap size.
+  ## Note: The recommended heapSize is half of the container's memory.
+  ## If omitted, it will be automatically set.
+  ## Example:
+  ##   heapSize: 128m
   ##
   heapSize: 128m
-  ## @param master.podAnnotations Annotations for master-eligible pods.
-  ##
-  podAnnotations: {}
-  ## @param master.podLabels Extra labels to add to Pod
-  ##
-  podLabels: {}
-  ## Pod Security Context for master-eligible pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param master.securityContext.enabled Enable security context for master-eligible pods
-  ## @param master.securityContext.fsGroup Group ID for the container for master-eligible pods
-  ## @param master.securityContext.runAsUser User ID for the container for master-eligible pods
-  ##
-  securityContext:
-    enabled: true
-    fsGroup: 1001
-    runAsUser: 1001
-  ## Pod Security Context for master-eligible pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param master.podSecurityContext.enabled Enable security context for master-eligible pods
-  ## @param master.podSecurityContext.fsGroup Group ID for the container for master-eligible pods
+  ## Configure Pods Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param master.podSecurityContext.enabled Enabled master-elegible pods' Security Context
+  ## @param master.podSecurityContext.fsGroup Set master-elegible pod's Security Context fsGroup
   ##
   podSecurityContext:
-    enabled: false
+    enabled: true
     fsGroup: 1001
-  ## Container Security Context for master-eligible pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param master.containerSecurityContext.enabled Enable security context for master-eligible pods
-  ## @param master.containerSecurityContext.runAsUser User ID for the container for master-eligible pods
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param master.containerSecurityContext.enabled Enabled master-elegible containers' Security Context
+  ## @param master.containerSecurityContext.runAsUser Set master-elegible containers' Security Context runAsUser
+  ## @param master.containerSecurityContext.runAsNonRoot Set master-elegible containers' Security Context runAsNonRoot
   ##
   containerSecurityContext:
-    enabled: false
+    enabled: true
     runAsUser: 1001
-  ## @param master.podAffinityPreset Master-eligible Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
+    runAsNonRoot: true
+  ## @param master.hostAliases master-elegible pods host aliases
+  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ##
+  hostAliases: []
+  ## @param master.podLabels Extra labels for master-elegible pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
+  ##
+  podLabels: {}
+  ## @param master.podAnnotations Annotations for master-elegible pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
+  ##
+  podAnnotations: {}
+  ## @param master.podAffinityPreset Pod affinity preset. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`
   ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAffinityPreset: ""
-  ## @param master.podAntiAffinityPreset Master-eligible Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
+  ## @param master.podAntiAffinityPreset Pod anti-affinity preset. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAntiAffinityPreset: ""
-  ## Node affinity preset. Allowed values: soft, hard
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
-  ## @param master.nodeAffinityPreset.type Master-eligible Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## @param master.nodeAffinityPreset.key Master-eligible Node label key to match Ignored if `affinity` is set.
-  ## @param master.nodeAffinityPreset.values Master-eligible Node label values to match. Ignored if `affinity` is set.
+  ## Node master.affinity preset
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
   ##
   nodeAffinityPreset:
+    ## @param master.nodeAffinityPreset.type Node affinity preset type. Ignored if `master.affinity` is set. Allowed values: `soft` or `hard`
+    ##
     type: ""
-    ## E.g.
-    ## key: "kubernetes.io/e2e-az-name"
+    ## @param master.nodeAffinityPreset.key Node label key to match. Ignored if `master.affinity` is set
     ##
     key: ""
+    ## @param master.nodeAffinityPreset.values Node label values to match. Ignored if `master.affinity` is set
     ## E.g.
     ## values:
     ##   - e2e-az1
     ##   - e2e-az2
     ##
     values: []
-  ## @param master.affinity Master-eligible Affinity for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
-  ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
+  ## @param master.affinity Affinity for master-elegible pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
+  ## NOTE: `master.podAffinityPreset`, `master.podAntiAffinityPreset`, and `master.nodeAffinityPreset` will be ignored when it's set
   ##
   affinity: {}
-  ## @param master.priorityClassName Master pods Priority Class Name
-  ## ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
-  ##
-  priorityClassName: ""
-  ## @param master.nodeSelector Master-eligible Node labels for pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
+  ## @param master.nodeSelector Node labels for master-elegible pods assignment
+  ## ref: https://kubernetes.io/docs/user-guide/node-selection/
   ##
   nodeSelector: {}
-  ## @param master.tolerations Master-eligible Tolerations for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
+  ## @param master.tolerations Tolerations for master-elegible pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
   ##
   tolerations: []
+  ## @param master.priorityClassName master-elegible pods' priorityClassName
+  ##
+  priorityClassName: ""
+  ## @param master.schedulerName Name of the k8s scheduler (other than default) for master-elegible pods
+  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+  ##
+  schedulerName: ""
+  ## @param master.terminationGracePeriodSeconds In seconds, time the given to the Elasticsearch Master pod needs to terminate gracefully
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods
+  ##
+  terminationGracePeriodSeconds: ""
   ## @param master.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
   ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods
   ##
   topologySpreadConstraints: []
-  ## Elasticsearch master-eligible container's resource requests and limits
-  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ## We usually recommend not to specify default resources and to leave this as a conscious
-  ## choice for the user. This also increases chances charts run on environments with little
-  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
-  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-  ## @param master.resources.limits The resources limits for the container
-  ## @param master.resources.requests [object] The requested resources for the container
+  ## @param master.podManagementPolicy podManagementPolicy to manage scaling operation of Elasticsearch master pods
+  ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-management-policies
   ##
-  resources:
-    ## Example:
-    ## limits:
-    ##    cpu: 100m
-    ##    memory: 128Mi
-    limits: {}
-    requests:
-      cpu: 25m
-      memory: 256Mi
-  ## Elasticsearch master-eligible container's startup probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
+  podManagementPolicy: "Parallel"
+  ## Configure extra options for Elasticsearch master-elegible containers' liveness, readiness and startup probes
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
   ## @param master.startupProbe.enabled Enable/disable the startup probe (master nodes pod)
   ## @param master.startupProbe.initialDelaySeconds Delay before startup probe is initiated (master nodes pod)
   ## @param master.startupProbe.periodSeconds How often to perform the probe (master nodes pod)
@@ -367,8 +571,6 @@ master:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch master-eligible container's liveness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
   ## @param master.livenessProbe.enabled Enable/disable the liveness probe (master-eligible nodes pod)
   ## @param master.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (master-eligible nodes pod)
   ## @param master.livenessProbe.periodSeconds How often to perform the probe (master-eligible nodes pod)
@@ -383,8 +585,6 @@ master:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch master-eligible container's readiness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
   ## @param master.readinessProbe.enabled Enable/disable the readiness probe (master-eligible nodes pod)
   ## @param master.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (master-eligible nodes pod)
   ## @param master.readinessProbe.periodSeconds How often to perform the probe (master-eligible nodes pod)
@@ -408,12 +608,55 @@ master:
   ## @param master.customReadinessProbe Override default readiness probe
   ##
   customReadinessProbe: {}
-  ## @param master.initContainers Extra init containers to add to the Elasticsearch master-eligible pod(s)
+  ## @param master.command Override default container command (useful when using custom images)
   ##
-  initContainers: []
-  ## @param master.sidecars Extra sidecar containers to add to the Elasticsearch master-eligible pod(s)
+  command: []
+  ## @param master.args Override default container args (useful when using custom images)
+  ##
+  args: []
+  ## @param master.lifecycleHooks for the master-elegible container(s) to automate configuration before or after startup
+  ##
+  lifecycleHooks: {}
+  ## @param master.extraEnvVars Array with extra environment variables to add to master-elegible nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
+  ##
+  extraEnvVars: []
+  ## @param master.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for master-elegible nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param master.extraEnvVarsSecret Name of existing Secret containing extra env vars for master-elegible nodes
+  ##
+  extraEnvVarsSecret: ""
+  ## @param master.extraVolumes Optionally specify extra list of additional volumes for the master-elegible pod(s)
+  ##
+  extraVolumes: []
+  ## @param master.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the master-elegible container(s)
+  ##
+  extraVolumeMounts: []
+  ## @param master.sidecars Add additional sidecar containers to the master-elegible pod(s)
+  ## e.g:
+  ## sidecars:
+  ##   - name: your-image-name
+  ##     image: your-image
+  ##     imagePullPolicy: Always
+  ##     ports:
+  ##       - name: portname
+  ##         containerPort: 1234
   ##
   sidecars: []
+  ## @param master.initContainers Add additional init containers to the master-elegible pod(s)
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+  ## e.g:
+  ## initContainers:
+  ##  - name: your-image-name
+  ##    image: your-image
+  ##    imagePullPolicy: Always
+  ##    command: ['sh', '-c', 'echo "hello world"']
+  ##
+  initContainers: []
   ## Enable persistence using Persistent Volume Claims
   ## ref: https://kubernetes.io/docs/user-guide/persistent-volumes/
   ##
@@ -453,261 +696,162 @@ master:
     ## @param master.persistence.size Persistent Volume Size
     ##
     size: 8Gi
-  ## Service parameters for master-eligible node(s)
-  ##
-  service:
-    ## @param master.service.type Kubernetes Service type (master-eligible nodes)
-    ##
-    type: ClusterIP
-    ## @param master.service.port Kubernetes Service port for Elasticsearch transport port (master-eligible nodes)
-    ##
-    port: 9300
-    ## @param master.service.nodePort Kubernetes Service nodePort (master-eligible nodes)
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
-    ##
-    nodePort: ""
-    ## @param master.service.annotations Annotations for master-eligible nodes service
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
-    ##
-    annotations: {}
-    ## @param master.service.loadBalancerIP loadBalancerIP if master-eligible nodes service type is `LoadBalancer`
-    ## Set the LoadBalancer service type to internal only.
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
-    ##
-    loadBalancerIP: ""
-  ## Configure the ingress resource that allows you to access the
-  ## Set up the URL
-  ## ref: https://kubernetes.io/docs/user-guide/ingress/
-  ##
-  ingress:
-    ## @param master.ingress.enabled Enable ingress controller resource
-    ##
-    enabled: false
-
-    ## @param master.ingress.pathType Ingress Path type
-    ##
-    pathType: ImplementationSpecific
-    ## @param master.ingress.apiVersion Override API Version (automatically detected if not set)
-    ##
-    apiVersion: ""
-    ## @param master.ingress.hostname Default host for the ingress resource. If specified as "*" no host rule is configured
-    ##
-    hostname: master.local
-    ## @param master.ingress.path The Path to Master. You may need to set this to '/*' in order to use this with ALB ingress controllers.
-    ##
-    path: /
-    ## @param master.ingress.annotations Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.
-    ## For a full list of possible ingress annotations, please see
-    ## ref: https://github.com/kubernetes/ingress-nginx/blob/master/docs/user-guide/nginx-configuration/annotations.md
-    ## Use this parameter to set the required annotations for cert-manager, see
-    ## ref: https://cert-manager.io/docs/usage/ingress/#supported-annotations
-    ##
-    ## e.g:
-    ## annotations:
-    ##   kubernetes.io/ingress.class: nginx
-    ##   cert-manager.io/cluster-issuer: cluster-issuer-name
-    ##
-    annotations: {}
-    ## @param master.ingress.tls Enable TLS configuration for the hostname defined at master.ingress.hostname parameter
-    ## TLS certificates will be retrieved from a TLS secret with name: {{- printf "%s-tls" .Values.master.ingress.hostname }}
-    ## You can use the master.ingress.secrets parameter to create this TLS secret or relay on cert-manager to create it
-    ##
-    tls: false
-    ## @param master.ingress.extraHosts The list of additional hostnames to be covered with this ingress record.
-    ## Most likely the hostname above will be enough, but in the event more hosts are needed, this is an array
-    ## extraHosts:
-    ## - name: master.local
-    ##   path: /
-    ##
-    extraHosts: []
-    ## @param master.ingress.extraPaths Additional arbitrary path/backend objects
-    ## For example: The ALB ingress controller requires a special rule for handling SSL redirection.
-    ## extraPaths:
-    ## - path: /*
-    ##   backend:
-    ##     serviceName: ssl-redirect
-    ##     servicePort: use-annotation
-    ##
-    extraPaths: []
-    ## @param master.ingress.extraTls The tls configuration for additional hostnames to be covered with this ingress record.
-    ## see: https://kubernetes.io/docs/concepts/services-networking/ingress/#tls
-    ## extraTls:
-    ## - hosts:
-    ##     - master.local
-    ##   secretName: master.local-tls
-    ##
-    extraTls: []
-    ## @param master.ingress.secrets If you're providing your own certificates, please use this to add the certificates as secrets
-    ## key and certificate should start with -----BEGIN CERTIFICATE----- or
-    ## -----BEGIN RSA PRIVATE KEY-----
-    ##
-    ## name should line up with a tlsSecret set further up
-    ## If you're using cert-manager, this is unneeded, as it will create the secret for you if it is not set
-    ##
-    ## It is also possible to create and manage the certificates outside of this helm chart
-    ## Please see README.md for more information
-    ## e.g:
-    ## - name: master.local-tls
-    ##   key:
-    ##   certificate:
-    ##
-    secrets: []
-  ## Provide functionality to use RBAC
+  ## Pods Service Account
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
+  ## @param master.serviceAccount.create Specifies whether a ServiceAccount should be created
+  ## @param master.serviceAccount.name Name of the service account to use. If not set and create is true, a name is generated using the fullname template.
+  ## @param master.serviceAccount.automountServiceAccountToken Automount service account token for the server service account
+  ## @param master.serviceAccount.annotations Annotations for service account. Evaluated as a template. Only used if `create` is `true`.
   ##
   serviceAccount:
-    ## @param master.serviceAccount.create Enable creation of ServiceAccount for the master node
-    ##
     create: false
-    ## @param master.serviceAccount.name Name of the created serviceAccount
-    ## If not set and create is true, a name is generated using the fullname template
     name: ""
-  ## Autoscaling configuration
-  ## @param master.autoscaling.enabled Enable autoscaling for master replicas
-  ## @param master.autoscaling.minReplicas Minimum number of master replicas
-  ## @param master.autoscaling.maxReplicas Maximum number of master replicas
-  ## @param master.autoscaling.targetCPU Target CPU utilization percentage for master replica autoscaling
-  ## @param master.autoscaling.targetMemory Target Memory utilization percentage for master replica autoscaling
+    automountServiceAccountToken: true
+    annotations: {}
+  ## Enable HorizontalPodAutoscaler for Elasticsearch Master pods
+  ## ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
+  ## @param master.autoscaling.enabled Whether enable horizontal pod autoscale
+  ## @param master.autoscaling.minReplicas Configure a minimum amount of pods
+  ## @param master.autoscaling.maxReplicas Configure a maximum amount of pods
+  ## @param master.autoscaling.targetCPU Define the CPU target to trigger the scaling actions (utilization percentage)
+  ## @param master.autoscaling.targetMemory Define the memory target to trigger the scaling actions (utilization percentage)
   ##
   autoscaling:
     enabled: false
-    minReplicas: 2
+    minReplicas: 3
     maxReplicas: 11
     targetCPU: ""
     targetMemory: ""
 
-## @section Coordinating parameters
+## @section Data-only nodes parameters
 
-## Elasticsearch coordinating-only node parameters
-##
-coordinating:
-  ## @param coordinating.fullnameOverride String to fully override elasticsearch.coordinating.fullname template with a string
-  ##
-  fullnameOverride: ""
-  ## @param coordinating.replicas Desired number of Elasticsearch coordinating-only nodes
+data:
+  ## @param data.replicaCount Number of data-only replicas to deploy
   ##
-  replicas: 2
-  ## @param coordinating.hostAliases Add deployment host aliases
-  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  replicaCount: 2
+  ## @param data.nameOverride String to partially override elasticsearch.data.fullname
   ##
-  hostAliases: []
-  ## @param coordinating.schedulerName Name of the k8s scheduler (other than default)
-  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+  nameOverride: ""
+  ## @param data.fullnameOverride String to fully override elasticsearch.data.fullname
   ##
-  schedulerName: ""
-  ## Update strategy for ElasticSearch coordinating statefulset
+  fullnameOverride: ""
+  ## @param data.updateStrategy.type Data-only nodes statefulset stategy type
   ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies
-  ## @param coordinating.updateStrategy.type Update strategy for Coordinating Statefulset
   ##
   updateStrategy:
     type: RollingUpdate
-  ## @param coordinating.heapSize Coordinating-only node heap size
+  ## Elasticsearch resource requests and limits
+  ## ref: http://kubernetes.io/docs/user-guide/compute-resources/
+  ## @param data.resources.limits The resources limits for the data containers
+  ## @param data.resources.requests [object] The requested resources for the data containers
   ##
-  heapSize: 128m
-  ## @param coordinating.podAnnotations Annotations for coordinating pods.
-  ##
-  podAnnotations: {}
-  ## @param coordinating.podLabels Extra labels to add to Pod
-  ##
-  podLabels: {}
-  ## Pod Security Context for coordinating-only pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param coordinating.securityContext.enabled Enable security context for coordinating-only pods
-  ## @param coordinating.securityContext.fsGroup Group ID for the container for coordinating-only pods
-  ## @param coordinating.securityContext.runAsUser User ID for the container for coordinating-only pods
+  resources:
+    limits: {}
+    requests:
+      cpu: 25m
+      memory: 2048Mi
+  ## @param data.heapSize Elasticsearch data node heap size.
+  ## Note: The recommended heapSize is half of the container's memory.
+  ## If omitted, it will be automatically set.
+  ## Example:
+  ##   heapSize: 128m
   ##
-  securityContext:
-    enabled: true
-    fsGroup: 1001
-    runAsUser: 1001
-  ## Pod Security Context for coordinating-only pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param coordinating.podSecurityContext.enabled Enable security context for coordinating-only pods
-  ## @param coordinating.podSecurityContext.fsGroup Group ID for the container for coordinating-only pods
+  heapSize: 1024m
+  ## Configure Pods Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param data.podSecurityContext.enabled Enabled data pods' Security Context
+  ## @param data.podSecurityContext.fsGroup Set data pod's Security Context fsGroup
   ##
   podSecurityContext:
-    enabled: false
+    enabled: true
     fsGroup: 1001
-  ## Container Security Context for coordinating-only pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param coordinating.containerSecurityContext.enabled Enable security context for coordinating-only pods
-  ## @param coordinating.containerSecurityContext.runAsUser User ID for the container for coordinating-only pods
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param data.containerSecurityContext.enabled Enabled data containers' Security Context
+  ## @param data.containerSecurityContext.runAsUser Set data containers' Security Context runAsUser
+  ## @param data.containerSecurityContext.runAsNonRoot Set data containers' Security Context runAsNonRoot
   ##
   containerSecurityContext:
-    enabled: false
+    enabled: true
     runAsUser: 1001
-  ## @param coordinating.podAffinityPreset Coordinating Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
+    runAsNonRoot: true
+  ## @param data.hostAliases data pods host aliases
+  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ##
+  hostAliases: []
+  ## @param data.podLabels Extra labels for data pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
+  ##
+  podLabels: {}
+  ## @param data.podAnnotations Annotations for data pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
+  ##
+  podAnnotations: {}
+  ## @param data.podAffinityPreset Pod affinity preset. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`
   ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAffinityPreset: ""
-  ## @param coordinating.podAntiAffinityPreset Coordinating Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
+  ## @param data.podAntiAffinityPreset Pod anti-affinity preset. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAntiAffinityPreset: ""
-  ## Node affinity preset
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
-  ## @param coordinating.nodeAffinityPreset.type Coordinating Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## @param coordinating.nodeAffinityPreset.key Coordinating Node label key to match Ignored if `affinity` is set.
-  ## @param coordinating.nodeAffinityPreset.values Coordinating Node label values to match. Ignored if `affinity` is set.
+  ## Node data.affinity preset
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
   ##
   nodeAffinityPreset:
+    ## @param data.nodeAffinityPreset.type Node affinity preset type. Ignored if `data.affinity` is set. Allowed values: `soft` or `hard`
+    ##
     type: ""
-    ## E.g.
-    ## key: "kubernetes.io/e2e-az-name"
+    ## @param data.nodeAffinityPreset.key Node label key to match. Ignored if `data.affinity` is set
     ##
     key: ""
+    ## @param data.nodeAffinityPreset.values Node label values to match. Ignored if `data.affinity` is set
     ## E.g.
     ## values:
     ##   - e2e-az1
     ##   - e2e-az2
     ##
     values: []
-  ## @param coordinating.affinity Coordinating Affinity for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
-  ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
+  ## @param data.affinity Affinity for data pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
+  ## NOTE: `data.podAffinityPreset`, `data.podAntiAffinityPreset`, and `data.nodeAffinityPreset` will be ignored when it's set
   ##
   affinity: {}
-  ## @param coordinating.priorityClassName Coordinating pods Priority Class Name
-  ## ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
-  ##
-  priorityClassName: ""
-  ## @param coordinating.nodeSelector Coordinating Node labels for pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
+  ## @param data.nodeSelector Node labels for data pods assignment
+  ## ref: https://kubernetes.io/docs/user-guide/node-selection/
   ##
   nodeSelector: {}
-  ## @param coordinating.tolerations Coordinating Tolerations for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
+  ## @param data.tolerations Tolerations for data pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
   ##
   tolerations: []
-  ## @param coordinating.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
+  ## @param data.priorityClassName data pods' priorityClassName
+  ##
+  priorityClassName: ""
+  ## @param data.schedulerName Name of the k8s scheduler (other than default) for data pods
+  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+  ##
+  schedulerName: ""
+  ## @param data.terminationGracePeriodSeconds In seconds, time the given to the Elasticsearch data pod needs to terminate gracefully
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods
+  ##
+  terminationGracePeriodSeconds: ""
+  ## @param data.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
   ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods
   ##
   topologySpreadConstraints: []
-  ## Elasticsearch coordinating-only container's resource requests and limits
-  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ## We usually recommend not to specify default resources and to leave this as a conscious
-  ## choice for the user. This also increases chances charts run on environments with little
-  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
-  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-  ## @param coordinating.resources.limits The resources limits for the container
-  ## @param coordinating.resources.requests [object] The requested resources for the container
+  ## @param data.podManagementPolicy podManagementPolicy to manage scaling operation of Elasticsearch data pods
+  ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-management-policies
   ##
-  resources:
-    ## Example:
-    ## limits:
-    ##    cpu: 100m
-    ##    memory: 384Mi
-    limits: {}
-    requests:
-      cpu: 25m
-      memory: 256Mi
-  ## Elasticsearch coordinating-only container's startup probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param coordinating.startupProbe.enabled Enable/disable the startup probe (coordinating nodes pod)
-  ## @param coordinating.startupProbe.initialDelaySeconds Delay before startup probe is initiated (coordinating nodes pod)
-  ## @param coordinating.startupProbe.periodSeconds How often to perform the probe (coordinating nodes pod)
-  ## @param coordinating.startupProbe.timeoutSeconds When the probe times out (coordinating nodes pod)
-  ## @param coordinating.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param coordinating.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating nodes pod)
+  podManagementPolicy: "Parallel"
+  ## Configure extra options for Elasticsearch data containers' liveness, readiness and startup probes
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
+  ## @param data.startupProbe.enabled Enable/disable the startup probe (data nodes pod)
+  ## @param data.startupProbe.initialDelaySeconds Delay before startup probe is initiated (data nodes pod)
+  ## @param data.startupProbe.periodSeconds How often to perform the probe (data nodes pod)
+  ## @param data.startupProbe.timeoutSeconds When the probe times out (data nodes pod)
+  ## @param data.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param data.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   startupProbe:
     enabled: false
@@ -716,14 +860,12 @@ coordinating:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch coordinating-only container's liveness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param coordinating.livenessProbe.enabled Enable/disable the liveness probe (coordinating-only nodes pod)
-  ## @param coordinating.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (coordinating-only nodes pod)
-  ## @param coordinating.livenessProbe.periodSeconds How often to perform the probe (coordinating-only nodes pod)
-  ## @param coordinating.livenessProbe.timeoutSeconds When the probe times out (coordinating-only nodes pod)
-  ## @param coordinating.livenessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param coordinating.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod)
+  ## @param data.livenessProbe.enabled Enable/disable the liveness probe (data nodes pod)
+  ## @param data.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (data nodes pod)
+  ## @param data.livenessProbe.periodSeconds How often to perform the probe (data nodes pod)
+  ## @param data.livenessProbe.timeoutSeconds When the probe times out (data nodes pod)
+  ## @param data.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param data.livenessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   livenessProbe:
     enabled: true
@@ -732,14 +874,12 @@ coordinating:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch coordinating-only container's readiness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param coordinating.readinessProbe.enabled Enable/disable the readiness probe (coordinating-only nodes pod)
-  ## @param coordinating.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (coordinating-only nodes pod)
-  ## @param coordinating.readinessProbe.periodSeconds How often to perform the probe (coordinating-only nodes pod)
-  ## @param coordinating.readinessProbe.timeoutSeconds When the probe times out (coordinating-only nodes pod)
-  ## @param coordinating.readinessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param coordinating.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod)
+  ## @param data.readinessProbe.enabled Enable/disable the readiness probe (data nodes pod)
+  ## @param data.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (data nodes pod)
+  ## @param data.readinessProbe.periodSeconds How often to perform the probe (data nodes pod)
+  ## @param data.readinessProbe.timeoutSeconds When the probe times out (data nodes pod)
+  ## @param data.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param data.readinessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   readinessProbe:
     enabled: true
@@ -748,210 +888,259 @@ coordinating:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## @param coordinating.customStartupProbe Override default startup probe
+  ## @param data.customStartupProbe Override default startup probe
   ##
   customStartupProbe: {}
-  ## @param coordinating.customLivenessProbe Override default liveness probe
+  ## @param data.customLivenessProbe Override default liveness probe
   ##
   customLivenessProbe: {}
-  ## @param coordinating.customReadinessProbe Override default readiness probe
+  ## @param data.customReadinessProbe Override default readiness probe
   ##
   customReadinessProbe: {}
-  ## @param coordinating.initContainers Extra init containers to add to the Elasticsearch coordinating-only pod(s)
+  ## @param data.command Override default container command (useful when using custom images)
   ##
-  initContainers: []
-  ## @param coordinating.sidecars Extra sidecar containers to add to the Elasticsearch coordinating-only pod(s)
+  command: []
+  ## @param data.args Override default container args (useful when using custom images)
+  ##
+  args: []
+  ## @param data.lifecycleHooks for the data container(s) to automate configuration before or after startup
+  ##
+  lifecycleHooks: {}
+  ## @param data.extraEnvVars Array with extra environment variables to add to data nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
+  ##
+  extraEnvVars: []
+  ## @param data.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for data nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param data.extraEnvVarsSecret Name of existing Secret containing extra env vars for data nodes
+  ##
+  extraEnvVarsSecret: ""
+  ## @param data.extraVolumes Optionally specify extra list of additional volumes for the data pod(s)
+  ##
+  extraVolumes: []
+  ## @param data.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the data container(s)
+  ##
+  extraVolumeMounts: []
+  ## @param data.sidecars Add additional sidecar containers to the data pod(s)
+  ## e.g:
+  ## sidecars:
+  ##   - name: your-image-name
+  ##     image: your-image
+  ##     imagePullPolicy: Always
+  ##     ports:
+  ##       - name: portname
+  ##         containerPort: 1234
   ##
   sidecars: []
-  ## Service parameters for coordinating-only node(s)
+  ## @param data.initContainers Add additional init containers to the data pod(s)
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+  ## e.g:
+  ## initContainers:
+  ##  - name: your-image-name
+  ##    image: your-image
+  ##    imagePullPolicy: Always
+  ##    command: ['sh', '-c', 'echo "hello world"']
   ##
-  service:
-    ## @param coordinating.service.type Kubernetes Service type (coordinating-only nodes)
+  initContainers: []
+  ## Enable persistence using Persistent Volume Claims
+  ## ref: https://kubernetes.io/docs/user-guide/persistent-volumes/
+  ##
+  persistence:
+    ## @param data.persistence.enabled Enable persistence using a `PersistentVolumeClaim`
     ##
-    type: ClusterIP
-    ## @param coordinating.service.port Kubernetes Service port for REST API (coordinating-only nodes)
+    enabled: true
+    ## @param data.persistence.storageClass Persistent Volume Storage Class
+    ## If defined, storageClassName: <storageClass>
+    ## If set to "-", storageClassName: "", which disables dynamic provisioning
+    ## If undefined (the default) or set to null, no storageClassName spec is
+    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
+    ##   GKE, AWS & OpenStack)
     ##
-    port: 9200
-    ## @param coordinating.service.nodePort Kubernetes Service nodePort (coordinating-only nodes)
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
+    storageClass: ""
+    ## @param data.persistence.existingClaim Existing Persistent Volume Claim
+    ## then accept the value as an existing Persistent Volume Claim to which
+    ## the container should be bound
     ##
-    nodePort: ""
-    ## @param coordinating.service.annotations Annotations for coordinating-only nodes service
-    ## Set the LoadBalancer service type to internal only.
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
+    existingClaim: ""
+    ## @param data.persistence.existingVolume Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `data.persistence.selector` is set.
+    ##
+    existingVolume: ""
+    ## @param data.persistence.selector Configure custom selector for existing Persistent Volume. Overwrites `data.persistence.existingVolume`
+    ## selector:
+    ##   matchLabels:
+    ##     volume:
+    ##
+    selector: {}
+    ## @param data.persistence.annotations Persistent Volume Claim annotations
     ##
     annotations: {}
-    ## @param coordinating.service.loadBalancerIP loadBalancerIP if coordinating-only nodes service type is `LoadBalancer`
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
+    ## @param data.persistence.accessModes Persistent Volume Access Modes
     ##
-    loadBalancerIP: ""
-    ## @param coordinating.service.externalTrafficPolicy Enable client source IP preservation with externalTrafficPolicy: Local
-    ## ref http://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip
+    accessModes:
+      - ReadWriteOnce
+    ## @param data.persistence.size Persistent Volume Size
     ##
-    externalTrafficPolicy: Cluster
-  ## Provide functionality to use RBAC
+    size: 8Gi
+  ## Pods Service Account
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
+  ## @param data.serviceAccount.create Specifies whether a ServiceAccount should be created
+  ## @param data.serviceAccount.name Name of the service account to use. If not set and create is true, a name is generated using the fullname template.
+  ## @param data.serviceAccount.automountServiceAccountToken Automount service account token for the server service account
+  ## @param data.serviceAccount.annotations Annotations for service account. Evaluated as a template. Only used if `create` is `true`.
   ##
   serviceAccount:
-    ## @param coordinating.serviceAccount.create Enable creation of ServiceAccount for the coordinating-only node
-    ##
     create: false
-    ## @param coordinating.serviceAccount.name Name of the created serviceAccount
-    ## If not set and create is true, a name is generated using the fullname template
-    ##
     name: ""
-  ## Autoscaling configuration
-  ## @param coordinating.autoscaling.enabled Enable autoscaling for coordinating replicas
-  ## @param coordinating.autoscaling.minReplicas Minimum number of coordinating replicas
-  ## @param coordinating.autoscaling.maxReplicas Maximum number of coordinating replicas
-  ## @param coordinating.autoscaling.targetCPU Target CPU utilization percentage for coordinating replica autoscaling
-  ## @param coordinating.autoscaling.targetMemory Target Memory utilization percentage for coordinating replica autoscaling
+    automountServiceAccountToken: true
+    annotations: {}
+  ## Enable HorizontalPodAutoscaler for Elasticsearch data pods
+  ## ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
+  ## @param data.autoscaling.enabled Whether enable horizontal pod autoscale
+  ## @param data.autoscaling.minReplicas Configure a minimum amount of pods
+  ## @param data.autoscaling.maxReplicas Configure a maximum amount of pods
+  ## @param data.autoscaling.targetCPU Define the CPU target to trigger the scaling actions (utilization percentage)
+  ## @param data.autoscaling.targetMemory Define the memory target to trigger the scaling actions (utilization percentage)
   ##
   autoscaling:
     enabled: false
-    minReplicas: 2
+    minReplicas: 3
     maxReplicas: 11
     targetCPU: ""
     targetMemory: ""
 
-## @section Data parameters
+## @section Coordinating-only nodes parameters
 
-## Elasticsearch data node parameters
-##
-data:
-  ## @param data.name Data node pod name
-  ##
-  name: data
-  ## @param data.fullnameOverride String to fully override elasticsearch.data.fullname template with a string
-  ##
-  fullnameOverride: ""
-  ## @param data.replicas Desired number of Elasticsearch data nodes
+coordinating:
+  ## @param coordinating.replicaCount Number of coordinating-only replicas to deploy
   ##
-  replicas: 2
-  ## @param data.hostAliases Add deployment host aliases
-  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  replicaCount: 2
+  ## @param coordinating.nameOverride String to partially override elasticsearch.coordinating.fullname
   ##
-  hostAliases: []
-  ## @param data.schedulerName Name of the k8s scheduler (other than default)
-  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+  nameOverride: ""
+  ## @param coordinating.fullnameOverride String to fully override elasticsearch.coordinating.fullname
   ##
-  schedulerName: ""
-  ## Update strategy for ElasticSearch Data statefulset
+  fullnameOverride: ""
+  ## @param coordinating.updateStrategy.type Coordinating-only nodes statefulset stategy type
   ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies
-  ## @param data.updateStrategy.type Update strategy for Data statefulset
-  ## @param data.updateStrategy.rollingUpdatePartition Partition update strategy for Data statefulset
   ##
   updateStrategy:
     type: RollingUpdate
-    rollingUpdatePartition: ""
-  ## @param data.heapSize Data node heap size
-  ##
-  heapSize: 1024m
-  ## @param data.podAnnotations Annotations for data pods.
+  ## Elasticsearch resource requests and limits
+  ## ref: http://kubernetes.io/docs/user-guide/compute-resources/
+  ## @param coordinating.resources.limits The resources limits for the coordinating-only containers
+  ## @param coordinating.resources.requests [object] The requested resources for the coordinating-only containers
   ##
-  podAnnotations: {}
-  ## @param data.podLabels Extra labels to add to Pod
-  ##
-  podLabels: {}
-  ## Pod Security Context for data pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param data.securityContext.enabled Enable security context for data pods
-  ## @param data.securityContext.fsGroup Group ID for the container for data pods
-  ## @param data.securityContext.runAsUser User ID for the container for data pods
+  resources:
+    limits: {}
+    requests:
+      cpu: 25m
+      memory: 256Mi
+  ## @param coordinating.heapSize Elasticsearch coordinating node heap size.
+  ## Note: The recommended heapSize is half of the container's memory.
+  ## If omitted, it will be automatically set.
+  ## Example:
+  ##   heapSize: 128m
   ##
-  securityContext:
-    enabled: true
-    fsGroup: 1001
-    runAsUser: 1001
-  ## Pod Security Context for data pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param data.podSecurityContext.enabled Enable security context for data pods
-  ## @param data.podSecurityContext.fsGroup Group ID for the container for data pods
+  heapSize: 128m
+  ## Configure Pods Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param coordinating.podSecurityContext.enabled Enabled coordinating-only pods' Security Context
+  ## @param coordinating.podSecurityContext.fsGroup Set coordinating-only pod's Security Context fsGroup
   ##
   podSecurityContext:
     enabled: true
     fsGroup: 1001
-  ## Container Security Context for data pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param data.containerSecurityContext.enabled Enable security context for data pods
-  ## @param data.containerSecurityContext.runAsUser User ID for the container for data pods
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param coordinating.containerSecurityContext.enabled Enabled coordinating-only containers' Security Context
+  ## @param coordinating.containerSecurityContext.runAsUser Set coordinating-only containers' Security Context runAsUser
+  ## @param coordinating.containerSecurityContext.runAsNonRoot Set coordinating-only containers' Security Context runAsNonRoot
   ##
   containerSecurityContext:
     enabled: true
     runAsUser: 1001
-  ## @param data.podAffinityPreset Data Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
+    runAsNonRoot: true
+  ## @param coordinating.hostAliases coordinating-only pods host aliases
+  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ##
+  hostAliases: []
+  ## @param coordinating.podLabels Extra labels for coordinating-only pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
+  ##
+  podLabels: {}
+  ## @param coordinating.podAnnotations Annotations for coordinating-only pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
+  ##
+  podAnnotations: {}
+  ## @param coordinating.podAffinityPreset Pod affinity preset. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`
   ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAffinityPreset: ""
-  ## @param data.podAntiAffinityPreset Data Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
+  ## @param coordinating.podAntiAffinityPreset Pod anti-affinity preset. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAntiAffinityPreset: ""
-  ## Node affinity preset. Allowed values: soft, hard
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
-  ## @param data.nodeAffinityPreset.type Data Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## @param data.nodeAffinityPreset.key Data Node label key to match Ignored if `affinity` is set.
-  ## @param data.nodeAffinityPreset.values Data Node label values to match. Ignored if `affinity` is set.
+  ## Node coordinating.affinity preset
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
   ##
   nodeAffinityPreset:
+    ## @param coordinating.nodeAffinityPreset.type Node affinity preset type. Ignored if `coordinating.affinity` is set. Allowed values: `soft` or `hard`
+    ##
     type: ""
-    ## E.g.
-    ## key: "kubernetes.io/e2e-az-name"
+    ## @param coordinating.nodeAffinityPreset.key Node label key to match. Ignored if `coordinating.affinity` is set
     ##
     key: ""
+    ## @param coordinating.nodeAffinityPreset.values Node label values to match. Ignored if `coordinating.affinity` is set
     ## E.g.
     ## values:
     ##   - e2e-az1
     ##   - e2e-az2
     ##
     values: []
-
-  ## @param data.affinity Data Affinity for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
-  ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
+  ## @param coordinating.affinity Affinity for coordinating-only pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
+  ## NOTE: `coordinating.podAffinityPreset`, `coordinating.podAntiAffinityPreset`, and `coordinating.nodeAffinityPreset` will be ignored when it's set
   ##
   affinity: {}
-  ## @param data.priorityClassName Data pods Priority Class Name
-  ## ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
+  ## @param coordinating.nodeSelector Node labels for coordinating-only pods assignment
+  ## ref: https://kubernetes.io/docs/user-guide/node-selection/
+  ##
+  nodeSelector: {}
+  ## @param coordinating.tolerations Tolerations for coordinating-only pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
+  ##
+  tolerations: []
+  ## @param coordinating.priorityClassName coordinating-only pods' priorityClassName
   ##
   priorityClassName: ""
-  ## @param data.nodeSelector Data Node labels for pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
+  ## @param coordinating.schedulerName Name of the k8s scheduler (other than default) for coordinating-only pods
+  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
   ##
-  nodeSelector: {}
-  ## @param data.tolerations Data Tolerations for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
+  schedulerName: ""
+  ## @param coordinating.terminationGracePeriodSeconds In seconds, time the given to the Elasticsearch coordinating pod needs to terminate gracefully
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods
   ##
-  tolerations: []
-  ## @param data.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
+  terminationGracePeriodSeconds: ""
+  ## @param coordinating.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
   ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods
   ##
   topologySpreadConstraints: []
-  ## Elasticsearch data container's resource requests and limits
-  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ## We usually recommend not to specify default resources and to leave this as a conscious
-  ## choice for the user. This also increases chances charts run on environments with little
-  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
-  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-  ## @param data.resources.limits The resources limits for the container
-  ## @param data.resources.requests [object] The requested resources for the container
-  ##
-  resources:
-    ## Example:
-    ## limits:
-    ##    cpu: 100m
-    ##    memory: 2176Mi
-    limits: {}
-    requests:
-      cpu: 25m
-      memory: 2048Mi
-  ## Elasticsearch data container's startup probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param data.startupProbe.enabled Enable/disable the startup probe (data nodes pod)
-  ## @param data.startupProbe.initialDelaySeconds Delay before startup probe is initiated (data nodes pod)
-  ## @param data.startupProbe.periodSeconds How often to perform the probe (data nodes pod)
-  ## @param data.startupProbe.timeoutSeconds When the probe times out (data nodes pod)
-  ## @param data.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param data.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param coordinating.podManagementPolicy podManagementPolicy to manage scaling operation of Elasticsearch coordinating pods
+  ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-management-policies
+  ##
+  podManagementPolicy: "Parallel"
+  ## Configure extra options for Elasticsearch coordinating-only containers' liveness, readiness and startup probes
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
+  ## @param coordinating.startupProbe.enabled Enable/disable the startup probe (coordinating-only nodes pod)
+  ## @param coordinating.startupProbe.initialDelaySeconds Delay before startup probe is initiated (coordinating-only nodes pod)
+  ## @param coordinating.startupProbe.periodSeconds How often to perform the probe (coordinating-only nodes pod)
+  ## @param coordinating.startupProbe.timeoutSeconds When the probe times out (coordinating-only nodes pod)
+  ## @param coordinating.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod)
+  ## @param coordinating.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   startupProbe:
     enabled: false
@@ -960,14 +1149,12 @@ data:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch data container's liveness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param data.livenessProbe.enabled Enable/disable the liveness probe (data nodes pod)
-  ## @param data.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (data nodes pod)
-  ## @param data.livenessProbe.periodSeconds How often to perform the probe (data nodes pod)
-  ## @param data.livenessProbe.timeoutSeconds When the probe times out (data nodes pod)
-  ## @param data.livenessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param data.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param coordinating.livenessProbe.enabled Enable/disable the liveness probe (coordinating-only nodes pod)
+  ## @param coordinating.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (coordinating-only nodes pod)
+  ## @param coordinating.livenessProbe.periodSeconds How often to perform the probe (coordinating-only nodes pod)
+  ## @param coordinating.livenessProbe.timeoutSeconds When the probe times out (coordinating-only nodes pod)
+  ## @param coordinating.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod)
+  ## @param coordinating.livenessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   livenessProbe:
     enabled: true
@@ -976,14 +1163,12 @@ data:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch data container's readiness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param data.readinessProbe.enabled Enable/disable the readiness probe (data nodes pod)
-  ## @param data.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (data nodes pod)
-  ## @param data.readinessProbe.periodSeconds How often to perform the probe (data nodes pod)
-  ## @param data.readinessProbe.timeoutSeconds When the probe times out (data nodes pod)
-  ## @param data.readinessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param data.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (data nodes pod)
+  ## @param coordinating.readinessProbe.enabled Enable/disable the readiness probe (coordinating-only nodes pod)
+  ## @param coordinating.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (coordinating-only nodes pod)
+  ## @param coordinating.readinessProbe.periodSeconds How often to perform the probe (coordinating-only nodes pod)
+  ## @param coordinating.readinessProbe.timeoutSeconds When the probe times out (coordinating-only nodes pod)
+  ## @param coordinating.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (coordinating-only nodes pod)
+  ## @param coordinating.readinessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
   ##
   readinessProbe:
     enabled: true
@@ -992,231 +1177,226 @@ data:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## @param data.customStartupProbe Override default startup probe
+  ## @param coordinating.customStartupProbe Override default startup probe
   ##
   customStartupProbe: {}
-  ## @param data.customLivenessProbe Override default liveness probe
+  ## @param coordinating.customLivenessProbe Override default liveness probe
   ##
   customLivenessProbe: {}
-  ## @param data.customReadinessProbe Override default readiness probe
+  ## @param coordinating.customReadinessProbe Override default readiness probe
   ##
   customReadinessProbe: {}
-  ## @param data.initContainers Extra init containers to add to the Elasticsearch data pod(s)
+  ## @param coordinating.command Override default container command (useful when using custom images)
   ##
-  initContainers: []
-  ## @param data.sidecars Extra sidecar containers to add to the Elasticsearch data pod(s)
+  command: []
+  ## @param coordinating.args Override default container args (useful when using custom images)
   ##
-  sidecars: []
-  ## Service parameters for data-eligible node(s)
+  args: []
+  ## @param coordinating.lifecycleHooks for the coordinating-only container(s) to automate configuration before or after startup
   ##
-  service:
-    ## @param data.service.annotations Annotations for data-eligible nodes service
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
-    ##
-    annotations: {}
-  ## Enable persistence using Persistent Volume Claims
-  ## ref: https://kubernetes.io/docs/user-guide/persistent-volumes/
+  lifecycleHooks: {}
+  ## @param coordinating.extraEnvVars Array with extra environment variables to add to coordinating-only nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
   ##
-  persistence:
-    ## @param data.persistence.enabled Enable persistence using a `PersistentVolumeClaim`
-    ##
-    enabled: true
-    ## @param data.persistence.storageClass Persistent Volume Storage Class
-    ## If defined, storageClassName: <storageClass>
-    ## If set to "-", storageClassName: "", which disables dynamic provisioning
-    ## If undefined (the default) or set to null, no storageClassName spec is
-    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
-    ##   GKE, AWS & OpenStack)
-    ##
-    storageClass: ""
-    ## @param data.persistence.existingClaim Existing Persistent Volume Claim
-    ## If persistence is enable, and this value is defined,
-    ## then accept the value as an existing Persistent Volume Claim to which
-    ## the container should be bound
-    ##
-    existingClaim: ""
-    ## @param data.persistence.existingVolume Existing Persistent Volume for use as volume match label selector to the `volumeClaimTemplate`. Ignored when `data.persistence.selector` ist set.
-    ##
-    existingVolume: ""
-    ## @param data.persistence.selector Configure custom selector for existing Persistent Volume. Overwrites `data.persistence.existingVolume`
-    ## selector:
-    ##   matchLabels:
-    ##     volume:
-    selector: {}
-    ## @param data.persistence.annotations Persistent Volume Claim annotations
-    ##
-    annotations: {}
-    ## @param data.persistence.accessModes Persistent Volume Access Modes
-    ##
-    accessModes:
-      - ReadWriteOnce
-    ## @param data.persistence.size Persistent Volume Size
-    ##
-    size: 8Gi
-  ## Provide functionality to use RBAC
+  extraEnvVars: []
+  ## @param coordinating.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for coordinating-only nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param coordinating.extraEnvVarsSecret Name of existing Secret containing extra env vars for coordinating-only nodes
+  ##
+  extraEnvVarsSecret: ""
+  ## @param coordinating.extraVolumes Optionally specify extra list of additional volumes for the coordinating-only pod(s)
+  ##
+  extraVolumes: []
+  ## @param coordinating.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the coordinating-only container(s)
+  ##
+  extraVolumeMounts: []
+  ## @param coordinating.sidecars Add additional sidecar containers to the coordinating-only pod(s)
+  ## e.g:
+  ## sidecars:
+  ##   - name: your-image-name
+  ##     image: your-image
+  ##     imagePullPolicy: Always
+  ##     ports:
+  ##       - name: portname
+  ##         containerPort: 1234
+  ##
+  sidecars: []
+  ## @param coordinating.initContainers Add additional init containers to the coordinating-only pod(s)
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+  ## e.g:
+  ## initContainers:
+  ##  - name: your-image-name
+  ##    image: your-image
+  ##    imagePullPolicy: Always
+  ##    command: ['sh', '-c', 'echo "hello world"']
+  ##
+  initContainers: []
+  ## Pods Service Account
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
+  ## @param coordinating.serviceAccount.create Specifies whether a ServiceAccount should be created
+  ## @param coordinating.serviceAccount.name Name of the service account to use. If not set and create is true, a name is generated using the fullname template.
+  ## @param coordinating.serviceAccount.automountServiceAccountToken Automount service account token for the server service account
+  ## @param coordinating.serviceAccount.annotations Annotations for service account. Evaluated as a template. Only used if `create` is `true`.
   ##
   serviceAccount:
-    ## @param data.serviceAccount.create Enable creation of ServiceAccount for the data node
-    ##
     create: false
-    ## @param data.serviceAccount.name Name of the created serviceAccount
-    ## If not set and create is true, a name is generated using the fullname template
-    ##
     name: ""
-  ## Autoscaling configuration
-  ## @param data.autoscaling.enabled Enable autoscaling for data replicas
-  ## @param data.autoscaling.minReplicas Minimum number of data replicas
-  ## @param data.autoscaling.maxReplicas Maximum number of data replicas
-  ## @param data.autoscaling.targetCPU Target CPU utilization percentage for data replica autoscaling
-  ## @param data.autoscaling.targetMemory Target Memory utilization percentage for data replica autoscaling
+    automountServiceAccountToken: true
+    annotations: {}
+  ## Enable HorizontalPodAutoscaler for Elasticsearch coordinating pods
+  ## ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
+  ## @param coordinating.autoscaling.enabled Whether enable horizontal pod autoscale
+  ## @param coordinating.autoscaling.minReplicas Configure a minimum amount of pods
+  ## @param coordinating.autoscaling.maxReplicas Configure a maximum amount of pods
+  ## @param coordinating.autoscaling.targetCPU Define the CPU target to trigger the scaling actions (utilization percentage)
+  ## @param coordinating.autoscaling.targetMemory Define the memory target to trigger the scaling actions (utilization percentage)
   ##
   autoscaling:
     enabled: false
-    minReplicas: 2
+    minReplicas: 3
     maxReplicas: 11
     targetCPU: ""
     targetMemory: ""
 
-## @section Ingest parameters
+## @section Ingest-only nodes parameters
 
-## Elasticsearch ingest node parameters
-##
 ingest:
-  ## @param ingest.enabled Enable ingest nodes
+  ## @param ingest.replicaCount Number of ingest-only replicas to deploy
   ##
-  enabled: false
-  ## @param ingest.name Ingest node pod name
+  replicaCount: 2
+  ## @param ingest.nameOverride String to partially override elasticsearch.ingest.fullname
   ##
-  name: ingest
-  ## @param ingest.fullnameOverride String to fully override elasticsearch.ingest.fullname template with a string
+  nameOverride: ""
+  ## @param ingest.fullnameOverride String to fully override elasticsearch.ingest.fullname
   ##
   fullnameOverride: ""
-  ## @param ingest.replicas Desired number of Elasticsearch ingest nodes
+  ## @param ingest.containerPorts.restAPI Elasticsearch REST API port
+  ## @param ingest.containerPorts.transport Elasticsearch Transport port
   ##
-  replicas: 2
-  ## Update strategy for ElasticSearch ingest statefulset
+  containerPorts:
+    restAPI: 9200
+    transport: 9300
+  ## @param ingest.updateStrategy.type Ingest-only nodes statefulset stategy type
   ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies
-  ## @param ingest.updateStrategy.type Update strategy for Ingest statefulset
   ##
   updateStrategy:
     type: RollingUpdate
-  ## @param ingest.heapSize Ingest node heap size
-  ##
-  heapSize: 128m
-  ## @param ingest.podAnnotations Annotations for ingest pods.
-  ##
-  podAnnotations: {}
-  ## @param ingest.hostAliases Add deployment host aliases
-  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
-  ##
-  hostAliases: []
-  ## @param ingest.schedulerName Name of the k8s scheduler (other than default)
-  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
-  ##
-  schedulerName: ""
-  ## @param ingest.podLabels Extra labels to add to Pod
+  ## Elasticsearch resource requests and limits
+  ## ref: http://kubernetes.io/docs/user-guide/compute-resources/
+  ## @param ingest.resources.limits The resources limits for the ingest-only containers
+  ## @param ingest.resources.requests [object] The requested resources for the ingest-only containers
   ##
-  podLabels: {}
-  ## Pod Security Context for ingest pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param ingest.securityContext.enabled Enable security context for ingest pods
-  ## @param ingest.securityContext.fsGroup Group ID for the container for ingest pods
-  ## @param ingest.securityContext.runAsUser User ID for the container for ingest pods
+  resources:
+    limits: {}
+    requests:
+      cpu: 25m
+      memory: 256Mi
+  ## @param ingest.heapSize Elasticsearch ingest-only node heap size.
+  ## Note: The recommended heapSize is half of the container's memory.
+  ## If omitted, it will be automatically set.
+  ## Example:
+  ##   heapSize: 128m
   ##
-  securityContext:
-    enabled: true
-    fsGroup: 1001
-    runAsUser: 1001
-  ## Pod Security Context for ingest pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param ingest.podSecurityContext.enabled Enable security context for ingest pods
-  ## @param ingest.podSecurityContext.fsGroup Group ID for the container for ingest pods
+  heapSize: 128m
+  ## Configure Pods Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param ingest.podSecurityContext.enabled Enabled ingest-only pods' Security Context
+  ## @param ingest.podSecurityContext.fsGroup Set ingest-only pod's Security Context fsGroup
   ##
   podSecurityContext:
     enabled: true
     fsGroup: 1001
-  ## Container Security Context for ingest pods.
-  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
-  ## @param ingest.containerSecurityContext.enabled Enable security context for ingest pods
-  ## @param ingest.containerSecurityContext.runAsUser User ID for the container for ingest pods
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param ingest.containerSecurityContext.enabled Enabled ingest-only containers' Security Context
+  ## @param ingest.containerSecurityContext.runAsUser Set ingest-only containers' Security Context runAsUser
+  ## @param ingest.containerSecurityContext.runAsNonRoot Set ingest-only containers' Security Context runAsNonRoot
   ##
   containerSecurityContext:
     enabled: true
     runAsUser: 1001
-  ## @param ingest.podAffinityPreset Ingest Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
+    runAsNonRoot: true
+  ## @param ingest.hostAliases ingest-only pods host aliases
+  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ##
+  hostAliases: []
+  ## @param ingest.podLabels Extra labels for ingest-only pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
+  ##
+  podLabels: {}
+  ## @param ingest.podAnnotations Annotations for ingest-only pods
+  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
+  ##
+  podAnnotations: {}
+  ## @param ingest.podAffinityPreset Pod affinity preset. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`
   ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAffinityPreset: ""
-  ## @param ingest.podAntiAffinityPreset Ingest Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
+  ## @param ingest.podAntiAffinityPreset Pod anti-affinity preset. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
   ##
   podAntiAffinityPreset: ""
-  ## Node affinity preset
-  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
-  ## Allowed values: soft, hard
-  ## @param ingest.nodeAffinityPreset.type Ingest Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
-  ## @param ingest.nodeAffinityPreset.key Ingest Node label key to match Ignored if `affinity` is set.
-  ## @param ingest.nodeAffinityPreset.values Ingest Node label values to match. Ignored if `affinity` is set.
+  ## Node ingest.affinity preset
+  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
   ##
   nodeAffinityPreset:
+    ## @param ingest.nodeAffinityPreset.type Node affinity preset type. Ignored if `ingest.affinity` is set. Allowed values: `soft` or `hard`
+    ##
     type: ""
-    ## E.g.
-    ## key: "kubernetes.io/e2e-az-name"
+    ## @param ingest.nodeAffinityPreset.key Node label key to match. Ignored if `ingest.affinity` is set
     ##
     key: ""
+    ## @param ingest.nodeAffinityPreset.values Node label values to match. Ignored if `ingest.affinity` is set
     ## E.g.
     ## values:
     ##   - e2e-az1
     ##   - e2e-az2
     ##
     values: []
-  ## @param ingest.affinity Ingest Affinity for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
-  ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
+  ## @param ingest.affinity Affinity for ingest-only pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
+  ## NOTE: `ingest.podAffinityPreset`, `ingest.podAntiAffinityPreset`, and `ingest.nodeAffinityPreset` will be ignored when it's set
   ##
   affinity: {}
-  ## @param ingest.priorityClassName Ingest pods Priority Class Name
-  ## ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
-  ##
-  priorityClassName: ""
-  ## @param ingest.nodeSelector Ingest Node labels for pod assignment
-  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
+  ## @param ingest.nodeSelector Node labels for ingest-only pods assignment
+  ## ref: https://kubernetes.io/docs/user-guide/node-selection/
   ##
   nodeSelector: {}
-  ## @param ingest.tolerations Ingest Tolerations for pod assignment
-  ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
+  ## @param ingest.tolerations Tolerations for ingest-only pods assignment
+  ## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
   ##
   tolerations: []
+  ## @param ingest.priorityClassName ingest-only pods' priorityClassName
+  ##
+  priorityClassName: ""
+  ## @param ingest.schedulerName Name of the k8s scheduler (other than default) for ingest-only pods
+  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+  ##
+  schedulerName: ""
+  ## @param ingest.terminationGracePeriodSeconds In seconds, time the given to the Elasticsearch ingest pod needs to terminate gracefully
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods
+  ##
+  terminationGracePeriodSeconds: ""
   ## @param ingest.topologySpreadConstraints Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template
   ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods
   ##
   topologySpreadConstraints: []
-  ## Elasticsearch ingest container's resource requests and limits
-  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ## We usually recommend not to specify default resources and to leave this as a conscious
-  ## choice for the user. This also increases chances charts run on environments with little
-  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
-  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-  ## @param ingest.resources.limits The resources limits for the container
-  ## @param ingest.resources.requests [object] The requested resources for the container
-  ##
-  resources:
-    ## Example:
-    ## limits:
-    ##    cpu: 100m
-    ##    memory: 384Mi
-    limits: {}
-    requests:
-      cpu: 25m
-      memory: 256Mi
-  ## Elasticsearch ingest container's startup probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param ingest.startupProbe.enabled Enable/disable the startup probe (ingest nodes pod)
-  ## @param ingest.startupProbe.initialDelaySeconds Delay before startup probe is initiated (ingest nodes pod)
-  ## @param ingest.startupProbe.periodSeconds How often to perform the probe (ingest nodes pod)
-  ## @param ingest.startupProbe.timeoutSeconds When the probe times out (ingest nodes pod)
+  ## @param ingest.podManagementPolicy podManagementPolicy to manage scaling operation of Elasticsearch ingest pods
+  ## ref: https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#pod-management-policies
+  ##
+  podManagementPolicy: "Parallel"
+  ## Configure extra options for Elasticsearch ingest-only containers' liveness, readiness and startup probes
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
+  ## @param ingest.startupProbe.enabled Enable/disable the startup probe (ingest-only nodes pod)
+  ## @param ingest.startupProbe.initialDelaySeconds Delay before startup probe is initiated (ingest-only nodes pod)
+  ## @param ingest.startupProbe.periodSeconds How often to perform the probe (ingest-only nodes pod)
+  ## @param ingest.startupProbe.timeoutSeconds When the probe times out (ingest-only nodes pod)
+  ## @param ingest.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)
   ## @param ingest.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param ingest.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)
   ##
   startupProbe:
     enabled: false
@@ -1225,14 +1405,12 @@ ingest:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch ingest container's liveness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param ingest.livenessProbe.enabled Enable/disable the liveness probe (ingest nodes pod)
-  ## @param ingest.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (ingest nodes pod)
-  ## @param ingest.livenessProbe.periodSeconds How often to perform the probe (ingest nodes pod)
-  ## @param ingest.livenessProbe.timeoutSeconds When the probe times out (ingest nodes pod)
+  ## @param ingest.livenessProbe.enabled Enable/disable the liveness probe (ingest-only nodes pod)
+  ## @param ingest.livenessProbe.initialDelaySeconds Delay before liveness probe is initiated (ingest-only nodes pod)
+  ## @param ingest.livenessProbe.periodSeconds How often to perform the probe (ingest-only nodes pod)
+  ## @param ingest.livenessProbe.timeoutSeconds When the probe times out (ingest-only nodes pod)
+  ## @param ingest.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)
   ## @param ingest.livenessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param ingest.livenessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)
   ##
   livenessProbe:
     enabled: true
@@ -1241,14 +1419,12 @@ ingest:
     timeoutSeconds: 5
     successThreshold: 1
     failureThreshold: 5
-  ## Elasticsearch ingest container's readiness probe
-  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
-  ## @param ingest.readinessProbe.enabled Enable/disable the readiness probe (ingest nodes pod)
-  ## @param ingest.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (ingest nodes pod)
-  ## @param ingest.readinessProbe.periodSeconds How often to perform the probe (ingest nodes pod)
-  ## @param ingest.readinessProbe.timeoutSeconds When the probe times out (ingest nodes pod)
+  ## @param ingest.readinessProbe.enabled Enable/disable the readiness probe (ingest-only nodes pod)
+  ## @param ingest.readinessProbe.initialDelaySeconds Delay before readiness probe is initiated (ingest-only nodes pod)
+  ## @param ingest.readinessProbe.periodSeconds How often to perform the probe (ingest-only nodes pod)
+  ## @param ingest.readinessProbe.timeoutSeconds When the probe times out (ingest-only nodes pod)
+  ## @param ingest.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest-only nodes pod)
   ## @param ingest.readinessProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
-  ## @param ingest.readinessProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (ingest nodes pod)
   ##
   readinessProbe:
     enabled: true
@@ -1266,56 +1442,267 @@ ingest:
   ## @param ingest.customReadinessProbe Override default readiness probe
   ##
   customReadinessProbe: {}
-  ## @param ingest.initContainers Extra init containers to add to the Elasticsearch ingest pod(s)
+  ## @param ingest.command Override default container command (useful when using custom images)
   ##
-  initContainers: []
-  ## @param ingest.sidecars Extra sidecar containers to add to the Elasticsearch ingest pod(s)
+  command: []
+  ## @param ingest.args Override default container args (useful when using custom images)
+  ##
+  args: []
+  ## @param ingest.lifecycleHooks for the ingest-only container(s) to automate configuration before or after startup
+  ##
+  lifecycleHooks: {}
+  ## @param ingest.extraEnvVars Array with extra environment variables to add to ingest-only nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
+  ##
+  extraEnvVars: []
+  ## @param ingest.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for ingest-only nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param ingest.extraEnvVarsSecret Name of existing Secret containing extra env vars for ingest-only nodes
+  ##
+  extraEnvVarsSecret: ""
+  ## @param ingest.extraVolumes Optionally specify extra list of additional volumes for the ingest-only pod(s)
+  ##
+  extraVolumes: []
+  ## @param ingest.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the ingest-only container(s)
+  ##
+  extraVolumeMounts: []
+  ## @param ingest.sidecars Add additional sidecar containers to the ingest-only pod(s)
+  ## e.g:
+  ## sidecars:
+  ##   - name: your-image-name
+  ##     image: your-image
+  ##     imagePullPolicy: Always
+  ##     ports:
+  ##       - name: portname
+  ##         containerPort: 1234
   ##
   sidecars: []
-  ## Service parameters for ingest node(s)
+  ## @param ingest.initContainers Add additional init containers to the ingest-only pod(s)
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+  ## e.g:
+  ## initContainers:
+  ##  - name: your-image-name
+  ##    image: your-image
+  ##    imagePullPolicy: Always
+  ##    command: ['sh', '-c', 'echo "hello world"']
+  ##
+  initContainers: []
+  ## Pods Service Account
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
+  ## @param ingest.serviceAccount.create Specifies whether a ServiceAccount should be created
+  ## @param ingest.serviceAccount.name Name of the service account to use. If not set and create is true, a name is generated using the fullname template.
+  ## @param ingest.serviceAccount.automountServiceAccountToken Automount service account token for the server service account
+  ## @param ingest.serviceAccount.annotations Annotations for service account. Evaluated as a template. Only used if `create` is `true`.
+  ##
+  serviceAccount:
+    create: false
+    name: ""
+    automountServiceAccountToken: true
+    annotations: {}
+  ## Enable HorizontalPodAutoscaler for Elasticsearch ingest-only pods
+  ## ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
+  ## @param ingest.autoscaling.enabled Whether enable horizontal pod autoscale
+  ## @param ingest.autoscaling.minReplicas Configure a minimum amount of pods
+  ## @param ingest.autoscaling.maxReplicas Configure a maximum amount of pods
+  ## @param ingest.autoscaling.targetCPU Define the CPU target to trigger the scaling actions (utilization percentage)
+  ## @param ingest.autoscaling.targetMemory Define the memory target to trigger the scaling actions (utilization percentage)
+  ##
+  autoscaling:
+    enabled: false
+    minReplicas: 3
+    maxReplicas: 11
+    targetCPU: ""
+    targetMemory: ""
+
+  ## Elasticsearch Ingest-only Service
+  ## Recommended for heavy ingestion, improves performance by sending ingest traffic directly into the ingest nodes.
+  ## NOTE: Ingest nodes will only accept index requests with an associated pipeline, any other request won't be rerouted.
   ##
   service:
-    ## @param ingest.service.type Kubernetes Service type (ingest nodes)
+    ## @param ingest.service.enabled Enable Ingest-only service
+    ##
+    enabled: false
+    ## @param ingest.service.type Elasticsearch ingest-only service type
     ##
     type: ClusterIP
-    ## @param ingest.service.port Kubernetes Service port Elasticsearch transport port (ingest nodes)
+    ## @param ingest.service.ports.restAPI Elasticsearch service REST API port
+    ## @param ingest.service.ports.transport Elasticsearch service transport port
+    ##
+    ports:
+      restAPI: 9200
+      transport: 9300
+    ## Node ports to expose
+    ## @param ingest.service.nodePorts.restAPI Node port for REST API
+    ## @param ingest.service.nodePorts.transport Node port for REST API
+    ## NOTE: choose port between <30000-32767>
+    ##
+    nodePorts:
+      restAPI: ""
+      transport: ""
+    ## @param ingest.service.clusterIP Elasticsearch ingest-only service Cluster IP
+    ## e.g.:
+    ## clusterIP: None
+    ##
+    clusterIP: ""
+    ## @param ingest.service.loadBalancerIP Elasticsearch ingest-only service Load Balancer IP
+    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-loadbalancer
+    ##
+    loadBalancerIP: ""
+    ## @param ingest.service.loadBalancerSourceRanges Elasticsearch ingest-only service Load Balancer sources
+    ## ref: https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service
+    ## e.g:
+    ## loadBalancerSourceRanges:
+    ##   - 10.10.10.0/24
     ##
-    port: 9300
-    ## @param ingest.service.nodePort Kubernetes Service nodePort (ingest nodes)
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
+    loadBalancerSourceRanges: []
+    ## @param ingest.service.externalTrafficPolicy Elasticsearch ingest-only service external traffic policy
+    ## ref http://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip
     ##
-    nodePort: ""
-    ## @param ingest.service.annotations Annotations for ingest nodes service
-    ## set the LoadBalancer service type to internal only.
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
+    externalTrafficPolicy: Cluster
+    ## @param ingest.service.extraPorts Extra ports to expose (normally used with the `sidecar` value)
+    ##
+    extraPorts: []
+    ## @param ingest.service.annotations Additional custom annotations for Elasticsearch ingest-only service
     ##
     annotations: {}
-    ## @param ingest.service.loadBalancerIP loadBalancerIP if ingest nodes service type is `LoadBalancer`
-    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
+    ## @param ingest.service.sessionAffinity Session Affinity for Kubernetes service, can be "None" or "ClientIP"
+    ## If "ClientIP", consecutive client requests will be directed to the same Pod
+    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies
     ##
-    loadBalancerIP: ""
-
-  ## Provide functionality to use RBAC
+    sessionAffinity: None
+    ## @param ingest.service.sessionAffinityConfig Additional settings for the sessionAffinity
+    ## sessionAffinityConfig:
+    ##   clientIP:
+    ##     timeoutSeconds: 300
+    ##
+    sessionAffinityConfig: {}
+  ## Elasticsearch Ingest-only ingress parameters
+  ## ref: http://kubernetes.io/docs/user-guide/ingress/
   ##
-  serviceAccount:
-    ## @param ingest.serviceAccount.create Create a default serviceaccount for elasticsearch curator
+  ingress:
+    ## @param ingest.ingress.enabled Enable ingress record generation for Elasticsearch
+    ##
+    enabled: false
+    ## @param ingest.ingress.pathType Ingress path type
+    ##
+    pathType: ImplementationSpecific
+    ## @param ingest.ingress.apiVersion Force Ingress API version (automatically detected if not set)
+    ##
+    apiVersion: ""
+    ## @param ingest.ingress.hostname Default host for the ingress record
+    ##
+    hostname: elasticsearch-ingest.local
+    ## @param ingest.ingress.path Default path for the ingress record
+    ## NOTE: You may need to set this to '/*' in order to use this with ALB ingress controllers
+    ##
+    path: /
+    ## @param ingest.ingress.annotations Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations.
+    ## Use this parameter to set the required annotations for cert-manager, see
+    ## ref: https://cert-manager.io/docs/usage/ingress/#supported-annotations
+    ## e.g:
+    ## annotations:
+    ##   kubernetes.io/ingress.class: nginx
+    ##   cert-manager.io/cluster-issuer: cluster-issuer-name
+    ##
+    annotations: {}
+    ## @param ingest.ingress.tls Enable TLS configuration for the host defined at `ingress.hostname` parameter
+    ## TLS certificates will be retrieved from a TLS secret with name: `{{- printf "%s-tls" .Values.ingress.hostname }}`
+    ## You can:
+    ##   - Use the `ingress.secrets` parameter to create this TLS secret
+    ##   - Relay on cert-manager to create it by setting the corresponding annotations
+    ##   - Relay on Helm to create self-signed certificates by setting `ingress.selfSigned=true`
+    ##
+    tls: false
+    ## @param ingest.ingress.selfSigned Create a TLS secret for this ingress record using self-signed certificates generated by Helm
+    ##
+    selfSigned: false
+    ## @param ingest.ingress.ingressClassName IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)
+    ## This is supported in Kubernetes 1.18+ and required if you have more than one IngressClass marked as the default for your cluster .
+    ## ref: https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/
+    ##
+    ingressClassName: ""
+    ## @param ingest.ingress.extraRules An array with additional ingress rules, evaluated as a template.
+    ##
+    extraRules: []
+    ## @param ingest.ingress.extraHosts An array with additional hostname(s) to be covered with the ingress record
+    ## e.g:
+    ## extraHosts:
+    ##   - name: elasticsearch.local
+    ##     path: /
+    ##
+    extraHosts: []
+    ## @param ingest.ingress.extraPaths An array with additional arbitrary paths that may need to be added to the ingress under the main host
+    ## e.g:
+    ## extraPaths:
+    ## - path: /*
+    ##   backend:
+    ##     serviceName: ssl-redirect
+    ##     servicePort: use-annotation
     ##
-    create: false
-    ## @param ingest.serviceAccount.name Name of the created serviceAccount
-    ## If not set and create is true, a name is generated using the fullname template
+    extraPaths: []
+    ## @param ingest.ingress.extraTls TLS configuration for additional hostname(s) to be covered with this ingress record
+    ## ref: https://kubernetes.io/docs/concepts/services-networking/ingress/#tls
+    ## e.g:
+    ## extraTls:
+    ## - hosts:
+    ##     - elasticsearch.local
+    ##   secretName: elasticsearch.local-tls
     ##
-    name: ""
+    extraTls: []
+    ## @param ingest.ingress.secrets Custom TLS certificates as secrets
+    ## NOTE: 'key' and 'certificate' are expected in PEM format
+    ## NOTE: 'name' should line up with a 'secretName' set further up
+    ## If it is not set and you're using cert-manager, this is unneeded, as it will create a secret for you with valid certificates
+    ## If it is not set and you're NOT using cert-manager either, self-signed certificates will be created valid for 365 days
+    ## It is also possible to create and manage the certificates outside of this helm chart
+    ## Please see README.md for more information
+    ## e.g:
+    ## secrets:
+    ##   - name: elasticsearch.local-tls
+    ##     key: |-
+    ##       -----BEGIN RSA PRIVATE KEY-----
+    ##       ...
+    ##       -----END RSA PRIVATE KEY-----
+    ##     certificate: |-
+    ##       -----BEGIN CERTIFICATE-----
+    ##       ...
+    ##       -----END CERTIFICATE-----
+    ##
+    secrets: []
+
+## @section Elasticsearch curator parameters
 
-## @section Curator parameters
 
-## Elasticsearch curator parameters
+## Elasticsearch Curator parameters
 ##
 curator:
   ## @param curator.enabled Enable Elasticsearch Curator cron job
+  ##
   enabled: false
-  ## @param curator.name Elasticsearch Curator pod name
+  ## @param curator.nameOverride String to partially override elasticsearch.curator.fullname
+  ##
+  nameOverride: ""
+  ## @param curator.fullnameOverride String to fully override elasticsearch.curator.fullname
   ##
-  name: curator
+  fullnameOverride: ""
+  ## @param curator.hooks [object] Whether to run job on selected hooks
+  ##
+  hooks:
+    install: false
+    upgrade: false
+  ## @param curator.dryRun Run Curator in dry-run mode
+  ##
+  dryRun: false
+  ## @param curator.jobAnnotations Annotations to add to the job
+  ##
+  jobAnnotations: {}
+  ## @param curator.jobLabels Annotations to add to the job
+  ##
+  jobLabels: {}
   ## @param curator.image.registry Elasticsearch Curator image registry
   ## @param curator.image.repository Elasticsearch Curator image repository
   ## @param curator.image.tag Elasticsearch Curator image tag
@@ -1325,7 +1712,7 @@ curator:
   image:
     registry: docker.io
     repository: bitnami/elasticsearch-curator
-    tag: 5.8.4-debian-10-r321
+    tag: 5.8.4-debian-10-r332
     pullPolicy: IfNotPresent
     ## Optionally specify an array of imagePullSecrets.
     ## Secrets must be manually created in the namespace.
@@ -1336,24 +1723,48 @@ curator:
     ##
     pullSecrets: []
   ## @param curator.cronjob.schedule Schedule for the CronJob
-  ## @param curator.cronjob.annotations Annotations to add to the cronjob
   ## @param curator.cronjob.concurrencyPolicy `Allow,Forbid,Replace` concurrent jobs
   ## @param curator.cronjob.failedJobsHistoryLimit Specify the number of failed Jobs to keep
   ## @param curator.cronjob.successfulJobsHistoryLimit Specify the number of completed Jobs to keep
   ## @param curator.cronjob.jobRestartPolicy Control the Job restartPolicy
+  ## @param curator.cronjob.cronjobAnnotations Annotations to add to the cronjob
+  ## @param curator.cronjob.cronjobLabels Annotations to add to the cronjob
+  ## @param curator.cronjob.jobAnnotations Annotations to add to the job template
+  ## @param curator.cronjob.jobLabels Annotations to add to the job template
   ##
   cronjob:
     ## At 01:00 every day
     schedule: "0 1 * * *"
-    annotations: {}
     concurrencyPolicy: ""
     failedJobsHistoryLimit: ""
     successfulJobsHistoryLimit: ""
     jobRestartPolicy: Never
-  ## @param curator.schedulerName Name of the k8s scheduler (other than default)
-  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
+    cronjobAnnotations: {}
+    cronjobLabels: {}
+    jobAnnotations: {}
+    jobLabels: {}
+  ## Configure Curator cronjob Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param curator.podSecurityContext.enabled Enabled Curator jobs' Security Context
+  ## @param curator.podSecurityContext.fsGroup Set Curator pod's Security Context fsGroup
   ##
-  schedulerName: ""
+  podSecurityContext:
+    enabled: true
+    fsGroup: 1001
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param curator.containerSecurityContext.enabled Enabled Curator containers' Security Context
+  ## @param curator.containerSecurityContext.runAsUser Set Curator containers' Security Context runAsUser
+  ## @param curator.containerSecurityContext.runAsNonRoot Set Curator containers' Security Context runAsNonRoot
+  ##
+  containerSecurityContext:
+    enabled: true
+    runAsUser: 1001
+    runAsNonRoot: true
+  ## @param curator.hostAliases Curator pods host aliases
+  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
+  ##
+  hostAliases: []
   ## @param curator.podAnnotations Annotations to add to the pod
   ##
   podAnnotations: {}
@@ -1386,12 +1797,6 @@ curator:
     ##   - e2e-az2
     ##
     values: []
-  ## @param curator.initContainers Extra init containers to add to the Elasticsearch coordinating-only pod(s)
-  ##
-  initContainers: []
-  ## @param curator.sidecars Extra sidecar containers to add to the Elasticsearch ingest pod(s)
-  ##
-  sidecars: []
   ## @param curator.affinity Curator Affinity for pod assignment
   ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
   ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
@@ -1409,86 +1814,13 @@ curator:
   ## Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/#spread-constraints-for-pods
   ##
   topologySpreadConstraints: []
-  ## @param curator.rbac.enabled Enable RBAC resources
-  ##
-  rbac:
-    enabled: false
-  ## @param curator.serviceAccount.create Create a default serviceaccount for elasticsearch curator
-  ## @param curator.serviceAccount.name Name for elasticsearch curator serviceaccount
-  ##
-  serviceAccount:
-    create: true
-    ## If not set and create is true, a name is generated using the fullname template
-    ##
-    name: ""
-  ## @param curator.psp.create Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later
-  ##
-  psp:
-    create: false
-  ## @param curator.hooks [object] Whether to run job on selected hooks
-  ##
-  hooks:
-    install: false
-    upgrade: false
-  ## @param curator.dryrun Run Curator in dry-run mode
-  ##
-  dryrun: false
-  ## @param curator.command Command to execute
+  ## @param curator.priorityClassName Curator Pods Priority Class Name
   ##
-  command: ["curator"]
-  ## @param curator.env Environment variables to add to the cronjob container
+  priorityClassName: ""
+  ## @param curator.schedulerName Name of the k8s scheduler (other than default)
+  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
   ##
-  env: {}
-  ## Curator configMaps
-  configMaps:
-    ## @param curator.configMaps.action_file_yml [string] Contents of the Curator action_file.yml
-    ## Delete indices older than 90 days
-    ##
-    action_file_yml: |-
-      ---
-      actions:
-        1:
-          action: delete_indices
-          description: "Clean up ES by deleting old indices"
-          options:
-            timeout_override:
-            continue_if_exception: False
-            disable_action: False
-            ignore_empty_list: True
-          filters:
-          - filtertype: age
-            source: name
-            direction: older
-            timestring: '%Y.%m.%d'
-            unit: days
-            unit_count: 90
-            field:
-            stats_result:
-            epoch:
-            exclude: False
-    ## @param curator.configMaps.config_yml [string] Contents of the Curator config.yml (overrides config)
-    ## Default config (this value is evaluated as a template)
-    ##
-    config_yml: |-
-      ---
-      client:
-        hosts:
-          - {{ template "elasticsearch.coordinating.fullname" . }}.{{ .Release.Namespace }}.svc.{{ .Values.clusterDomain }}
-        port: {{ .Values.coordinating.service.port }}
-        # url_prefix:
-        # use_ssl: True
-        # certificate:
-        # client_cert:
-        # client_key:
-        # ssl_no_validate: True
-        # http_auth:
-        # timeout: 30
-        # master_only: False
-      # logging:
-      #   loglevel: INFO
-      #   logfile:
-      #   logformat: default
-      #   blacklist: ['elasticsearch', 'urllib3']
+  schedulerName: ""
   ## Curator resources requests and limits
   ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
   ## We usually recommend not to specify default resources and to leave this as a conscious
@@ -1509,9 +1841,68 @@ curator:
     ##    cpu: 100m
     ##    memory: 128Mi
     requests: {}
-  ## @param curator.priorityClassName Curator Pods Priority Class Name
+  ## Curator configMaps
   ##
-  priorityClassName: ""
+  configMaps:
+    ## @param curator.configMaps.action_file_yml Contents of the Curator action_file.yml. Required if curator job is enabled.
+    ## For example, to delete indices older than 90 days:
+    ##
+    ## action_file_yml: |-
+    ##   ---
+    ##   actions:
+    ##     1:
+    ##       action: delete_indices
+    ##       description: "Clean up ES by deleting old indices"
+    ##       options:
+    ##         timeout_override:
+    ##         continue_if_exception: False
+    ##         disable_action: False
+    ##         ignore_empty_list: True
+    ##       filters:
+    ##       - filtertype: age
+    ##         source: name
+    ##         direction: older
+    ##         timestring: '%Y.%m.%d'
+    ##         unit: days
+    ##         unit_count: 90
+    ##         field:
+    ##         stats_result:
+    ##         epoch:
+    ##         exclude: False
+    ##
+    action_file_yml: ""
+    ## @param curator.configMaps.config_yml [string] Contents of the Curator config.yml (overrides config)
+    ## e.g:
+    ## config_yml: |-
+    ##   ---
+    ##   client:
+    ##     hosts:
+    ##       - {{ template "elasticsearch.coordinating.fullname" . }}.{{ include "common.names.namespace" }}.svc.{{ .Values.clusterDomain }}
+    ##     port: {{ .Values.coordinating.service.port }}
+    ##
+    config_yml: ""
+  ## @param curator.command Override default container command (useful when using custom images)
+  ##
+  command: []
+  ## @param curator.args Override default container args (useful when using custom images)
+  ##
+  args: []
+  ## @param curator.lifecycleHooks for the Curator container(s) to automate configuration before or after startup
+  ##
+  lifecycleHooks: {}
+  ## @param curator.extraEnvVars Array with extra environment variables to add to Curator nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
+  ##
+  extraEnvVars: []
+  ## @param curator.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for Curator nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param curator.extraEnvVarsSecret Name of existing Secret containing extra env vars for Curator nodes
+  ##
+  extraEnvVarsSecret: ""
   ## @param curator.extraVolumes Extra volumes
   ## Example Use Case: mount ssl certificates when elasticsearch has tls enabled
   ## extraVolumes:
@@ -1526,41 +1917,51 @@ curator:
   ##     mountPath: /certs
   ##     readOnly: true
   extraVolumeMounts: []
-  ## @param curator.extraInitContainers DEPRECATED. Use `curator.initContainers` instead. Init containers to add to the cronjob container
-  ## Don't configure S3 repository till Elasticsearch is reachable.
-  ## Ensure that it is available at http://elasticsearch:9200
-  ##
-  ## elasticsearch-s3-repository:
-  ##   image: bitnami/minideb
-  ##   imagePullPolicy: "IfNotPresent"
-  ##   command:
-  ##   - "/bin/bash"
-  ##   - "-c"
-  ##   args:
-  ##   - |
-  ##     ES_HOST=elasticsearch
-  ##     ES_PORT=9200
-  ##     ES_REPOSITORY=backup
-  ##     S3_REGION=us-east-1
-  ##     S3_BUCKET=bucket
-  ##     S3_BASE_PATH=backup
-  ##     S3_COMPRESS=true
-  ##     S3_STORAGE_CLASS=standard
-  ##     install_packages curl && \
-  ##     ( counter=0; while (( counter++ < 120 )); do curl -s http://${ES_HOST}:${ES_PORT} >/dev/null 2>&1 && break; echo "Waiting for elasticsearch $counter/120"; sleep 1; done ) && \
-  ##     cat <<EOF | curl -sS -XPUT -H "Content-Type: application/json" -d @- http://${ES_HOST}:${ES_PORT}/_snapshot/${ES_REPOSITORY} \
-  ##     {
-  ##       "type": "s3",
-  ##       "settings": {
-  ##         "bucket": "${S3_BUCKET}",
-  ##         "base_path": "${S3_BASE_PATH}",
-  ##         "region": "${S3_REGION}",
-  ##         "compress": "${S3_COMPRESS}",
-  ##         "storage_class": "${S3_STORAGE_CLASS}"
-  ##       }
-  ##     }
-  ##
-  extraInitContainers: []
+  ## @param curator.initContainers Extra init containers to add to the Elasticsearch coordinating-only pod(s)
+  ##
+  initContainers: []
+  ## @param curator.sidecars Extra sidecar containers to add to the Elasticsearch ingest pod(s)
+  ##
+  sidecars: []
+  ## Curator RBAC parameters
+  ##
+  rbac:
+    ## @param curator.rbac.enabled Enable RBAC resources
+    ##
+    enabled: false
+    ## @param curator.rbac.rules Custom RBAC rules to set
+    ## e.g:
+    ## rules:
+    ##   - apiGroups:
+    ##       - ""
+    ##     resources:
+    ##       - pods
+    ##     verbs:
+    ##       - get
+    ##       - list
+    ##
+    rules: []
+  ## Curator ServiceAccount parameters
+  ##
+  serviceAccount:
+    ## @param curator.serviceAccount.create Create a default serviceaccount for elasticsearch curator
+    ##
+    create: true
+    ## @param curator.serviceAccount.name Name for elasticsearch curator serviceaccount
+    ## If not set and create is true, a name is generated using the fullname template
+    ##
+    name: ""
+    ## @param curator.serviceAccount.automountServiceAccountToken Allows auto mount of ServiceAccountToken on the serviceAccount created
+    ## Can be set to false if pods using this serviceAccount do not need to use K8s API
+    ##
+    automountServiceAccountToken: true
+    ## @param curator.serviceAccount.annotations Additional custom annotations for the ServiceAccount
+    ##
+    annotations: {}
+  ## @param curator.psp.create Whether to create a PodSecurityPolicy. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later
+  ##
+  psp:
+    create: false
 
 ## @section Metrics parameters
 
@@ -1571,9 +1972,12 @@ metrics:
   ## @param metrics.enabled Enable prometheus exporter
   ##
   enabled: false
-  ## @param metrics.name Metrics pod name
+  ## @param metrics.nameOverride Metrics pod name
+  ##
+  nameOverride: ""
+  ## @param metrics.fullnameOverride String to fully override common.names.fullname
   ##
-  name: metrics
+  fullnameOverride: ""
   ## @param metrics.image.registry Metrics exporter image registry
   ## @param metrics.image.repository Metrics exporter image repository
   ## @param metrics.image.tag Metrics exporter image tag
@@ -1583,7 +1987,7 @@ metrics:
   image:
     registry: docker.io
     repository: bitnami/elasticsearch-exporter
-    tag: 1.3.0-debian-10-r176
+    tag: 1.3.0-debian-10-r187
     pullPolicy: IfNotPresent
     ## Optionally specify an array of imagePullSecrets.
     ## Secrets must be manually created in the namespace.
@@ -1609,12 +2013,18 @@ metrics:
   ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
   ##
   schedulerName: ""
+  ## @param metrics.priorityClassName Elasticsearch metrics exporter pods' priorityClassName
+  ##
+  priorityClassName: ""
   ## Elasticsearch Prometheus exporter service type
   ##
   service:
     ## @param metrics.service.type Metrics exporter endpoint service type
     ##
     type: ClusterIP
+    ## @param metrics.service.port Metrics exporter endpoint service port
+    ##
+    port: 9114
     ## @param metrics.service.annotations [object] Provide any additional annotations which may be required.
     ## This can be used to set the LoadBalancer service type to internal only.
     ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
@@ -1717,6 +2127,31 @@ metrics:
     timeoutSeconds: 1
     successThreshold: 1
     failureThreshold: 5
+  ## Elasticsearch metrics container's startup probe
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
+  ## @param metrics.startupProbe.enabled Enable/disable the startup probe (metrics pod)
+  ## @param metrics.startupProbe.initialDelaySeconds Delay before startup probe is initiated (metrics pod)
+  ## @param metrics.startupProbe.periodSeconds How often to perform the probe (metrics pod)
+  ## @param metrics.startupProbe.timeoutSeconds When the probe times out (metrics pod)
+  ## @param metrics.startupProbe.failureThreshold Minimum consecutive failures for the probe to be considered failed after having succeeded
+  ## @param metrics.startupProbe.successThreshold Minimum consecutive successes for the probe to be considered successful after having failed (metrics pod)
+  ##
+  startupProbe:
+    enabled: false
+    initialDelaySeconds: 5
+    periodSeconds: 10
+    timeoutSeconds: 1
+    successThreshold: 1
+    failureThreshold: 5
+  ## @param metrics.customStartupProbe Custom liveness probe for the Web component
+  ##
+  customStartupProbe: {}
+  ## @param metrics.customLivenessProbe Custom liveness probe for the Web component
+  ##
+  customLivenessProbe: {}
+  ## @param metrics.customReadinessProbe Custom readiness probe for the Web component
+  ##
+  customReadinessProbe: {}
   ## @param metrics.podAnnotations [object] Metrics exporter pod Annotation and Labels
   ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
   ##
@@ -1726,38 +2161,163 @@ metrics:
   ## @param metrics.podLabels Extra labels to add to Pod
   ##
   podLabels: {}
+  ## Configure Pods Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param metrics.podSecurityContext.enabled Enabled Elasticsearch metrics exporter pods' Security Context
+  ## @param metrics.podSecurityContext.fsGroup Set Elasticsearch metrics exporter pod's Security Context fsGroup
+  ##
+  podSecurityContext:
+    enabled: true
+    fsGroup: 1001
+  ## Configure Container Security Context
+  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod
+  ## @param metrics.containerSecurityContext.enabled Enabled Elasticsearch metrics exporter containers' Security Context
+  ## @param metrics.containerSecurityContext.runAsUser Set Elasticsearch metrics exporter containers' Security Context runAsUser
+  ## @param metrics.containerSecurityContext.runAsNonRoot Set Elasticsearch metrics exporter container's Security Context runAsNonRoot
+  ##
+  containerSecurityContext:
+    enabled: true
+    runAsUser: 1001
+    runAsNonRoot: true
+  ## @param metrics.command Override default container command (useful when using custom images)
+  ##
+  command: []
+  ## @param metrics.args Override default container args (useful when using custom images)
+  ##
+  args: []
+  ## @param metrics.extraEnvVars Array with extra environment variables to add to Elasticsearch metrics exporter nodes
+  ## e.g:
+  ## extraEnvVars:
+  ##   - name: FOO
+  ##     value: "bar"
+  ##
+  extraEnvVars: []
+  ## @param metrics.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for Elasticsearch metrics exporter nodes
+  ##
+  extraEnvVarsCM: ""
+  ## @param metrics.extraEnvVarsSecret Name of existing Secret containing extra env vars for Elasticsearch metrics exporter nodes
+  ##
+  extraEnvVarsSecret: ""
+  ## @param metrics.extraVolumes Optionally specify extra list of additional volumes for the Elasticsearch metrics exporter pod(s)
+  ##
+  extraVolumes: []
+  ## @param metrics.extraVolumeMounts Optionally specify extra list of additional volumeMounts for the Elasticsearch metrics exporter container(s)
+  ##
+  extraVolumeMounts: []
+  ## @param metrics.sidecars Add additional sidecar containers to the Elasticsearch metrics exporter pod(s)
+  ## e.g:
+  ## sidecars:
+  ##   - name: your-image-name
+  ##     image: your-image
+  ##     imagePullPolicy: Always
+  ##     ports:
+  ##       - name: portname
+  ##         containerPort: 1234
+  ##
+  sidecars: []
+  ## @param metrics.initContainers Add additional init containers to the Elasticsearch metrics exporter pod(s)
+  ## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
+  ## e.g:
+  ## initContainers:
+  ##  - name: your-image-name
+  ##    image: your-image
+  ##    imagePullPolicy: Always
+  ##    command: ['sh', '-c', 'echo "hello world"']
+  ##
+  initContainers: []
   ## Prometheus Operator ServiceMonitor configuration
   ##
   serviceMonitor:
-    ## @param metrics.serviceMonitor.enabled if `true`, creates a Prometheus Operator ServiceMonitor (also requires `metrics.enabled` to be `true`)
+    ## @param metrics.serviceMonitor.enabled Create ServiceMonitor Resource for scraping metrics using PrometheusOperator
     ##
     enabled: false
-    ## @param metrics.serviceMonitor.namespace Namespace in which Prometheus is running
+    ## @param metrics.serviceMonitor.namespace Namespace which Prometheus is running in
+    ## e.g:
+    ## namespace: monitoring
     ##
     namespace: ""
-    ## @param metrics.serviceMonitor.labels Extra labels for the ServiceMonitor
+    ## @param metrics.serviceMonitor.jobLabel The name of the label on the target service to use as the job name in prometheus.
     ##
-    labels: {}
-    ## @param metrics.serviceMonitor.interval Interval at which metrics should be scraped.
+    jobLabel: ""
+    ## @param metrics.serviceMonitor.interval Interval at which metrics should be scraped
     ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint
-    ## e.g:
-    ## interval: 10s
     ##
     interval: ""
     ## @param metrics.serviceMonitor.scrapeTimeout Timeout after which the scrape is ended
     ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint
-    ## e.g:
-    ## scrapeTimeout: 10s
     ##
     scrapeTimeout: ""
-    ## @param metrics.serviceMonitor.selector Prometheus instance selector labels
+    ## @param metrics.serviceMonitor.relabelings RelabelConfigs to apply to samples before scraping
+    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+    ##
+    relabelings: []
+    ## @param metrics.serviceMonitor.metricRelabelings MetricRelabelConfigs to apply to samples before ingestion
+    ## ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
+    ##
+    metricRelabelings: []
+    ## @param metrics.serviceMonitor.selector ServiceMonitor selector labels
     ## ref: https://github.com/bitnami/charts/tree/master/bitnami/prometheus-operator#prometheus-configuration
+    ##
     ## selector:
     ##   prometheus: my-prometheus
     ##
     selector: {}
+    ## @param metrics.serviceMonitor.labels Extra labels for the ServiceMonitor
+    ##
+    labels: {}
+    ## @param metrics.serviceMonitor.honorLabels honorLabels chooses the metric's labels on collisions with target labels
+    ##
+    honorLabels: false
+
+## @section Init Container Parameters
 
-## @section Sysctl Image parameters
+## 'volumePermissions' init container parameters
+## Changes the owner and group of the persistent volume mount point to runAsUser:fsGroup values
+##   based on the *podSecurityContext/*containerSecurityContext parameters
+##
+volumePermissions:
+  ## @param volumePermissions.enabled Enable init container that changes volume permissions in the data directory (for cases where the default k8s `runAsUser` and `fsUser` values do not work)
+  ##
+  enabled: false
+  ## @param volumePermissions.image.registry Init container volume-permissions image registry
+  ## @param volumePermissions.image.repository Init container volume-permissions image name
+  ## @param volumePermissions.image.tag Init container volume-permissions image tag
+  ## @param volumePermissions.image.pullPolicy Init container volume-permissions image pull policy
+  ## @param volumePermissions.image.pullSecrets Init container volume-permissions image pull secrets
+  ##
+  image:
+    registry: docker.io
+    repository: bitnami/bitnami-shell
+    tag: 10-debian-10-r414
+    pullPolicy: IfNotPresent
+    ## Optionally specify an array of imagePullSecrets.
+    ## Secrets must be manually created in the namespace.
+    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
+    ## e.g:
+    ## pullSecrets:
+    ##   - myRegistryKeySecretName
+    ##
+    pullSecrets: []
+  ## Init container' resource requests and limits
+  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
+  ## We usually recommend not to specify default resources and to leave this as a conscious
+  ## choice for the user. This also increases chances charts run on environments with little
+  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
+  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
+  ## @param volumePermissions.resources.limits The resources limits for the container
+  ## @param volumePermissions.resources.requests The requested resources for the container
+  ##
+  resources:
+    ## Example:
+    ## limits:
+    ##    cpu: 100m
+    ##    memory: 128Mi
+    limits: {}
+    ## Examples:
+    ## requests:
+    ##    cpu: 100m
+    ##    memory: 128Mi
+    requests: {}
 
 ## Kernel settings modifier image
 ##
@@ -1773,7 +2333,7 @@ sysctlImage:
   ##
   registry: docker.io
   repository: bitnami/bitnami-shell
-  tag: 10-debian-10-r403
+  tag: 10-debian-10-r414
   ## Specify a imagePullPolicy
   ## Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'
   ## ref: https://kubernetes.io/docs/user-guide/images/#pre-pulling-images
@@ -1808,55 +2368,6 @@ sysctlImage:
     ##    memory: 128Mi
     requests: {}
 
-## @section VolumePermissions parameters
-
-## Init containers parameters:
-## volumePermissions: Change the owner and group of the persistent volume mountpoint to runAsUser:fsGroup values from the securityContext section.
-##
-volumePermissions:
-  ## @param volumePermissions.enabled Enable init container that changes volume permissions in the data directory (for cases where the default k8s `runAsUser` and `fsUser` values do not work)
-  ##
-  enabled: false
-  ## @param volumePermissions.image.registry Init container volume-permissions image registry
-  ## @param volumePermissions.image.repository Init container volume-permissions image name
-  ## @param volumePermissions.image.tag Init container volume-permissions image tag
-  ## @param volumePermissions.image.pullPolicy Init container volume-permissions image pull policy
-  ## @param volumePermissions.image.pullSecrets Init container volume-permissions image pull secrets
-  ##
-  image:
-    registry: docker.io
-    repository: bitnami/bitnami-shell
-    tag: 10-debian-10-r403
-    pullPolicy: IfNotPresent
-    ## Optionally specify an array of imagePullSecrets.
-    ## Secrets must be manually created in the namespace.
-    ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
-    ## e.g:
-    ## pullSecrets:
-    ##   - myRegistryKeySecretName
-    ##
-    pullSecrets: []
-  ## Init container' resource requests and limits
-  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
-  ## We usually recommend not to specify default resources and to leave this as a conscious
-  ## choice for the user. This also increases chances charts run on environments with little
-  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
-  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
-  ## @param volumePermissions.resources.limits The resources limits for the container
-  ## @param volumePermissions.resources.requests The requested resources for the container
-  ##
-  resources:
-    ## Example:
-    ## limits:
-    ##    cpu: 100m
-    ##    memory: 128Mi
-    limits: {}
-    ## Examples:
-    ## requests:
-    ##    cpu: 100m
-    ##    memory: 128Mi
-    requests: {}
-
 ## @section Kibana Parameters
 
 ## Bundled Kibana parameters
@@ -1866,5 +2377,5 @@ volumePermissions:
 kibana:
   elasticsearch:
     hosts:
-      - '{{ include "elasticsearch.coordinating.fullname" . }}'
-    port: 9200
+      - '{{ include "elasticsearch.service.name" . }}'
+    port: '{{ include "elasticsearch.service.ports.restAPI" . }}'
